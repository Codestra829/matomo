(function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t(require("CoreHome"),require("Login"),require("vue"),require("CorePluginsAdmin")):"function"===typeof define&&define.amd?define(["CoreHome","Login",,"CorePluginsAdmin"],t):"object"===typeof exports?exports["TwoFactorAuth"]=t(require("CoreHome"),require("Login"),require("vue"),require("CorePluginsAdmin")):e["TwoFactorAuth"]=t(e["CoreHome"],e["Login"],e["Vue"],e["CorePluginsAdmin"])})("undefined"!==typeof self?self:this,(function(e,t,o,n){return function(e){var t={};function o(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}return o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="plugins/TwoFactorAuth/vue/dist/",o(o.s="fae3")}({"19dc":function(t,o){t.exports=e},"5b81":function(e,o){e.exports=t},"8bbf":function(e,t){e.exports=o},a5a2:function(e,t){e.exports=n},fae3:function(e,t,o){"use strict";if(o.r(t),o.d(t,"ShowRecoveryCodes",(function(){return h})),o.d(t,"ShowRecoveryCodesPage",(function(){return V})),o.d(t,"SetupTwoFactorAuth",(function(){return de})),o.d(t,"LoginTwoFactorAuth",(function(){return He})),o.d(t,"SetupFinished",(function(){return Ye})),o.d(t,"UserSettings",(function(){return ht})),"undefined"!==typeof window){var n=window.document.currentScript,r=n&&n.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);r&&(o.p=r[1])}var c=o("8bbf"),a=Object(c["createElementVNode"])("br",null,null,-1),l=Object(c["createElementVNode"])("br",null,null,-1),i={class:"alert alert-warning"},s={key:0,class:"twoFactorRecoveryCodes browser-default"},u={key:1,class:"alert alert-danger"},d=Object(c["createElementVNode"])("br",null,null,-1),b=["value"],p=["value"],m=["value"];function O(e,t,o,n,r,O){var j,f=Object(c["resolveDirective"])("select-on-focus");return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",null,[Object(c["createElementVNode"])("p",null,[Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.translate("TwoFactorAuth_RecoveryCodesExplanation")),1),a,l]),Object(c["createElementVNode"])("div",i,Object(c["toDisplayString"])(e.translate("TwoFactorAuth_RecoveryCodesSecurity")),1),null!==(j=e.codes)&&void 0!==j&&j.length?Object(c["withDirectives"])((Object(c["openBlock"])(),Object(c["createElementBlock"])("ul",s,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(e.codes,(function(e,t){return Object(c["openBlock"])(),Object(c["createElementBlock"])("li",{key:t},Object(c["toDisplayString"])(e.toUpperCase().match(/.{1,4}/g).join("-")),1)})),128))],512)),[[f,{}]]):(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",u,Object(c["toDisplayString"])(e.translate("TwoFactorAuth_RecoveryCodesAllUsed")),1)),Object(c["createElementVNode"])("p",null,[d,Object(c["createElementVNode"])("input",{type:"button",class:"btn backupRecoveryCode",onClick:t[0]||(t[0]=function(t){e.downloadRecoveryCodes(),e.$emit("downloaded")}),value:e.translate("General_Download"),style:{"margin-right":"3.5px"}},null,8,b),Object(c["createElementVNode"])("input",{type:"button",class:"btn backupRecoveryCode",onClick:t[1]||(t[1]=function(t){e.print(),e.$emit("downloaded")}),value:e.translate("General_Print"),style:{"margin-right":"3.5px"}},null,8,p),Object(c["createElementVNode"])("input",{type:"button",class:"btn backupRecoveryCode",onClick:t[2]||(t[2]=function(t){e.copyRecoveryCodesToClipboard(),e.$emit("downloaded")}),value:e.translate("General_Copy")},null,8,m)])])}var j=o("19dc"),f=Object(c["defineComponent"])({props:{codes:{type:Array,default:function(){return[]}}},directives:{SelectOnFocus:j["SelectOnFocus"]},emits:["downloaded"],methods:{copyRecoveryCodesToClipboard:function(){var e=document.createElement("textarea");e.value=this.codes.join("\n"),e.setAttribute("readonly",""),e.style.position="absolute",e.style.left="-9999px",document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e)},downloadRecoveryCodes:function(){j["Matomo"].helper.sendContentAsDownload("analytics_recovery_codes.txt",this.codes.join("\n"))},print:function(){window.print()}}});f.render=O;var h=f,y=Object(c["createElementVNode"])("br",null,null,-1),w=Object(c["createElementVNode"])("br",null,null,-1),g={key:0,class:"alert alert-success"},v={key:1,class:"alert alert-danger"},N=["action"],E=["value"],C=["value"];function S(e,t,o,n,r,a){var l=Object(c["resolveComponent"])("ShowRecoveryCodes"),i=Object(c["resolveComponent"])("ContentBlock");return Object(c["openBlock"])(),Object(c["createBlock"])(i,{"content-title":e.contentTitle},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(l,{codes:e.codes},null,8,["codes"]),Object(c["createElementVNode"])("h2",null,Object(c["toDisplayString"])(e.translate("TwoFactorAuth_GenerateNewRecoveryCodes")),1),Object(c["createElementVNode"])("p",null,[Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.translate("TwoFactorAuth_GenerateNewRecoveryCodesInfo")),1),y,w]),e.regenerateSuccess?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",g,Object(c["toDisplayString"])(e.translate("TwoFactorAuth_RecoveryCodesRegenerated")),1)):Object(c["createCommentVNode"])("",!0),e.regenerateError?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",v,Object(c["toDisplayString"])(e.translate("General_ExceptionSecurityCheckFailed")),1)):Object(c["createCommentVNode"])("",!0),Object(c["createElementVNode"])("form",{method:"post",action:e.showRecoveryCodesLink},[Object(c["createElementVNode"])("input",{type:"hidden",name:"regenerateNonce",value:e.regenerateNonce},null,8,E),Object(c["createElementVNode"])("input",{type:"submit",class:"btn",value:e.translate("TwoFactorAuth_GenerateNewRecoveryCodes")},null,8,C)],8,N)]})),_:1},8,["content-title"])}var T=Object(c["defineComponent"])({props:{codes:Array,regenerateSuccess:Boolean,regenerateError:Boolean,regenerateNonce:{type:String,required:!0}},components:{ContentBlock:j["ContentBlock"],ShowRecoveryCodes:h},computed:{contentTitle:function(){var e=Object(j["translate"])("TwoFactorAuth_TwoFactorAuthentication"),t=Object(j["translate"])("TwoFactorAuth_RecoveryCodes");return"".concat(e," - ").concat(t)},showRecoveryCodesLink:function(){return"?".concat(j["MatomoUrl"].stringify(Object.assign(Object.assign({},j["MatomoUrl"].urlParsed.value),{},{module:"TwoFactorAuth",action:"showRecoveryCodes"})))}}});T.render=S;var V=T,k={class:"setupTwoFactorAuthentication",ref:"root"},A={key:0,class:"alert alert-warning"},F=["disabled"],_=Object(c["createElementVNode"])("a",{name:"twoFactorStep2",id:"twoFactorStep2",style:{opacity:"0"}},null,-1),D=Object(c["createElementVNode"])("a",{target:"_blank",rel:"noreferrer noopener",href:"https://github.com/andOTP/andOTP#downloads"},"andOTP",-1),x=Object(c["createTextVNode"])(", "),B=Object(c["createElementVNode"])("a",{target:"_blank",rel:"noreferrer noopener",href:"https://authy.com/guides/github/"},"Authy",-1),L=Object(c["createTextVNode"])(", "),R=Object(c["createElementVNode"])("a",{target:"_blank",rel:"noreferrer noopener",href:"https://support.1password.com/one-time-passwords/"},"1Password",-1),M=Object(c["createTextVNode"])(", "),q=Object(c["createElementVNode"])("a",{target:"_blank",rel:"noreferrer noopener",href:"https://helpdesk.lastpass.com/multifactor-authentication-options/lastpass-authenticator/"},"LastPass Authenticator",-1),U=Object(c["createElementVNode"])("a",{target:"_blank",rel:"noreferrer noopener",href:"https://support.google.com/accounts/answer/1066447"},"Google Authenticator",-1),P=Object(c["createTextVNode"])(". "),G=["innerHTML"],H=Object(c["createElementVNode"])("span",{class:"icon-chevron-down"},null,-1),I=Object(c["createElementVNode"])("span",{class:"icon-chevron-up"},null,-1),$={id:"qrcode",ref:"qrcode",title:""},z=Object(c["createElementVNode"])("br",null,null,-1),Q=Object(c["createElementVNode"])("a",{name:"twoFactorStep3",id:"twoFactorStep3",style:{opacity:"0"}},null,-1),X={key:0,class:"message_container"},Y=Object(c["createTextVNode"])(": "),W=["innerHTML"],J=Object(c["createElementVNode"])("br",null,null,-1),K=["action"],Z=["value"],ee=["disabled","value"],te={id:"setupTwoFAsecretConfirm",class:"ui-confirm"},oe={style:{"text-align":"center"}},ne={style:{"font-size":"30px"}},re=["value"];function ce(e,t,o,n,r,a){var l=this,i=Object(c["resolveComponent"])("ShowRecoveryCodes"),s=Object(c["resolveComponent"])("Notification"),u=Object(c["resolveComponent"])("Field"),d=Object(c["resolveComponent"])("ContentBlock"),b=Object(c["resolveDirective"])("select-on-focus");return Object(c["openBlock"])(),Object(c["createBlock"])(d,{"content-title":e.standalone?e.translate("TwoFactorAuth_RequiredToSetUpTwoFactorAuthentication"):e.translate("TwoFactorAuth_SetUpTwoFactorAuthentication")},{default:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("div",k,[e.isAlreadyUsing2fa?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",A,Object(c["toDisplayString"])(e.translate("TwoFactorAuth_WarningChangingConfiguredDevice")),1)):Object(c["createCommentVNode"])("",!0),Object(c["createElementVNode"])("p",null,Object(c["toDisplayString"])(e.translate("TwoFactorAuth_SetupIntroFollowSteps")),1),Object(c["createElementVNode"])("h2",null,Object(c["toDisplayString"])(e.translate("TwoFactorAuth_StepX",1))+" - "+Object(c["toDisplayString"])(e.translate("TwoFactorAuth_RecoveryCodes")),1),Object(c["createVNode"])(i,{codes:e.codes,onDownloaded:t[0]||(t[0]=function(e){return l.hasDownloadedRecoveryCode=!0})},null,8,["codes"]),Object(c["withDirectives"])(Object(c["createElementVNode"])("div",{class:"alert alert-info backupRecoveryCodesAlert"},Object(c["toDisplayString"])(e.translate("TwoFactorAuth_SetupBackupRecoveryCodes")),513),[[c["vShow"],1===e.step]]),Object(c["createElementVNode"])("p",null,[Object(c["withDirectives"])(Object(c["createElementVNode"])("button",{class:"btn goToStep2",onClick:t[1]||(t[1]=function(t){return e.nextStep()}),disabled:!e.hasDownloadedRecoveryCode},Object(c["toDisplayString"])(e.translate("General_Next")),9,F),[[c["vShow"],1===e.step]])]),_,Object(c["withDirectives"])(Object(c["createElementVNode"])("div",null,[Object(c["createElementVNode"])("h2",null,Object(c["toDisplayString"])(e.translate("TwoFactorAuth_StepX",2))+" - "+Object(c["toDisplayString"])(e.translate("TwoFactorAuth_SetupAuthenticatorOnDevice")),1),Object(c["createElementVNode"])("p",null,[Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.translate("TwoFactorAuth_SetupAuthenticatorOnDeviceStep1"))+" ",1),D,x,B,L,R,M,q,Object(c["createTextVNode"])(", "+Object(c["toDisplayString"])(e.translate("General_Or"))+" ",1),U,P]),Object(c["createElementVNode"])("p",null,[Object(c["createElementVNode"])("span",{innerHTML:e.$sanitize(e.setupAuthenticatorOnDeviceStep2)},null,8,G)]),Object(c["createElementVNode"])("p",null,[e.showQrCode?Object(c["createCommentVNode"])("",!0):(Object(c["openBlock"])(),Object(c["createElementBlock"])("a",{key:0,class:"two-factor-show-2fa-qr-code",href:"javascript:;",onClick:t[2]||(t[2]=Object(c["withModifiers"])((function(t){return e.showQrCode=!0}),["prevent"]))},[Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.translate("TwoFactorAuth_ShowTwoFAQRCode"))+" ",1),H])),e.showQrCode?(Object(c["openBlock"])(),Object(c["createElementBlock"])("a",{key:1,class:"two-factor-hide-2fa-qr-code",href:"javascript:;",onClick:t[3]||(t[3]=Object(c["withModifiers"])((function(t){return e.showQrCode=!1}),["prevent"]))},[Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.translate("TwoFactorAuth_HideTwoFAQRCode"))+" ",1),I])):Object(c["createCommentVNode"])("",!0)]),Object(c["createElementVNode"])("p",null,[Object(c["withDirectives"])(Object(c["createElementVNode"])("span",$,null,512),[[c["vShow"],e.showQrCode]])]),Object(c["createElementVNode"])("p",null,[z,Object(c["withDirectives"])(Object(c["createElementVNode"])("button",{class:"btn goToStep3",onClick:t[4]||(t[4]=function(t){return e.nextStep()})},Object(c["toDisplayString"])(e.translate("General_Next")),513),[[c["vShow"],2===e.step]])])],512),[[c["vShow"],e.step>=2]]),Q,Object(c["withDirectives"])(Object(c["createElementVNode"])("div",null,[Object(c["createElementVNode"])("h2",null,Object(c["toDisplayString"])(e.translate("TwoFactorAuth_StepX",3))+" - "+Object(c["toDisplayString"])(e.translate("TwoFactorAuth_ConfirmSetup")),1),Object(c["createElementVNode"])("p",null,Object(c["toDisplayString"])(e.translate("TwoFactorAuth_VerifyAuthCodeIntro")),1),e.accessErrorString?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",X,[Object(c["createElementVNode"])("div",null,[Object(c["createVNode"])(s,{noclear:!0,context:"error"},{default:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("strong",null,Object(c["toDisplayString"])(e.translate("General_Error")),1),Y,Object(c["createElementVNode"])("span",{innerHTML:e.$sanitize(e.accessErrorString)},null,8,W),J]})),_:1})])])):Object(c["createCommentVNode"])("",!0),Object(c["createElementVNode"])("form",{method:"post",class:"setupConfirmAuthCodeForm",autocorrect:"off",autocapitalize:"none",autocomplete:"off",action:e.linkTo({module:"TwoFactorAuth",action:e.submitAction})},[Object(c["createElementVNode"])("div",null,[Object(c["createVNode"])(u,{uicontrol:"text",name:"authCode",title:e.translate("TwoFactorAuth_AuthenticationCode"),modelValue:e.authCode,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.authCode=t}),maxlength:6,placeholder:"123456","inline-help":e.translate("TwoFactorAuth_VerifyAuthCodeHelp")},null,8,["title","modelValue","inline-help"])]),Object(c["createElementVNode"])("input",{type:"hidden",name:"authCodeNonce",value:e.authCodeNonce},null,8,Z),Object(c["createElementVNode"])("input",{type:"submit",class:"btn confirmAuthCode",disabled:6!==e.authCode.length,value:e.translate("General_Confirm")},null,8,ee)],8,K)],512),[[c["vShow"],e.step>=3]]),Object(c["createElementVNode"])("div",te,[Object(c["createElementVNode"])("h2",null,Object(c["toDisplayString"])(e.translate("TwoFactorAuth_Your2FaAuthSecret")),1),Object(c["createElementVNode"])("p",oe,[Object(c["withDirectives"])(Object(c["createElementVNode"])("code",ne,[Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.newSecret),1)],512),[[b,{}]])]),Object(c["createElementVNode"])("input",{role:"ok",type:"button",value:e.translate("General_Ok")},null,8,re)])],512)]})),_:1},8,["content-title"])}var ae=o("a5a2"),le=window,ie=le.QRCode,se=le.$,ue=Object(c["defineComponent"])({props:{isAlreadyUsing2fa:Boolean,accessErrorString:String,submitAction:{type:String,required:!0},authCodeNonce:{type:String,required:!0},newSecret:{type:String,required:!0},codes:Array,twoFaBarCodeSetupUrl:{type:String,required:!0},standalone:Boolean},components:{ShowRecoveryCodes:h,Notification:j["Notification"],Field:ae["Field"],ContentBlock:j["ContentBlock"]},directives:{SelectOnFocus:j["SelectOnFocus"]},data:function(){return{step:1,hasDownloadedRecoveryCode:!1,authCode:"",showQrCode:!1}},mounted:function(){var e=this;setTimeout((function(){var t=e.$refs.qrcode;new ie(t,{text:e.twoFaBarCodeSetupUrl}),se(t).attr("title",""),e.accessErrorString&&(e.step=3,e.scrollToEnd()),se(e.$refs.root).on("click",".setupStep2Link",(function(e){e.preventDefault(),j["Matomo"].helper.modalConfirm("#setupTwoFAsecretConfirm")}))}))},methods:{scrollToEnd:function(){var e=this;setTimeout((function(){var t="";2===e.step?t="#twoFactorStep2":3===e.step&&(t="#twoFactorStep3"),t&&j["Matomo"].helper.lazyScrollTo(t,50,!0)}),50)},nextStep:function(){this.step+=1,this.scrollToEnd()},linkTo:function(e){return"?".concat(j["MatomoUrl"].stringify(Object.assign(Object.assign({},j["MatomoUrl"].urlParsed.value),e)))}},computed:{setupAuthenticatorOnDeviceStep2:function(){return Object(j["translate"])("TwoFactorAuth_SetupAuthenticatorOnDeviceStep2",'<a class="setupStep2Link">',"</a>")}}});
/*!
 * Matomo - free/libre analytics platform
 *
 * @link    https://matomo.org
 * @license https://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */ue.render=ce;var de=ue,be={class:"message_container"},pe=Object(c["createTextVNode"])(": "),me=["innerHTML"],Oe=Object(c["createElementVNode"])("br",null,null,-1),je={class:"row"},fe={class:"col s12 input-field"},he=["value"],ye=Object(c["createElementVNode"])("input",{type:"text",name:"form_authcode",placeholder:"",id:"login_form_authcode",class:"input",value:"",size:"20",autocorrect:"off",autocapitalize:"none",autocomplete:"off",tabindex:"10",autofocus:"autofocus"},null,-1),we={for:"login_form_authcode"},ge=Object(c["createElementVNode"])("i",{class:"icon-user icon"},null,-1),ve={class:"row actions"},Ne={class:"col s12"},Ee=["value"],Ce=["innerHTML"],Se=Object(c["createElementVNode"])("br",null,null,-1),Te=Object(c["createElementVNode"])("br",null,null,-1),Ve=Object(c["createElementVNode"])("br",null,null,-1),ke=["href"],Ae=Object(c["createElementVNode"])("br",null,null,-1),Fe=["href"],_e=Object(c["createElementVNode"])("br",null,null,-1),De=["href"];function xe(e,t,o,n,r,a){var l=Object(c["resolveComponent"])("FormErrors"),i=Object(c["resolveComponent"])("Notification"),s=Object(c["resolveComponent"])("ContentBlock");return Object(c["openBlock"])(),Object(c["createBlock"])(s,{"content-title":e.translate("TwoFactorAuth_TwoFactorAuthentication")},{default:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("div",be,[Object(c["createVNode"])(l,{"form-errors":e.formData.errors},null,8,["form-errors"]),e.accessErrorString?(Object(c["openBlock"])(),Object(c["createBlock"])(i,{key:0,noclear:!0,context:"error"},{default:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("strong",null,Object(c["toDisplayString"])(e.translate("General_Error")),1),pe,Object(c["createElementVNode"])("span",{innerHTML:e.$sanitize(e.accessErrorString)},null,8,me),Oe]})),_:1})):Object(c["createCommentVNode"])("",!0)]),Object(c["createElementVNode"])("form",Object(c["mergeProps"])(e.formDataAttributes,{class:"loginTwoFaForm"}),[Object(c["createElementVNode"])("div",je,[Object(c["createElementVNode"])("div",fe,[Object(c["createElementVNode"])("input",{type:"hidden",name:"form_nonce",id:"login_form_nonce",value:e.formNonce},null,8,he),ye,Object(c["createElementVNode"])("label",we,[ge,Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(e.translate("TwoFactorAuth_AuthenticationCode")),1)])])]),Object(c["createElementVNode"])("div",ve,[Object(c["createElementVNode"])("div",Ne,[Object(c["createElementVNode"])("input",{class:"submit btn",id:"login_form_submit",type:"submit",value:e.translate("TwoFactorAuth_Verify"),tabindex:"100"},null,8,Ee)])])],16),Object(c["createElementVNode"])("p",null,[Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.translate("TwoFactorAuth_VerifyIdentifyExplanation"))+" ",1),Object(c["createElementVNode"])("span",{innerHTML:e.$sanitize(e.learnMoreText)},null,8,Ce),Se,Te,Object(c["createElementVNode"])("strong",null,Object(c["toDisplayString"])(e.translate("TwoFactorAuth_DontHaveYourMobileDevice")),1),Ve,Object(c["createElementVNode"])("a",{href:e.externalRawLink("https://matomo.org/faq/how-to/faq_27248"),rel:"noreferrer noopener",target:"_blank"},Object(c["toDisplayString"])(e.translate("TwoFactorAuth_EnterRecoveryCodeInstead")),9,ke),Ae,Object(c["createElementVNode"])("a",{href:e.mailToLink,rel:"noreferrer noopener"},Object(c["toDisplayString"])(e.translate("TwoFactorAuth_AskSuperUserResetAuthenticationCode")),9,Fe),_e,Object(c["createElementVNode"])("a",{href:e.logoutLink,rel:"noreferrer noopener"},Object(c["toDisplayString"])(e.translate("General_Logout")),9,De)])]})),_:1},8,["content-title"])}var Be=o("5b81");function Le(e,t){return Pe(e)||Ue(e,t)||Me(e,t)||Re()}function Re(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Me(e,t){if(e){if("string"===typeof e)return qe(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?qe(e,t):void 0}}function qe(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=new Array(t);o<t;o++)n[o]=e[o];return n}function Ue(e,t){var o=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var n,r,c=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(n=o.next()).done);a=!0)if(c.push(n.value),t&&c.length===t)break}catch(i){l=!0,r=i}finally{try{a||null==o["return"]||o["return"]()}finally{if(l)throw r}}return c}}function Pe(e){if(Array.isArray(e))return e}var Ge=Object(c["defineComponent"])({props:{formData:{type:Object,required:!0},accessErrorString:String,formNonce:{type:String,required:!0},loginModule:{type:String,required:!0},piwikUrl:String,userLogin:{type:String,required:!0},contactEmail:{type:String,required:!0}},components:{ContentBlock:j["ContentBlock"],Notification:j["Notification"],FormErrors:Be["FormErrors"]},computed:{learnMoreText:function(){return Object(j["translate"])("General_LearnMore",Object(j["externalLink"])("https://matomo.org/faq/general/faq_27245"),"</a>")},mailToLink:function(){return"mailto:".concat(this.contactEmail,"?").concat(j["MatomoUrl"].stringify({subject:Object(j["translate"])("TwoFactorAuth_NotPossibleToLogIn"),body:Object(j["translate"])("TwoFactorAuth_LostAuthenticationDevice","\n\n","\n\n",this.piwikUrl||"","\n\n",this.userLogin,Object(j["externalRawLink"])("https://matomo.org/faq/how-to/faq_27248"))}))},logoutLink:function(){return"?".concat(j["MatomoUrl"].stringify({module:this.loginModule,action:"logout"}))},formDataAttributes:function(){return Object.fromEntries(this.formData.attributes.split(/\s+/g).filter((function(e){return e})).map((function(e){return e.split("=")})).map((function(e){var t=Le(e,2),o=t[0],n=t[1];return[o,j["Matomo"].helper.htmlDecode(n.substr(1,n.length-2))]})))}}});Ge.render=xe;var He=Ge,Ie={class:"successMessage"},$e=Object(c["createElementVNode"])("br",null,null,-1),ze=["href"];function Qe(e,t,o,n,r,a){var l=Object(c["resolveComponent"])("ContentBlock");return Object(c["openBlock"])(),Object(c["createBlock"])(l,{class:"twoFactorSetupFinished"},{default:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("h2",Ie,Object(c["toDisplayString"])(e.translate("TwoFactorAuth_SetupFinishedTitle")),1),Object(c["createElementVNode"])("h3",null,Object(c["toDisplayString"])(e.translate("TwoFactorAuth_SetupFinishedSubtitle")),1),Object(c["createElementVNode"])("p",null,[$e,Object(c["createElementVNode"])("a",{class:"btn",href:e.userSecurityLink},Object(c["toDisplayString"])(e.translate("General_Continue")),9,ze)])]})),_:1})}var Xe=Object(c["defineComponent"])({components:{ContentBlock:j["ContentBlock"]},computed:{userSecurityLink:function(){return"?".concat(j["MatomoUrl"].stringify(Object.assign(Object.assign({},j["MatomoUrl"].urlParsed.value),{},{module:"UsersManager",action:"userSecurity"})))}}});Xe.render=Qe;var Ye=Xe,We=["innerHTML"],Je={key:0},Ke={class:"twoFaStatusEnabled"},Ze={key:1},et={key:0},tt=Object(c["createElementVNode"])("br",null,null,-1),ot=Object(c["createElementVNode"])("br",null,null,-1),nt=["href"],rt={key:1},ct=["href"],at=["href"],lt=["value"],it=["href"],st={key:2},ut=Object(c["createElementVNode"])("br",null,null,-1),dt=Object(c["createElementVNode"])("br",null,null,-1),bt=["href"],pt={id:"confirmDisable2FA",class:"ui-confirm",ref:"confirmDisable2FA"},mt=["value"],Ot=["value"];function jt(e,t,o,n,r,a){var l=Object(c["resolveComponent"])("ContentBlock");return Object(c["openBlock"])(),Object(c["createBlock"])(l,{"content-title":e.contentTitle,class:"userSettings2FA"},{default:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("p",{innerHTML:e.$sanitize(e.twoFactorAuthIntro)},null,8,We),e.isEnabled?(Object(c["openBlock"])(),Object(c["createElementBlock"])("p",Je,[Object(c["createElementVNode"])("strong",Ke,Object(c["toDisplayString"])(e.translate("TwoFactorAuth_TwoFactorAuthenticationIsEnabled")),1)])):Object(c["createCommentVNode"])("",!0),e.isEnabled?(Object(c["openBlock"])(),Object(c["createElementBlock"])("p",Ze,[e.isForced?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",et,[Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.translate("TwoFactorAuth_TwoFactorAuthenticationRequired"))+" ",1),tt,ot,Object(c["createElementVNode"])("a",{class:"btn btn-link enable2FaLink",href:e.setupTwoFactorAuthLink,style:{"margin-right":"3.5px"}},Object(c["toDisplayString"])(e.translate("TwoFactorAuth_ConfigureDifferentDevice")),9,nt)])):(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",rt,[Object(c["createElementVNode"])("a",{class:"btn btn-link enable2FaLink",href:e.setupTwoFactorAuthLink,style:{"margin-right":"3.5px"}},Object(c["toDisplayString"])(e.translate("TwoFactorAuth_ConfigureDifferentDevice")),9,ct),Object(c["createElementVNode"])("a",{href:e.disableTwoFactorAuthLink,style:{display:"none"},id:"disable2fa"},"disable2fa",8,at),Object(c["createElementVNode"])("input",{type:"button",class:"btn btn-link disable2FaLink",onClick:t[0]||(t[0]=function(t){return e.onDisable2FaLinkClick()}),value:e.translate("TwoFactorAuth_DisableTwoFA"),style:{"margin-right":"3.5px"}},null,8,lt)])),Object(c["createElementVNode"])("a",{class:"btn btn-link showRecoveryCodesLink",href:e.showRecoveryCodesLink},Object(c["toDisplayString"])(e.translate("TwoFactorAuth_ShowRecoveryCodes")),9,it)])):(Object(c["openBlock"])(),Object(c["createElementBlock"])("p",st,[Object(c["createElementVNode"])("strong",null,Object(c["toDisplayString"])(e.translate("TwoFactorAuth_TwoFactorAuthenticationIsDisabled")),1),ut,dt,Object(c["createElementVNode"])("a",{class:"btn btn-link enable2FaLink",href:e.setupTwoFactorAuthLink},Object(c["toDisplayString"])(e.translate("TwoFactorAuth_EnableTwoFA")),9,bt)])),Object(c["createElementVNode"])("div",pt,[Object(c["createElementVNode"])("h2",null,Object(c["toDisplayString"])(e.translate("TwoFactorAuth_ConfirmDisableTwoFA")),1),Object(c["createElementVNode"])("input",{role:"yes",type:"button",value:e.translate("General_Yes")},null,8,mt),Object(c["createElementVNode"])("input",{role:"no",type:"button",value:e.translate("General_No")},null,8,Ot)],512)]})),_:1},8,["content-title"])}var ft=Object(c["defineComponent"])({props:{isEnabled:Boolean,isForced:Boolean,disableNonce:{type:String,required:!0}},components:{ContentBlock:j["ContentBlock"]},computed:{contentTitle:function(){var e=Object(j["translate"])("TwoFactorAuth_TwoFactorAuthentication"),t=Object(j["translate"])("TwoFactorAuth_TwoFAShort");return"".concat(e," (").concat(t,")")},twoFactorAuthIntro:function(){return Object(j["translate"])("TwoFactorAuth_TwoFactorAuthenticationIntro",Object(j["externalLink"])("https://matomo.org/faq/general/faq_27245"),"</a>")},setupTwoFactorAuthLink:function(){return"?".concat(j["MatomoUrl"].stringify(Object.assign(Object.assign({},j["MatomoUrl"].urlParsed.value),{},{module:"TwoFactorAuth",action:"setupTwoFactorAuth"})))},disableTwoFactorAuthLink:function(){return"?".concat(j["MatomoUrl"].stringify(Object.assign(Object.assign({},j["MatomoUrl"].urlParsed.value),{},{module:"TwoFactorAuth",action:"disableTwoFactorAuth",disableNonce:this.disableNonce})))},showRecoveryCodesLink:function(){return"?".concat(j["MatomoUrl"].stringify(Object.assign(Object.assign({},j["MatomoUrl"].urlParsed.value),{},{module:"TwoFactorAuth",action:"showRecoveryCodes"})))}},methods:{onDisable2FaLinkClick:function(){var e=this.disableNonce;j["Matomo"].helper.modalConfirm(this.$refs.confirmDisable2FA,{yes:function(){j["MatomoUrl"].updateUrl({module:"TwoFactorAuth",action:"disableTwoFactorAuth",disableNonce:e})}})}}});ft.render=jt;var ht=ft;
/*!
 * Matomo - free/libre analytics platform
 *
 * @link    https://matomo.org
 * @license https://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */}})}));
//# sourceMappingURL=TwoFactorAuth.umd.min.js.map