(function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t(require("CoreHome"),require("vue"),require("CorePluginsAdmin")):"function"===typeof define&&define.amd?define(["CoreHome",,"CorePluginsAdmin"],t):"object"===typeof exports?exports["SitesManager"]=t(require("CoreHome"),require("vue"),require("CorePluginsAdmin")):e["SitesManager"]=t(e["CoreHome"],e["Vue"],e["CorePluginsAdmin"])})("undefined"!==typeof self?self:this,(function(e,t,n){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="plugins/SitesManager/vue/dist/",n(n.s="fae3")}({"19dc":function(t,n){t.exports=e},"8bbf":function(e,n){e.exports=t},a5a2:function(e,t){e.exports=n},fae3:function(e,t,n){"use strict";if(n.r(t),n.d(t,"SiteTypesStore",(function(){return h})),n.d(t,"SiteFields",(function(){return Ie})),"undefined"!==typeof window){var r=window.document.currentScript,i=r&&r.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);i&&(n.p=i[1])}var a=n("8bbf"),o=n("19dc");function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}
/*!
 * Matomo - free/libre analytics platform
 *
 * @link https://matomo.org
 * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */var p=window,m=p.$,f=function(){function e(){var t=this;s(this,e),b(this,"state",Object(a["reactive"])({typesById:{}})),b(this,"typesById",Object(a["computed"])((function(){return Object(a["readonly"])(t.state).typesById}))),b(this,"response",void 0),this.fetchAvailableTypes()}return d(e,[{key:"fetchAvailableTypes",value:function(){var e=this;return this.response?Promise.resolve(this.response):(this.response=o["AjaxHelper"].fetch({method:"API.getAvailableMeasurableTypes",filter_limit:"-1"}).then((function(t){return t.forEach((function(t){e.state.typesById[t.id]=t})),e.typesById.value})),this.response)}},{key:"getEditSiteIdParameter",value:function(){var e=o["MatomoUrl"].hashParsed.value.editsiteid;if(e&&m.isNumeric(e))return e}},{key:"removeEditSiteIdParameterFromHash",value:function(){var e=c({},o["MatomoUrl"].hashParsed.value);delete e.editsiteid,o["MatomoUrl"].updateHash(e)}}]),e}(),h=Object(o["lazyInitSingleton"])(f);
/*!
 * Matomo - free/libre analytics platform
 *
 * @link https://matomo.org
 * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */
function O(){return{get typesById(){return h.typesById.value},fetchTypeById:function(e){return h.fetchAvailableTypes().then((function(t){return t[e]}))},fetchAvailableTypes:function(){return h.fetchAvailableTypes()},hasMultipleTypes:function(){return h.fetchAvailableTypes().then((function(e){return e&&Object.keys(e).length>1}))},removeEditSiteIdParameterFromHash:h.removeEditSiteIdParameterFromHash.bind(h),getEditSiteIdParameter:h.getEditSiteIdParameter.bind(h)}}window.angular.module("piwikApp.service").factory("sitesManagerTypeModel",O);var j=["idsite","type"],y={class:"card-content"},g={key:0,class:"row"},S={class:"col m3"},v={class:"title"},E={class:"title"},V=["target","title","href"],N={class:"col m4"},w={class:"title"},T={class:"title"},D={class:"title"},P={class:"title"},M={class:"col m4"},_={class:"title"},k=Object(a["createTextVNode"])(": "),x=["href"],A={class:"title"},C={class:"title"},I={key:0},B={class:"title"},U={class:"col m1 text-right"},z=["title"],H=Object(a["createElementVNode"])("span",{class:"icon-edit"},null,-1),F=[H],G=["title"],q=Object(a["createElementVNode"])("span",{class:"icon-delete"},null,-1),L=[q],$={key:1},J={class:"form-group row"},Y={class:"col s12 m6 input-field"},R=["placeholder"],W=Object(a["createElementVNode"])("div",{class:"col s12 m6"},null,-1),K={id:"timezoneHelpText",class:"inline-help-node"},Q={key:0},X=Object(a["createElementVNode"])("br",null,null,-1),Z=Object(a["createElementVNode"])("br",null,null,-1),ee={class:"editingSiteFooter"},te=["value"],ne=["value"],re=["value"];function ie(e,t,n,r,i,o){var l=this,c=Object(a["resolveComponent"])("ActivityIndicator"),s=Object(a["resolveComponent"])("PluginSetting"),u=Object(a["resolveComponent"])("Field"),d=Object(a["resolveComponent"])("MatomoDialog");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",{class:Object(a["normalizeClass"])(["site card hoverable",{editingSite:!!e.editMode}]),idsite:e.theSite.idsite,type:e.theSite.type},[Object(a["createElementVNode"])("div",y,[e.editMode?Object(a["createCommentVNode"])("",!0):(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",g,[Object(a["createElementVNode"])("div",S,[Object(a["createElementVNode"])("h4",null,Object(a["toDisplayString"])(e.theSite.name),1),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,[Object(a["createElementVNode"])("span",v,Object(a["toDisplayString"])(e.translate("General_Id"))+":",1),Object(a["createTextVNode"])(" "+Object(a["toDisplayString"])(e.theSite.idsite),1)]),Object(a["withDirectives"])(Object(a["createElementVNode"])("li",null,[Object(a["createElementVNode"])("span",E,Object(a["toDisplayString"])(e.translate("SitesManager_Type"))+":",1),Object(a["createTextVNode"])(" "+Object(a["toDisplayString"])(e.currentType.name),1)],512),[[a["vShow"],e.availableTypes.length>1]]),Object(a["withDirectives"])(Object(a["createElementVNode"])("li",null,[Object(a["createElementVNode"])("a",{target:e.isInternalSetupUrl?"_self":"_blank",title:e.translate("SitesManager_ShowTrackingTag"),href:e.setupUrl},Object(a["toDisplayString"])(e.translate("SitesManager_ShowTrackingTag")),9,V)],512),[[a["vShow"],e.theSite.idsite&&e.howToSetupUrl]])])]),Object(a["createElementVNode"])("div",N,[Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,[Object(a["createElementVNode"])("span",w,Object(a["toDisplayString"])(e.translate("SitesManager_Timezone"))+":",1),Object(a["createTextVNode"])(" "+Object(a["toDisplayString"])(e.theSite.timezone_name),1)]),Object(a["createElementVNode"])("li",null,[Object(a["createElementVNode"])("span",T,Object(a["toDisplayString"])(e.translate("SitesManager_Currency"))+":",1),Object(a["createTextVNode"])(" "+Object(a["toDisplayString"])(e.theSite.currency_name),1)]),Object(a["withDirectives"])(Object(a["createElementVNode"])("li",null,[Object(a["createElementVNode"])("span",D,Object(a["toDisplayString"])(e.translate("Goals_Ecommerce"))+":",1),Object(a["createTextVNode"])(" "+Object(a["toDisplayString"])(e.translate("General_Yes")),1)],512),[[a["vShow"],1===e.theSite.ecommerce]]),Object(a["withDirectives"])(Object(a["createElementVNode"])("li",null,[Object(a["createElementVNode"])("span",P,Object(a["toDisplayString"])(e.translate("Actions_SubmenuSitesearch"))+":",1),Object(a["createTextVNode"])(" "+Object(a["toDisplayString"])(e.translate("General_Yes")),1)],512),[[a["vShow"],1==e.theSite.sitesearch]])])]),Object(a["createElementVNode"])("div",M,[Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,[Object(a["createElementVNode"])("span",_,Object(a["toDisplayString"])(e.translate("SitesManager_Urls")),1),k,(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(e.theSite.alias_urls,(function(t,n){return Object(a["openBlock"])(),Object(a["createElementBlock"])("span",{key:t},[Object(a["createElementVNode"])("a",{target:"_blank",rel:"noreferrer noopener",href:t},Object(a["toDisplayString"])(t)+Object(a["toDisplayString"])(n===e.theSite.alias_urls.length-1?"":", "),9,x)])})),128))]),Object(a["withDirectives"])(Object(a["createElementVNode"])("li",null,[Object(a["createElementVNode"])("span",A,Object(a["toDisplayString"])(e.translate("SitesManager_ExcludedIps"))+":",1),Object(a["createTextVNode"])(" "+Object(a["toDisplayString"])(e.theSite.excluded_ips.join(", ")),1)],512),[[a["vShow"],e.theSite.excluded_ips.length]]),Object(a["withDirectives"])(Object(a["createElementVNode"])("li",null,[Object(a["createElementVNode"])("span",C,Object(a["toDisplayString"])(e.translate("SitesManager_ExcludedParameters"))+":",1),Object(a["createTextVNode"])(" "+Object(a["toDisplayString"])(e.theSite.excluded_parameters.join(", ")),1)],512),[[a["vShow"],e.theSite.excluded_parameters.length]]),e.theSite.excluded_user_agents.length?(Object(a["openBlock"])(),Object(a["createElementBlock"])("li",I,[Object(a["createElementVNode"])("span",B,Object(a["toDisplayString"])(e.translate("SitesManager_ExcludedUserAgents"))+":",1),Object(a["createTextVNode"])(" "+Object(a["toDisplayString"])(e.theSite.excluded_user_agents.join(", ")),1)])):Object(a["createCommentVNode"])("",!0)])]),Object(a["createElementVNode"])("div",U,[Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,[Object(a["createElementVNode"])("button",{class:"table-action",onClick:t[0]||(t[0]=function(t){return e.editSite()}),title:e.translate("General_Edit")},F,8,z)]),Object(a["createElementVNode"])("li",null,[Object(a["withDirectives"])(Object(a["createElementVNode"])("button",{class:"table-action",onClick:t[1]||(t[1]=function(e){return l.showRemoveDialog=!0}),title:e.translate("General_Delete")},L,8,G),[[a["vShow"],e.theSite.idsite]])])])])])),e.editMode?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",$,[Object(a["createElementVNode"])("div",J,[Object(a["createElementVNode"])("div",Y,[Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=function(t){return e.theSite.name=t}),maxlength:"90",placeholder:e.translate("General_Name")},null,8,R),[[a["vModelText"],e.theSite.name]]),Object(a["createElementVNode"])("label",null,Object(a["toDisplayString"])(e.translate("General_Name")),1)]),W]),Object(a["createVNode"])(c,{loading:e.isLoading},null,8,["loading"]),(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(e.measurableSettings,(function(t){return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",{key:t.plugin},[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(t.settings,(function(n){return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",{key:"".concat(e.settings.pluginName,".").concat(n.name)},[Object(a["createVNode"])(s,{modelValue:e.settingValues["".concat(e.settings.pluginName,".").concat(n.name)],"onUpdate:modelValue":function(t){return e.settingValues["".concat(e.settings.pluginName,".").concat(n.name)]=t},"plugin-name":t.pluginName,setting:n,"setting-values":e.settingValues},null,8,["modelValue","onUpdate:modelValue","plugin-name","setting","setting-values"])])})),128))])})),128)),Object(a["createVNode"])(u,{uicontrol:"select",name:"currency",modelValue:e.theSite.currency,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.theSite.currency=t}),title:e.translate("SitesManager_Currency"),"inline-help":e.translate("SitesManager_CurrencySymbolWillBeUsedForGoals"),options:e.currencies},null,8,["modelValue","title","inline-help","options"]),Object(a["createVNode"])(u,{uicontrol:"select",name:"timezone",modelValue:e.theSite.timezone,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.theSite.timezone=t}),title:e.translate("SitesManager_Timezone"),"inline-help":"#timezoneHelpText",options:e.timezones},null,8,["modelValue","title","options"]),Object(a["createElementVNode"])("div",K,[Object(a["createElementVNode"])("div",null,[e.timezoneSupportEnabled?Object(a["createCommentVNode"])("",!0):(Object(a["openBlock"])(),Object(a["createElementBlock"])("span",Q,[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.translate("SitesManager_AdvancedTimezoneSupportNotFound"))+" ",1),X])),Object(a["createTextVNode"])(" "+Object(a["toDisplayString"])(e.utcTimeIs)+" ",1),Z,Object(a["createTextVNode"])(" "+Object(a["toDisplayString"])(e.translate("SitesManager_ChangingYourTimezoneWillOnlyAffectDataForward")),1)])]),Object(a["createElementVNode"])("div",ee,[Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{type:"submit",class:"btn",value:e.translate("General_Save"),onClick:t[5]||(t[5]=function(t){return e.saveSite()})},null,8,te),[[a["vShow"],!e.isLoading]]),Object(a["createElementVNode"])("button",{class:"btn btn-link",onClick:t[6]||(t[6]=function(t){return e.cancelEditSite(e.site)})},Object(a["toDisplayString"])(e.translate("General_Cancel","","")),1)])])):Object(a["createCommentVNode"])("",!0)]),Object(a["createVNode"])(d,{class:"ui-confirm",modelValue:e.showRemoveDialog,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.showRemoveDialog=t}),onYes:t[8]||(t[8]=function(t){return e.deleteSite()})},{default:Object(a["withCtx"])((function(){return[Object(a["createElementVNode"])("h2",null,Object(a["toDisplayString"])(e.removeDialogTitle),1),Object(a["createElementVNode"])("p",null,Object(a["toDisplayString"])(e.translate("SitesManager_DeleteSiteExplanation")),1),Object(a["createElementVNode"])("input",{type:"button",value:e.translate("General_Yes"),role:"yes"},null,8,ne),Object(a["createElementVNode"])("input",{type:"button",value:e.translate("General_No"),role:"no"},null,8,re)]})),_:1},8,["modelValue"])],10,j)}var ae=n("a5a2");function oe(e,t){return de(e)||ue(e,t)||ce(e,t)||le()}function le(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ce(e,t){if(e){if("string"===typeof e)return se(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?se(e,t):void 0}}function se(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ue(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done);o=!0)if(a.push(r.value),t&&a.length===t)break}catch(c){l=!0,i=c}finally{try{o||null==n["return"]||n["return"]()}finally{if(l)throw i}}return a}}function de(e){if(Array.isArray(e))return e}function be(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function me(e,t,n){return t&&pe(e.prototype,t),n&&pe(e,n),e}function fe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}
/*!
 * Matomo - free/libre analytics platform
 *
 * @link https://matomo.org
 * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */var he=function(){function e(){var t=this;be(this,e),fe(this,"privateState",Object(a["reactive"])({timezones:[]})),fe(this,"timezones",Object(a["computed"])((function(){return Object(a["readonly"])(t.privateState).timezones}))),this.fetchTimezones()}return me(e,[{key:"fetchTimezones",value:function(){var e=this;o["AjaxHelper"].fetch({method:"SitesManager.getTimezonesList"}).then((function(t){var n=[];Object.entries(t).forEach((function(e){var t=oe(e,2),r=t[0],i=t[1];Object.entries(i).forEach((function(e){var t=oe(e,2),i=t[0],a=t[1];n.push({group:r,label:i,code:a})}))})),e.privateState.timezones=n}))}}]),e}(),Oe=Object(o["lazyInitSingleton"])(he);function je(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ye(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ge(e,t,n){return t&&ye(e.prototype,t),n&&ye(e,n),e}function Se(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}
/*!
 * Matomo - free/libre analytics platform
 *
 * @link https://matomo.org
 * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */var ve=function(){function e(){var t=this;je(this,e),Se(this,"privateState",Object(a["reactive"])({currencies:{}})),Se(this,"currencies",Object(a["computed"])((function(){return Object(a["readonly"])(t.privateState).currencies}))),this.fetchCurrencies()}return ge(e,[{key:"fetchCurrencies",value:function(){var e=this;o["AjaxHelper"].fetch({method:"SitesManager.getCurrencyList"}).then((function(t){e.privateState.currencies=t}))}}]),e}(),Ee=Object(o["lazyInitSingleton"])(ve);function Ve(e,t){return Pe(e)||De(e,t)||we(e,t)||Ne()}function Ne(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function we(e,t){if(e){if("string"===typeof e)return Te(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Te(e,t):void 0}}function Te(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function De(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done);o=!0)if(a.push(r.value),t&&a.length===t)break}catch(c){l=!0,i=c}finally{try{o||null==n["return"]||n["return"]()}finally{if(l)throw i}}return a}}function Pe(e){if(Array.isArray(e))return e}function Me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Me(Object(n),!0).forEach((function(t){ke(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Me(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ke(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var xe=Object(a["computed"])((function(){return Oe.timezones.value.map((function(e){var t=e.group,n=e.label,r=e.code;return{group:t,key:n,value:r}}))}));function Ae(e){return"undefined"===typeof e.idsite}var Ce=Object(a["defineComponent"])({props:{site:{type:Object,required:!0},timezoneSupportEnabled:{type:Boolean,required:!0},utcTime:{type:Date,required:!0},globalSettings:{type:Object,required:!0}},data:function(){return{isLoading:!1,editMode:!1,theSite:_e({},this.site),measurableSettings:[],settingValues:{},showRemoveDialog:!1}},components:{MatomoDialog:o["MatomoDialog"],Field:ae["Field"],PluginSetting:ae["PluginSetting"],ActivityIndicator:o["ActivityIndicator"]},emits:["delete","cancelEditSite","save"],created:function(){this.onSiteChanged()},watch:{site:function(){this.onSiteChanged()},measurableSettings:function(e){if(e.length){var t={};e.forEach((function(e){e.settings.forEach((function(n){t["".concat(e.pluginName,".").concat(n.name)]=n.value}))})),this.settingValues=t}}},methods:{onSiteChanged:function(){var e=this,t=this.site,n=Ae(t);if(n){var r=this.globalSettings;this.theSite.timezone=r.defaultTimezone,this.theSite.currency=r.defaultCurrency}var i=h.getEditSiteIdParameter();(n||i&&"".concat(t.idsite)===i)&&h.fetchAvailableTypes().then((function(){e.editSite()}))},editSite:function(){var e=this;if(this.editMode=!0,this.measurableSettings=[],Ae(this.theSite)){if(!this.currentType)return;this.measurableSettings=this.currentType.settings||[]}else this.isLoading=!0,o["AjaxHelper"].fetch({method:"SitesManager.getSiteSettings",idSite:this.theSite.idsite}).then((function(t){e.measurableSettings=t})).finally((function(){e.isLoading=!1}))},saveSite:function(){var e=this,t={siteName:this.theSite.name,timezone:this.theSite.timezone,currency:this.theSite.currency,type:this.theSite.type,settingValues:{}},n=Ae(this.theSite),r="SitesManager.addSite";n||(r="SitesManager.updateSite",t.idSite=this.theSite.idsite),Object.entries(this.settingValues).forEach((function(e){var n=Ve(e,2),r=n[0],i=n[1],a=r.split("."),o=Ve(a,2),l=o[0],c=o[1],s=t.settingValues;s[l]||(s[l]=[]);var u=i;!1===i?u="0":!0===i?u="1":Array.isArray(i)&&(u=i.filter((function(e){return!!e}))),s[l].push({name:c,value:u})})),o["AjaxHelper"].post({method:r},t).then((function(t){e.editMode=!1,!e.theSite.idsite&&t&&t.value&&(e.theSite.idsite=t.value);var r=o["NotificationsStore"].show({message:n?Object(o["translate"])("SitesManager_WebsiteCreated"):Object(o["translate"])("SitesManager_WebsiteUpdated"),context:"success",id:"websitecreated",type:"transient"});o["NotificationsStore"].scrollToNotification(r),h.removeEditSiteIdParameterFromHash(),e.$emit("save",e.theSite)}))},cancelEditSite:function(e){this.editMode=!1,h.removeEditSiteIdParameterFromHash(),this.$emit("cancelEditSite",e)},deleteSite:function(){var e=this;o["AjaxHelper"].fetch({idSite:this.theSite.idsite,module:"API",format:"json",method:"SitesManager.deleteSite"}).then((function(){e.$emit("delete",e.theSite)}))}},computed:{availableTypes:function(){return h.typesById.value},setupUrl:function(){var e=this.theSite,t="";return this.isInternalSetupUrl&&(t=o["MatomoUrl"].stringify({idSite:e.idsite,period:o["MatomoUrl"].parsed.value.period,date:o["MatomoUrl"].parsed.value.date,updated:"false"})),"".concat(this.howToSetupUrl).concat(t)},utcTimeIs:function(){var e=Object(o["format"])(this.utcTime,"yy-mm-dd hh:mm:ss");return Object(o["translate"])("SitesManager_UTCTimeIs",e)},timezones:function(){return xe.value},currencies:function(){return Ee.currencies.value},currentType:function(){var e=this.site,t=h.typesById.value[e.type];return t||{name:e.type}},howToSetupUrl:function(){var e=this.currentType;if(e)return e.howToSetupUrl},isInternalSetupUrl:function(){var e=this.howToSetupUrl;return!!e&&"?"==="".concat(e).substring(0,1)},removeDialogTitle:function(){return Object(o["translate"])("SitesManager_DeleteConfirm",'"'.concat(this.theSite.name,'" (idSite = ').concat(this.theSite.idsite,")"))}}});Ce.render=ie;var Ie=Ce;function Be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Be(Object(n),!0).forEach((function(t){ze(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Be(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ze(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}
/*!
 * Matomo - free/libre analytics platform
 *
 * @link https://matomo.org
 * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */console.log("abc");Object(o["createAngularJsAdapter"])({component:Ie,scope:{site:{angularJsBind:"<"},timezoneSupportEnabled:{angularJsBind:"<"},utcTime:{angularJsBind:"<"},globalSettings:{angularJsBind:"<"}},directiveName:"matomoSiteFields",events:{delete:function(e,t,n){var r=n.redirectParams;if(o["MatomoUrl"].urlParsed.value.idSite===e.idsite){var i=n.adminSites.sites,a=i.find((function(t){return t.idsite!==e.idsite}));a&&(r=Ue(Ue({},r),{},{idSite:a.idsite}))}o["MatomoUrl"].updateUrl(Ue(Ue({},o["MatomoUrl"].urlParsed.value),{},{redirectParams:r}),o["MatomoUrl"].hashParsed.value)}}});
/*!
 * Matomo - free/libre analytics platform
 *
 * @link https://matomo.org
 * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */console.log("abc")}})}));
//# sourceMappingURL=SitesManager.umd.min.js.map