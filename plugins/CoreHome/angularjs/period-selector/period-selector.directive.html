<div
    id="periodString"
    piwik-expand-on-click
    class="piwikTopControl piwikSelector borderedControl periodSelector"
>
    <a
        id="date"
        class="title"
        title="{{ 'General_ChooseDate'|translate:periodSelector.getCurrentlyViewingText() }}"
        tabindex="4"
    >
        <span class="icon icon-calendar"></span>
        {{ periodSelector.getCurrentlyViewingText() }}
    </a>
    <div id="periodMore" class="dropdown">
        <table>
            <tr>
                <td>
                    <piwik-date-range-picker
                        ng-show="periodSelector.selectedPeriod === 'range'"
                        class="period-range"
                        start-date="periodSelector.startRangeDate"
                        end-date="periodSelector.endRangeDate"
                        range-change="periodSelector.startRangeDate = start; periodSelector.endRangeDate = end"
                        submit="periodSelector.onApplyClicked()"
                    >
                    </piwik-date-range-picker>
                    <div
                        class="period-date"
                        ng-show="periodSelector.selectedPeriod !== 'range'"
                    >
                        <piwik-period-date-picker
                            id="datepicker"
                            period="periodSelector.selectedPeriod"
                            date="periodSelector.periodValue === periodSelector.selectedPeriod ? periodSelector.dateValue : null"
                            select="periodSelector.setPiwikPeriodAndDate(periodSelector.selectedPeriod, date)"
                        >
                        </piwik-period-date-picker>
                    </div>
                </td>
                <td>
                    <div class="period-type">
                        <h6>{{ 'General_Period'|translate }}</h6>
                        <div id="otherPeriods">
                            <p ng-repeat="period in periodSelector.periods">
                                <input
                                    type="radio"
                                    name="period"
                                    tabindex="4"
                                    ng-attr-id="period_id_{{ period }}"
                                    ng-model="periodSelector.selectedPeriod"
                                    ng-value="period"
                                    ng-change="periodSelector.selectedPeriod = period"
                                    ng-dblclick="periodSelector.changeViewedPeriod(period)"
                                />

                                <label
                                    ng-attr-for="period_id_{{ period }}"
                                    ng-attr-title="{{ period === periodSelector.selectedPeriod ? '' : ('General_ClickToChangePeriod'|translate) }}"
                                    ng-class="{'selected-period-label': period === periodSelector.selectedPeriod}"
                                    ng-dblclick="periodSelector.changeViewedPeriod(period)"
                                >
                                    {{ periodSelector.periodTranslations[period].singular }}
                                </label>
                            </p>
                        </div>
                        <input
                            tabindex="4"
                            type="submit"
                            value="{{ 'General_Apply'|translate }}"
                            id="calendarApply"
                            class="btn"
                            ng-click="periodSelector.onApplyClicked()"
                        />
                    </div>
                </td>
            </tr>
        </table>
    </div>
</div>
