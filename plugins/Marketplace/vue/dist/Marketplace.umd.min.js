(function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t(require("CoreHome"),require("vue"),require("CorePluginsAdmin")):"function"===typeof define&&define.amd?define(["CoreHome",,"CorePluginsAdmin"],t):"object"===typeof exports?exports["Marketplace"]=t(require("CoreHome"),require("vue"),require("CorePluginsAdmin")):e["Marketplace"]=t(e["CoreHome"],e["Vue"],e["CorePluginsAdmin"])})("undefined"!==typeof self?self:this,(function(e,t,n){return function(e){var t={};function n(a){if(t[a])return t[a].exports;var l=t[a]={i:a,l:!1,exports:{}};return e[a].call(l.exports,l,l.exports,n),l.l=!0,l.exports}return n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var l in e)n.d(a,l,function(t){return e[t]}.bind(null,l));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="plugins/Marketplace/vue/dist/",n(n.s="fae3")}({"19dc":function(t,n){t.exports=e},"8bbf":function(e,n){e.exports=t},a5a2:function(e,t){e.exports=n},fae3:function(e,t,n){"use strict";if(n.r(t),n.d(t,"Marketplace",(function(){return In})),n.d(t,"LicenseKey",(function(){return ha})),n.d(t,"ManageLicenseKey",(function(){return Sa})),n.d(t,"GetNewPlugins",(function(){return qa})),n.d(t,"GetNewPluginsAdmin",(function(){return Ja})),n.d(t,"GetPremiumFeatures",(function(){return pl})),n.d(t,"MissingReqsNotice",(function(){return En})),n.d(t,"OverviewIntro",(function(){return yl})),n.d(t,"SubscriptionOverview",(function(){return Gl})),n.d(t,"RichMenuButton",(function(){return ti})),n.d(t,"PluginList",(function(){return qn})),"undefined"!==typeof window){var a=window.document.currentScript,l=a&&a.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);l&&(n.p=l[1])}var i=n("8bbf"),r={class:"row marketplaceActions",ref:"root"},o={class:"col s12 m6 l4"},c={class:"col s12 m6 l4"},s={key:0,class:"col s12 m12 l4 "},u={class:"plugin-search"},d=Object(i["createElementVNode"])("span",{class:"icon-search"},null,-1),p=["alt"];function m(e,t,n,a,l,m){var b,g=this,O=Object(i["resolveComponent"])("Field"),j=Object(i["resolveComponent"])("PluginList"),h=Object(i["resolveComponent"])("ContentBlock");return Object(i["openBlock"])(),Object(i["createElementBlock"])(i["Fragment"],null,[Object(i["createElementVNode"])("div",r,[Object(i["createElementVNode"])("div",o,[Object(i["createVNode"])(O,{uicontrol:"select",name:"plugin_type","model-value":e.pluginTypeFilter,"onUpdate:modelValue":e.updateType,title:e.translate("Marketplace_Show"),"full-width":!0,options:e.pluginTypeOptions},null,8,["model-value","onUpdate:modelValue","title","options"])]),Object(i["createElementVNode"])("div",c,[Object(i["createVNode"])(O,{uicontrol:"select",name:"plugin_sort","model-value":e.pluginSort,"onUpdate:modelValue":e.updateSort,title:e.translate("Marketplace_Sort"),"full-width":!0,options:e.pluginSortOptions},null,8,["model-value","onUpdate:modelValue","title","options"])]),(null===(b=e.pluginsToShow)||void 0===b?void 0:b.length)>20||e.searchQuery?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",s,[Object(i["createElementVNode"])("div",u,[Object(i["createElementVNode"])("div",null,[Object(i["createVNode"])(O,{uicontrol:"text",name:"query",title:e.queryInputTitle,"full-width":!0,"model-value":e.searchQuery,"onUpdate:modelValue":e.updateQuery},null,8,["title","model-value","onUpdate:modelValue"])]),d])])):Object(i["createCommentVNode"])("",!0)],512),!e.loading&&e.pluginsToShow.length>0?(Object(i["openBlock"])(),Object(i["createBlock"])(j,{key:0,"plugins-to-show":e.pluginsToShow,"current-user-email":e.currentUserEmail,"is-auto-update-possible":e.isAutoUpdatePossible,"is-super-user":e.isSuperUser,"is-multi-server-environment":e.isMultiServerEnvironment,"has-some-admin-access":e.hasSomeAdminAccess,"is-plugins-admin-enabled":e.isPluginsAdminEnabled,"is-valid-consumer":e.isValidConsumer,"deactivate-nonce":e.deactivateNonce,"activate-nonce":e.activateNonce,"install-nonce":e.installNonce,"update-nonce":e.updateNonce,onTriggerUpdate:t[0]||(t[0]=function(e){return g.fetchPlugins()})},null,8,["plugins-to-show","current-user-email","is-auto-update-possible","is-super-user","is-multi-server-environment","has-some-admin-access","is-plugins-admin-enabled","is-valid-consumer","deactivate-nonce","activate-nonce","install-nonce","update-nonce"])):Object(i["createCommentVNode"])("",!0),e.loading||0!=e.pluginsToShow.length?Object(i["createCommentVNode"])("",!0):(Object(i["openBlock"])(),Object(i["createBlock"])(h,{key:1},{default:Object(i["withCtx"])((function(){return[Object(i["createTextVNode"])(Object(i["toDisplayString"])(e.translate(e.showThemes?"Marketplace_NoThemesFound":"Marketplace_NoPluginsFound")),1)]})),_:1})),e.loading?(Object(i["openBlock"])(),Object(i["createBlock"])(h,{key:2},{default:Object(i["withCtx"])((function(){return[Object(i["createElementVNode"])("img",{src:"plugins/Morpheus/images/loading-blue.gif",alt:e.translate("General_LoadingData")},null,8,p),Object(i["createTextVNode"])(" "+Object(i["toDisplayString"])(e.loadingMessage),1)]})),_:1})):Object(i["createCommentVNode"])("",!0)],64)}var b=n("19dc"),g=n("a5a2"),O={key:0,class:"pluginListContainer row"},j=["onClick"],h={class:"card"},k={class:"card-content"},v=["src"],y={class:"content-container"},f={class:"card-content-top"},N={key:0,class:"matomo-badge matomo-badge-top",src:"plugins/Marketplace/images/matomo-badge.png","aria-label":"Matomo plugin",alt:""},V={class:"price"},E=["onClick"],S=Object(i["createElementVNode"])("div",{class:"card-focus"},null,-1),B={class:"card-title"},M=Object(i["createElementVNode"])("span",{class:"card-title-chevron"}," ›",-1),w={class:"card-description"},T={class:"card-content-bottom"},C={key:0,class:"downloads"},P={class:"cta-container"},A={key:1,class:"matomo-badge matomo-badge-bottom",src:"plugins/Marketplace/images/matomo-badge.png","aria-label":"Matomo plugin",alt:""};function D(e,t,n,a,l,r){var o=this,c=Object(i["resolveComponent"])("RequestTrial"),s=Object(i["resolveComponent"])("StartFreeTrial"),u=Object(i["resolveComponent"])("PluginDetailsModal"),d=Object(i["resolveComponent"])("CTAContainer");return Object(i["openBlock"])(),Object(i["createElementBlock"])(i["Fragment"],null,[Object(i["createVNode"])(c,{modelValue:e.showRequestTrialForPlugin,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.showRequestTrialForPlugin=t}),onTrialRequested:t[1]||(t[1]=function(e){return o.$emit("triggerUpdate")})},null,8,["modelValue"]),Object(i["createVNode"])(s,{"current-user-email":e.currentUserEmail,"is-valid-consumer":e.isValidConsumer,modelValue:e.showStartFreeTrialForPlugin,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.showStartFreeTrialForPlugin=t}),onTrialStarted:t[3]||(t[3]=function(t){return e.$emit("triggerUpdate")})},null,8,["current-user-email","is-valid-consumer","modelValue"]),Object(i["createVNode"])(u,{modelValue:e.showPluginDetailsForPlugin,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.showPluginDetailsForPlugin=t}),"is-super-user":e.isSuperUser,"is-plugins-admin-enabled":e.isPluginsAdminEnabled,"is-multi-server-environment":e.isMultiServerEnvironment,"is-valid-consumer":e.isValidConsumer,"is-auto-update-possible":e.isAutoUpdatePossible,"has-some-admin-access":e.hasSomeAdminAccess,"deactivate-nonce":e.deactivateNonce,"activate-nonce":e.activateNonce,"install-nonce":e.installNonce,"update-nonce":e.updateNonce,onRequestTrial:t[5]||(t[5]=function(e){return o.showRequestTrialForPlugin=e}),onStartFreeTrial:t[6]||(t[6]=function(e){return o.showStartFreeTrialForPlugin=e})},null,8,["modelValue","is-super-user","is-plugins-admin-enabled","is-multi-server-environment","is-valid-consumer","is-auto-update-possible","has-some-admin-access","deactivate-nonce","activate-nonce","install-nonce","update-nonce"]),e.pluginsToShow.length>0?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",O,[(Object(i["openBlock"])(!0),Object(i["createElementBlock"])(i["Fragment"],null,Object(i["renderList"])(e.pluginsToShow,(function(t){return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",{class:"col s12 m6 l4",key:t.name},[Object(i["createElementVNode"])("div",{class:Object(i["normalizeClass"])("card-holder ".concat(t.numDownloads>0?"card-with-downloads":"")),onClick:function(n){return e.clickCard(n,t)}},[Object(i["createElementVNode"])("div",h,[Object(i["createElementVNode"])("div",k,[Object(i["createElementVNode"])("img",{src:"".concat(t.coverImage,"?w=880&h=480"),alt:"",class:"cover-image"},null,8,v),Object(i["createElementVNode"])("div",y,[Object(i["createElementVNode"])("div",f,["piwik"==t.owner||"matomo-org"==t.owner?(Object(i["openBlock"])(),Object(i["createElementBlock"])("img",N)):Object(i["createCommentVNode"])("",!0),Object(i["createElementVNode"])("div",V,[t.priceFrom?(Object(i["openBlock"])(),Object(i["createElementBlock"])(i["Fragment"],{key:0},[Object(i["createTextVNode"])(Object(i["toDisplayString"])(e.translate("Marketplace_PriceFromPerPeriod",t.priceFrom.prettyPrice,t.priceFrom.period)),1)],64)):t.isFree?(Object(i["openBlock"])(),Object(i["createElementBlock"])(i["Fragment"],{key:1},[Object(i["createTextVNode"])(Object(i["toDisplayString"])(e.translate("Marketplace_Free")),1)],64)):Object(i["createCommentVNode"])("",!0)]),Object(i["createElementVNode"])("a",{onClick:Object(i["withModifiers"])((function(n){return e.clickCard(n,t)}),["prevent"]),class:"card-title-link",href:"#",tabindex:"7"},[S,Object(i["createElementVNode"])("h2",B,[Object(i["createTextVNode"])(Object(i["toDisplayString"])(t.displayName),1),M])],8,E),Object(i["createElementVNode"])("div",w,Object(i["toDisplayString"])(t.description),1)]),Object(i["createElementVNode"])("div",T,[t.numDownloads>0?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",C,Object(i["toDisplayString"])(t.numDownloadsPretty)+" "+Object(i["toDisplayString"])(e.translate("General_Downloads").toLowerCase()),1)):Object(i["createCommentVNode"])("",!0),Object(i["createElementVNode"])("div",P,[Object(i["createVNode"])(d,{"is-super-user":e.isSuperUser,"is-plugins-admin-enabled":e.isPluginsAdminEnabled,"is-multi-server-environment":e.isMultiServerEnvironment,"is-valid-consumer":e.isValidConsumer,"is-auto-update-possible":e.isAutoUpdatePossible,"activate-nonce":e.activateNonce,"deactivate-nonce":e.deactivateNonce,"install-nonce":e.installNonce,"update-nonce":e.updateNonce,plugin:t,"in-modal":!1,onOpenDetailsModal:function(e){return o.openDetailsModal(t)},onRequestTrial:function(n){return e.showRequestTrialForPlugin=t},onStartFreeTrial:function(n){return e.showStartFreeTrialForPlugin=t}},null,8,["is-super-user","is-plugins-admin-enabled","is-multi-server-environment","is-valid-consumer","is-auto-update-possible","activate-nonce","deactivate-nonce","install-nonce","update-nonce","plugin","onOpenDetailsModal","onRequestTrial","onStartFreeTrial"])]),"piwik"==t.owner||"matomo-org"==t.owner?(Object(i["openBlock"])(),Object(i["createElementBlock"])("img",A)):Object(i["createCommentVNode"])("",!0)])])])])],10,j)])})),128))])):Object(i["createCommentVNode"])("",!0)],64)}var L={key:0,class:"alert alert-danger alert-no-background"},_={key:0,style:{"white-space":"nowrap"}},U=Object(i["createTextVNode"])("("),x=Object(i["createTextVNode"])(")"),q=["href"],F={key:2,class:"alert alert-danger alert-no-background"},R={key:0,style:{"white-space":"nowrap"}},I=Object(i["createTextVNode"])("("),K=Object(i["createTextVNode"])(")"),H=["href"],z={key:1,class:"alert alert-warning alert-no-background"},G={key:0,style:{"white-space":"nowrap"}},W=Object(i["createTextVNode"])("("),Q=Object(i["createTextVNode"])(")"),Y={key:4,class:"alert alert-success alert-no-background"},J=Object(i["createTextVNode"])(" ("),Z=Object(i["createTextVNode"])(") "),X=Object(i["createTextVNode"])(" ("),ee=["href"],te=Object(i["createTextVNode"])(" - "),ne=["href"],ae=Object(i["createTextVNode"])(") "),le=["title"],ie={key:7,class:"alert alert-warning alert-no-background"},re={key:0,style:{"white-space":"nowrap"}},oe=Object(i["createTextVNode"])("("),ce=Object(i["createTextVNode"])(")"),se=["href"],ue=["title"],de=["title"];function pe(e,t,n,a,l,r){var o=this,c=Object(i["resolveComponent"])("MoreDetailsAction"),s=Object(i["resolveComponent"])("DownloadButton");return e.isSuperUser?(Object(i["openBlock"])(),Object(i["createElementBlock"])(i["Fragment"],{key:0},[e.plugin.isMissingLicense?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",L,[Object(i["createTextVNode"])(Object(i["toDisplayString"])(e.translate("Marketplace_LicenseMissing"))+" ",1),e.inModal?Object(i["createCommentVNode"])("",!0):(Object(i["openBlock"])(),Object(i["createElementBlock"])("span",_,[U,Object(i["createVNode"])(c,{onAction:t[0]||(t[0]=function(t){return e.$emit("openDetailsModal")})}),x]))])):e.inModal&&e.plugin.hasExceededLicense&&e.plugin.consumer.loginUrl?(Object(i["openBlock"])(),Object(i["createElementBlock"])("a",{key:1,class:"btn btn-block",tabindex:"7",target:"_blank",rel:"noreferrer noopener",href:e.externalRawLink(e.plugin.consumer.loginUrl)},Object(i["toDisplayString"])(e.translate("Marketplace_UpgradeSubscription")),9,q)):e.plugin.hasExceededLicense?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",F,[Object(i["createTextVNode"])(Object(i["toDisplayString"])(e.translate("Marketplace_LicenseExceeded"))+" ",1),e.inModal?Object(i["createCommentVNode"])("",!0):(Object(i["openBlock"])(),Object(i["createElementBlock"])("span",R,[I,Object(i["createVNode"])(c,{onAction:t[1]||(t[1]=function(t){return e.$emit("openDetailsModal")})}),K]))])):e.plugin.canBeUpdated&&0==e.plugin.missingRequirements.length?(Object(i["openBlock"])(),Object(i["createElementBlock"])(i["Fragment"],{key:3},[e.isAutoUpdatePossible?(Object(i["openBlock"])(),Object(i["createElementBlock"])("a",{key:0,tabindex:"7",class:"btn btn-block",href:e.linkToUpdate(e.plugin.name)},Object(i["toDisplayString"])(e.translate("CoreUpdater_UpdateTitle")),9,H)):(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",z,[Object(i["createTextVNode"])(Object(i["toDisplayString"])(e.translate("Marketplace_CannotUpdate"))+" ",1),!e.inModal||0===e.plugin.missingRequirements.length&&e.plugin.isDownloadable&&!e.isAutoUpdatePossible?(Object(i["openBlock"])(),Object(i["createElementBlock"])("span",G,[W,e.inModal?Object(i["createCommentVNode"])("",!0):(Object(i["openBlock"])(),Object(i["createBlock"])(c,{key:0,onAction:t[2]||(t[2]=function(t){return e.$emit("openDetailsModal")})})),Object(i["createVNode"])(s,{plugin:e.plugin,"show-or":!e.inModal,"is-auto-update-possible":e.isAutoUpdatePossible},null,8,["plugin","show-or","is-auto-update-possible"]),Q])):Object(i["createCommentVNode"])("",!0)]))],64)):e.plugin.isInstalled?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",Y,[Object(i["createTextVNode"])(Object(i["toDisplayString"])(e.translate("General_Installed"))+" ",1),e.plugin.missingRequirements.length>0||!e.isAutoUpdatePossible?(Object(i["openBlock"])(),Object(i["createElementBlock"])(i["Fragment"],{key:0},[J,Object(i["createVNode"])(s,{plugin:e.plugin,"show-or":!1,"is-auto-update-possible":e.isAutoUpdatePossible},null,8,["plugin","is-auto-update-possible"]),Z],64)):e.plugin.isInvalid||e.isMultiServerEnvironment||!e.isPluginsAdminEnabled?Object(i["createCommentVNode"])("",!0):(Object(i["openBlock"])(),Object(i["createElementBlock"])(i["Fragment"],{key:1},[X,e.plugin.isActivated?(Object(i["openBlock"])(),Object(i["createElementBlock"])("a",{key:0,tabindex:"7",href:e.linkToDeactivate(e.plugin.name)},Object(i["toDisplayString"])(e.translate("CorePluginsAdmin_Deactivate")),9,ee)):e.plugin.missingRequirements.length>0?(Object(i["openBlock"])(),Object(i["createElementBlock"])(i["Fragment"],{key:1},[te],64)):(Object(i["openBlock"])(),Object(i["createElementBlock"])("a",{key:2,tabindex:"7",href:e.linkToActivate(e.plugin.name)},Object(i["toDisplayString"])(e.translate("CorePluginsAdmin_Activate")),9,ne)),ae],64))])):e.plugin.isEligibleForFreeTrial?(Object(i["openBlock"])(),Object(i["createElementBlock"])("a",{key:5,tabindex:"7",class:"btn btn-block purchaseable",href:"",onClick:t[3]||(t[3]=Object(i["withModifiers"])((function(t){e.$emit("startFreeTrial")}),["prevent"])),onKeyup:t[4]||(t[4]=Object(i["withKeys"])((function(t){return e.$emit("startFreeTrial")}),["enter"])),title:e.translate("Marketplace_StartFreeTrial")},Object(i["toDisplayString"])(e.translate("Marketplace_StartFreeTrial")),41,le)):e.inModal||e.plugin.isDownloadable||!(e.plugin.isPaid||e.plugin.missingRequirements.length>0)&&e.isAutoUpdatePossible?e.plugin.missingRequirements.length>0||!e.isAutoUpdatePossible?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",ie,[Object(i["createTextVNode"])(Object(i["toDisplayString"])(e.translate("Marketplace_CannotInstall"))+" ",1),!e.inModal||0===e.plugin.missingRequirements.length&&e.plugin.isDownloadable&&!e.isAutoUpdatePossible?(Object(i["openBlock"])(),Object(i["createElementBlock"])("span",re,[oe,e.inModal?Object(i["createCommentVNode"])("",!0):(Object(i["openBlock"])(),Object(i["createBlock"])(c,{key:0,onAction:t[6]||(t[6]=function(t){return e.$emit("openDetailsModal")})})),Object(i["createVNode"])(s,{plugin:e.plugin,"show-or":!e.inModal,"is-auto-update-possible":e.isAutoUpdatePossible},null,8,["plugin","show-or","is-auto-update-possible"]),ce])):Object(i["createCommentVNode"])("",!0)])):(Object(i["openBlock"])(),Object(i["createElementBlock"])("a",{key:8,tabindex:"7",href:e.linkToInstall(e.plugin.name),class:"btn btn-block"},Object(i["toDisplayString"])(e.translate("Marketplace_ActionInstall")),9,se)):(Object(i["openBlock"])(),Object(i["createBlock"])(c,{key:6,"show-as-button":!0,label:e.translate("General_MoreDetails"),onAction:t[5]||(t[5]=function(t){return e.$emit("openDetailsModal")})},null,8,["label"]))],64)):e.plugin.isTrialRequested?(Object(i["openBlock"])(),Object(i["createElementBlock"])("a",{key:1,tabindex:"7",class:"btn btn-block purchaseable disabled",href:"",title:e.translate("Marketplace_TrialRequested")},Object(i["toDisplayString"])(e.translate("Marketplace_TrialRequested")),9,ue)):e.plugin.canTrialBeRequested?(Object(i["openBlock"])(),Object(i["createElementBlock"])("a",{key:2,tabindex:"7",class:"btn btn-block purchaseable",href:"",onClick:t[7]||(t[7]=Object(i["withModifiers"])((function(e){o.$emit("requestTrial")}),["prevent"])),title:e.translate("Marketplace_RequestTrial")},Object(i["toDisplayString"])(e.translate("Marketplace_RequestTrial")),9,de)):(Object(i["openBlock"])(),Object(i["createElementBlock"])(i["Fragment"],{key:3},[e.inModal?Object(i["createCommentVNode"])("",!0):(Object(i["openBlock"])(),Object(i["createBlock"])(c,{key:0,"show-as-button":!0,label:e.translate("General_MoreDetails"),onAction:t[8]||(t[8]=function(t){return e.$emit("openDetailsModal")})},null,8,["label"]))],64))}var me={key:0,onclick:"$(this).css('display', 'none')"},be=["href"];function ge(e,t,n,a,l,r){return 0===e.plugin.missingRequirements.length&&e.plugin.isDownloadable&&!e.isAutoUpdatePossible?(Object(i["openBlock"])(),Object(i["createElementBlock"])("span",me,[e.showOr?(Object(i["openBlock"])(),Object(i["createElementBlock"])(i["Fragment"],{key:0},[Object(i["createTextVNode"])(" "+Object(i["toDisplayString"])(e.translate("General_Or"))+" ",1)],64)):Object(i["createCommentVNode"])("",!0),Object(i["createElementVNode"])("a",{tabindex:"7",class:"plugin-details download",href:e.linkTo({module:"Marketplace",action:"download",pluginName:e.plugin.name,nonce:e.plugin.downloadNonce})},Object(i["toDisplayString"])(e.translate("General_Download")),9,be)])):Object(i["createCommentVNode"])("",!0)}var Oe=Object(i["defineComponent"])({props:{plugin:{type:Object,required:!0},showOr:{type:Boolean,default:!1},isAutoUpdatePossible:{type:Boolean,required:!0}},methods:{linkTo:function(e){return"?".concat(b["MatomoUrl"].stringify(Object.assign(Object.assign({},b["MatomoUrl"].urlParsed.value),e)))}}});Oe.render=ge;var je=Oe,he=["title"];function ke(e,t,n,a,l,r){return Object(i["openBlock"])(),Object(i["createElementBlock"])("a",{tabindex:"7",class:Object(i["normalizeClass"])({"btn btn-block":e.showAsButton}),href:"",title:e.translate("General_MoreDetails"),onClick:t[0]||(t[0]=Object(i["withModifiers"])((function(t){return e.$emit("action")}),["prevent"])),onKeyup:t[1]||(t[1]=Object(i["withKeys"])((function(t){return e.$emit("action")}),["enter"]))},Object(i["toDisplayString"])(e.label?e.label:e.translate("General_Help")),43,he)}var ve=Object(i["defineComponent"])({props:{showAsButton:{type:Boolean,required:!1,default:!1},label:{type:String,required:!1}},emits:["action"]});ve.render=ke;var ye=ve,fe=Object(i["defineComponent"])({props:{plugin:{type:Object,required:!0},activateNonce:{type:String,required:!0},deactivateNonce:{type:String,required:!0},installNonce:{type:String,required:!0},updateNonce:{type:String,required:!0},isAutoUpdatePossible:{type:Boolean,required:!0},isValidConsumer:{type:Boolean,required:!0},isMultiServerEnvironment:{type:Boolean,required:!0},isPluginsAdminEnabled:{type:Boolean,required:!0},isSuperUser:{type:Boolean,required:!0},inModal:{type:Boolean,required:!0}},emits:["openDetailsModal","requestTrial","startFreeTrial"],components:{MoreDetailsAction:ye,DownloadButton:je},methods:{linkToActivate:function(e){return this.linkTo({module:"CorePluginsAdmin",action:"activate",redirectTo:"referrer",nonce:this.activateNonce,pluginName:e})},linkToDeactivate:function(e){return this.linkTo({module:"CorePluginsAdmin",action:"deactivate",redirectTo:"referrer",nonce:this.deactivateNonce,pluginName:e})},linkToInstall:function(e){return this.linkTo({module:"Marketplace",action:"installPlugin",nonce:this.installNonce,pluginName:e})},linkToUpdate:function(e){return this.linkTo({module:"Marketplace",action:"updatePlugin",nonce:this.updateNonce,pluginName:e})},linkTo:function(e){return"?".concat(b["MatomoUrl"].stringify(Object.assign(Object.assign({},b["MatomoUrl"].urlParsed.value),e)))}}});fe.render=pe;var Ne=fe,Ve={class:"ui-confirm",ref:"confirm"},Ee=["value"],Se=["value"];function Be(e,t,n,a,l,r){var o;return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",Ve,[Object(i["createElementVNode"])("h2",null,Object(i["toDisplayString"])(e.translate("Marketplace_RequestTrialConfirmTitle",null===(o=e.plugin)||void 0===o?void 0:o.displayName)),1),Object(i["createElementVNode"])("p",null,Object(i["toDisplayString"])(e.translate("Marketplace_RequestTrialConfirmEmailWarning")),1),Object(i["createElementVNode"])("input",{role:"yes",type:"button",value:e.translate("General_Yes")},null,8,Ee),Object(i["createElementVNode"])("input",{role:"no",type:"button",value:e.translate("General_No")},null,8,Se)],512)}function Me(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function we(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Te(e,t,n){return t&&we(e.prototype,t),n&&we(e,n),e}function Ce(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}
/*!
 * Matomo - free/libre analytics platform
 *
 * @link    https://matomo.org
 * @license https://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */var Pe,Ae=function(){function e(){Me(this,e),Ce(this,"periods",{}),Ce(this,"periodOrder",[])}return Te(e,[{key:"addCustomPeriod",value:function(e,t){if(this.periods[e])throw new Error('The "'.concat(e,'" period already exists! It cannot be overridden.'));this.periods[e]=t,this.periodOrder.push(e)}},{key:"getAllLabels",value:function(){return Array().concat(this.periodOrder)}},{key:"get",value:function(e){var t=this.periods[e];if(!t)throw new Error("Invalid period label: ".concat(e));return t}},{key:"parse",value:function(e,t){return this.get(e).parse(t)}},{key:"isRecognizedPeriod",value:function(e){return!!this.periods[e]}}]),e}(),De=new Ae;function Le(e){return qe(e)||xe(e)||Ue(e)||_e()}function _e(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ue(e,t){if(e){if("string"===typeof e)return Fe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Fe(e,t):void 0}}function xe(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function qe(e){if(Array.isArray(e))return Fe(e)}function Fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}
/*!
 * Matomo - free/libre analytics platform
 *
 * @link    https://matomo.org
 * @license https://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */var Re=window,Ie=Re.piwik,Ke=Re.broadcast,He=Re.piwikHelper;Ie.helper=He,Ie.broadcast=Ke,Ie.updateDateInTitle=function(e,t){if($(".top_controls #periodString").length&&(Pe=Pe||document.title,0===Pe.indexOf(Ie.siteName))){var n=" - ".concat(De.parse(t,e).getPrettyString()," ");document.title="".concat(Ie.siteName).concat(n).concat(Pe.slice(Ie.siteName.length))}},Ie.hasUserCapability=function(e){return Array.isArray(Ie.userCapabilities)&&-1!==Ie.userCapabilities.indexOf(e)},Ie.on=function(e,t){function n(e){t.apply(void 0,Le(e.detail))}t.wrapper=n,window.addEventListener(e,n)},Ie.off=function(e,t){t.wrapper&&window.removeEventListener(e,t.wrapper)},Ie.postEvent=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];var l=new CustomEvent(e,{detail:n});window.dispatchEvent(l)};var $e=Ie,ze=$e,Ge=Object(i["defineComponent"])({props:{modelValue:{type:Object,default:function(){return{}}}},emits:["update:modelValue","trialRequested"],watch:{modelValue:function(e){var t=this;e&&ze.helper.modalConfirm(this.$refs.confirm,{yes:function(){t.requestTrial(e)}},{onCloseEnd:function(){t.$emit("update:modelValue",null)}})}},computed:{plugin:function(){return this.modelValue}},methods:{requestTrial:function(e){var t=this;b["AjaxHelper"].post({module:"API",method:"Marketplace.requestTrial"},{pluginName:e.name,pluginDisplayName:e.displayName}).then((function(){var n=b["NotificationsStore"].show({message:Object(b["translate"])("Marketplace_RequestTrialSubmitted",e.displayName),context:"success",id:"requestTrialSuccess",placeat:"#notificationContainer",type:"transient"});b["NotificationsStore"].scrollToNotification(n),t.$emit("trialRequested")}))}}});Ge.render=Be;var We=Ge,Qe={class:"modal",id:"startFreeTrial"},Ye={key:0,class:"btn-close modal-close"},Je=Object(i["createElementVNode"])("i",{class:"icon-close"},null,-1),Ze=[Je],Xe={key:1,class:"modal-content trial-start-in-progress"},et={class:"Piwik_Popover_Loading"},tt={class:"Piwik_Popover_Loading_Name"},nt={key:2,class:"modal-content trial-start-error"},at={class:"modal-text"},lt={key:3,class:"modal-content trial-start-no-license"},it={class:"modal-text"},rt=["innerHTML"],ot=["innerHTML"],ct=["disabled"],st=["innerHTML"];function ut(e,t,n,a,l,r){var o=Object(i["resolveComponent"])("Field");return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",Qe,[e.trialStartInProgress?Object(i["createCommentVNode"])("",!0):(Object(i["openBlock"])(),Object(i["createElementBlock"])("p",Ye,Ze)),e.trialStartInProgress?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",Xe,[Object(i["createElementVNode"])("div",et,[Object(i["createElementVNode"])("div",tt,[Object(i["createElementVNode"])("h2",null,Object(i["toDisplayString"])(e.translate("Marketplace_TrialStartInProgressTitle")),1),Object(i["createElementVNode"])("p",null,Object(i["toDisplayString"])(e.translate("Marketplace_TrialStartInProgressText")),1)])])])):e.trialStartError?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",nt,[Object(i["createElementVNode"])("div",at,[Object(i["createElementVNode"])("h2",null,Object(i["toDisplayString"])(e.translate("Marketplace_TrialStartErrorTitle")),1),Object(i["createElementVNode"])("p",null,Object(i["toDisplayString"])(e.trialStartError),1),Object(i["createElementVNode"])("p",null,Object(i["toDisplayString"])(e.translate("Marketplace_TrialStartErrorSupport")),1)])])):(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",lt,[Object(i["createElementVNode"])("div",it,[Object(i["createElementVNode"])("h2",null,Object(i["toDisplayString"])(e.translate("Marketplace_TrialStartNoLicenseTitle")),1),Object(i["createElementVNode"])("p",null,Object(i["toDisplayString"])(e.translate("Marketplace_TrialStartNoLicenseText")),1),Object(i["createVNode"])(o,{uicontrol:"text",name:"email",modelValue:e.createAccountEmail,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.createAccountEmail=t}),"full-width":!0,title:e.translate("UsersManager_Email")},null,8,["modelValue","title"]),e.createAccountError?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",{key:0,class:"alert alert-danger",innerHTML:e.$sanitize(e.createAccountError)},null,8,rt)):Object(i["createCommentVNode"])("",!0),Object(i["createElementVNode"])("p",{class:"trial-start-legal-hint",innerHTML:e.$sanitize(e.trialStartNoLicenseLegalHintText)},null,8,ot),Object(i["createElementVNode"])("p",null,[Object(i["createElementVNode"])("button",{class:"btn",disabled:!e.createAccountEmail,onClick:t[1]||(t[1]=function(t){return e.createAccountAndStartFreeTrial()})},Object(i["toDisplayString"])(e.translate("Marketplace_TrialStartNoLicenseCreateAccount")),9,ct)]),Object(i["createElementVNode"])("p",{class:"add-existing-license",innerHTML:e.$sanitize(e.trialStartNoLicenseAddHereText)},null,8,st)])]))])}var dt=window,pt=dt.$,mt=Object(i["defineComponent"])({components:{Field:g["Field"]},props:{modelValue:{type:Object,default:function(){return{}}},currentUserEmail:String,isValidConsumer:Boolean},data:function(){return{createAccountEmail:this.currentUserEmail||"",createAccountError:null,trialStartError:null,loadingModalCloseCallback:void 0,trialStartInProgress:!1,trialStartSuccessNotificationMessage:"",trialStartSuccessNotificationTitle:""}},emits:["update:modelValue","trialStarted"],watch:{modelValue:function(e){e&&(this.isValidConsumer?(this.trialStartSuccessNotificationMessage=Object(b["translate"])("CorePluginsAdmin_PluginFreeTrialStarted","<strong>","</strong>",this.plugin.displayName),this.startFreeTrial()):(this.trialStartSuccessNotificationTitle=Object(b["translate"])("CorePluginsAdmin_PluginFreeTrialStartedAccountCreatedTitle"),this.trialStartSuccessNotificationMessage=Object(b["translate"])("CorePluginsAdmin_PluginFreeTrialStartedAccountCreatedMessage",this.plugin.displayName),this.showLicenseDialog(!1)))}},computed:{plugin:function(){return this.modelValue},trialStartNoLicenseAddHereText:function(){var e="?".concat(b["MatomoUrl"].stringify({module:"Marketplace",action:"manageLicenseKey"}));return Object(b["translate"])("Marketplace_TrialStartNoLicenseAddHere",'<a href="'.concat(e,'">'),"</a>")},trialStartNoLicenseLegalHintText:function(){return Object(b["translate"])("Marketplace_TrialStartNoLicenseLegalHint",Object(b["externalLink"])("https://shop.matomo.org/terms-conditions/"),"</a>",Object(b["externalLink"])("https://matomo.org/privacy-policy/"),"</a>")}},methods:{closeModal:function(){pt("#startFreeTrial").modal("close")},createAccountAndStartFreeTrial:function(){var e=this;this.createAccountEmail&&(this.showLoadingModal(!0),b["AjaxHelper"].post({module:"API",method:"Marketplace.createAccount"},{email:this.createAccountEmail},{createErrorNotification:!1}).then((function(){e.startFreeTrial()})).catch((function(t){t.message.startsWith("Marketplace_CreateAccountError")?(e.showErrorModal(Object(b["translate"])(t.message)),e.trialStartInProgress=!1,e.$emit("update:modelValue",null)):(e.createAccountError=t.message,e.trialStartInProgress=!1,e.showLicenseDialog(!0))})))},showLicenseDialog:function(e){var t=this,n=function(e){var n=e.keyCode?e.keyCode:e.which;13===n&&(t.closeModal(),t.createAccountAndStartFreeTrial())},a={dismissible:!0,onOpenEnd:function(){var e=".modal.open #email";pt(e).focus(),pt(e).off("keypress").keypress(n)},onCloseEnd:function(){t.createAccountError=null,t.trialStartInProgress||t.$emit("update:modelValue",null)}};e&&(a.inDuration=0),pt("#startFreeTrial").modal(a).modal("open")},showErrorModal:function(e){var t=this;this.trialStartError||(this.trialStartError=e,pt("#startFreeTrial").modal({dismissible:!0,inDuration:0,onCloseEnd:function(){t.trialStartError=null}}).modal("open"))},showLoadingModal:function(e){var t=this;this.trialStartInProgress||(this.trialStartInProgress=!0,this.loadingModalCloseCallback=void 0,pt("#startFreeTrial").modal({dismissible:!1,inDuration:e?0:void 0,onCloseEnd:function(){t.loadingModalCloseCallback&&(t.loadingModalCloseCallback(),t.loadingModalCloseCallback=void 0)}}).modal("open"))},startFreeTrial:function(){var e=this;this.showLoadingModal(!1),b["AjaxHelper"].post({module:"API",method:"Marketplace.startFreeTrial"},{pluginName:this.plugin.name},{createErrorNotification:!1}).then((function(){e.loadingModalCloseCallback=e.startFreeTrialSuccess,e.closeModal()})).catch((function(t){e.showErrorModal(ze.helper.htmlDecode(t.message)),e.trialStartInProgress=!1})).finally((function(){e.$emit("update:modelValue",null)}))},startFreeTrialSuccess:function(){var e=b["NotificationsStore"].show({message:this.trialStartSuccessNotificationMessage,title:this.trialStartSuccessNotificationTitle,context:"success",id:"startTrialSuccess",placeat:"#notificationContainer",type:"transient"});b["NotificationsStore"].scrollToNotification(e),this.trialStartInProgress=!1,this.$emit("trialStarted")}}});mt.render=ut;var bt=mt,gt={ref:"root",class:"modal",id:"pluginDetailsModal"},Ot={class:"modal-content__header"},jt=Object(i["createElementVNode"])("span",{class:"btn-close modal-close"},[Object(i["createElementVNode"])("i",{class:"icon-close"})],-1),ht={key:0,class:"plugin-metadata-part1"},kt=Object(i["createElementVNode"])("h3",{class:"sr-only"},"Plugin details — part 1",-1),vt={key:0,class:"pair"},yt=Object(i["createElementVNode"])("img",{class:"star-icon reviews-icon",src:"plugins/Marketplace/images/star.svg",alt:""},null,-1),ft={key:1,class:"pair"},Nt={key:2,class:"pair"},Vt={key:3,class:"pair"},Et={key:4,class:"pair"},St={class:"modal-content__main"},Bt={class:"plugin-description"},Mt={key:1,class:"alert alert-warning"},wt={key:2,class:"alert alert-warning"},Tt={key:3,class:"alert alert-danger"},Ct={key:4,class:"alert alert-warning"},Pt=["innerHTML"],At={class:"plugin-metadata-part2"},Dt=Object(i["createElementVNode"])("hr",null,null,-1),Lt=Object(i["createElementVNode"])("h3",{class:"sr-only"},"Plugin details — part 2",-1),_t={key:0,class:"pair"},Ut={key:1,class:"pair"},xt={class:"pair"},qt=["href"],Ft=["href"],Rt={key:2},It={key:3},Kt={class:"pair"},Ht=["href"],$t=Object(i["createTextVNode"])(", "),zt=["href"],Gt=Object(i["createTextVNode"])(", "),Wt=["href"],Qt={key:0,class:"pair"},Yt={key:1,class:"pair"},Jt=["href"],Zt={key:1},Xt=["innerHTML"],en={key:0},tn=["href"],nn={key:1},an=["href"],ln=["innerHTML"],rn={key:0,class:"plugin-screenshots"},on=Object(i["createElementVNode"])("hr",null,null,-1),cn={class:"thumbnails"},sn=["src"],un={key:1,class:"plugin-documentation"},dn=Object(i["createElementVNode"])("hr",null,null,-1),pn=["innerHTML"],mn={key:2,class:"plugin-faq"},bn=Object(i["createElementVNode"])("hr",null,null,-1),gn=["innerHTML"],On={key:3,class:"plugin-reviews",id:"reviews"},jn=Object(i["createElementVNode"])("hr",null,null,-1),hn=["id","src"],kn={class:"modal-content__footer"},vn={class:"cta-container"},yn={key:0,class:"matomo-badge matomo-badge-modal",src:"plugins/Marketplace/images/matomo-badge.png","aria-label":"Matomo plugin",alt:""};function fn(e,t,n,a,l,r){var o,c,s,u,d,p,m=this,b=Object(i["resolveComponent"])("MissingReqsNotice"),g=Object(i["resolveComponent"])("CTAContainer");return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",gt,[e.isLoading?Object(i["createCommentVNode"])("",!0):(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",{key:0,class:Object(i["normalizeClass"])(["modal-content",{"modal-content--simple-header":!e.hasHeaderMetadata}])},[Object(i["createElementVNode"])("div",Ot,[jt,Object(i["createElementVNode"])("h2",null,Object(i["toDisplayString"])(e.plugin&&e.plugin.displayName?e.plugin.displayName:"Plugin details"),1),e.hasHeaderMetadata?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",ht,[kt,Object(i["createElementVNode"])("dl",null,[e.showReviews?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",vt,[Object(i["createElementVNode"])("dt",null,Object(i["toDisplayString"])(e.translate("Marketplace_Reviews")),1),Object(i["createElementVNode"])("dd",null,[yt,Object(i["createElementVNode"])("a",{onClick:t[0]||(t[0]=function(t){return e.scrollElementIntoView("#reviews")})},Object(i["toDisplayString"])(e.pluginReviews.averageRating),1)])])):Object(i["createCommentVNode"])("",!0),e.plugin.isBundle?Object(i["createCommentVNode"])("",!0):(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",ft,[Object(i["createElementVNode"])("dt",null,Object(i["toDisplayString"])(e.translate("CorePluginsAdmin_Version")),1),Object(i["createElementVNode"])("dd",null,Object(i["toDisplayString"])(e.plugin.latestVersion),1)])),e.plugin.numDownloads>0?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",Nt,[Object(i["createElementVNode"])("dt",null,Object(i["toDisplayString"])(e.translate("General_Downloads")),1),Object(i["createElementVNode"])("dd",null,Object(i["toDisplayString"])(e.plugin.numDownloadsPretty),1)])):Object(i["createCommentVNode"])("",!0),e.plugin.lastUpdated&&!e.plugin.isBundle?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",Vt,[Object(i["createElementVNode"])("dt",null,Object(i["toDisplayString"])(e.translate("Marketplace_LastUpdated")),1),Object(i["createElementVNode"])("dd",null,Object(i["toDisplayString"])(e.plugin.lastUpdated),1)])):Object(i["createCommentVNode"])("",!0),e.plugin.isBundle?Object(i["createCommentVNode"])("",!0):(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",Et,[Object(i["createElementVNode"])("dt",null,Object(i["toDisplayString"])(e.translate("Marketplace_Developer")),1),Object(i["createElementVNode"])("dd",null,Object(i["toDisplayString"])(e.pluginOwner),1)]))])])):Object(i["createCommentVNode"])("",!0)]),Object(i["createElementVNode"])("div",St,[Object(i["createElementVNode"])("div",Bt,[e.showMissingRequirementsNoticeIfApplicable?(Object(i["openBlock"])(),Object(i["createBlock"])(b,{key:0,plugin:e.plugin},null,8,["plugin"])):Object(i["createCommentVNode"])("",!0),e.isMultiServerEnvironment?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",Mt,Object(i["toDisplayString"])(e.translate("Marketplace_MultiServerEnvironmentWarning")),1)):e.isAutoUpdatePossible?Object(i["createCommentVNode"])("",!0):(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",wt,Object(i["toDisplayString"])(e.translate("Marketplace_AutoUpdateDisabledWarning","'[General]enable_auto_update=1'","'config/config.ini.php'")),1)),e.showMissingLicenseDescription?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",Tt,Object(i["toDisplayString"])(e.translate("Marketplace_PluginLicenseMissingDescription")),1)):e.showExceededLicenseDescription?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",Ct,Object(i["toDisplayString"])(e.translate("Marketplace_PluginLicenseExceededDescription")),1)):Object(i["createCommentVNode"])("",!0),Object(i["createElementVNode"])("div",{innerHTML:e.$sanitize(e.pluginDescription)},null,8,Pt)]),Object(i["createElementVNode"])("div",At,[Dt,Lt,Object(i["createElementVNode"])("dl",null,[e.plugin.isBundle?Object(i["createCommentVNode"])("",!0):(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",_t,[Object(i["createElementVNode"])("dt",null,Object(i["toDisplayString"])(e.translate("CorePluginsAdmin_Version")),1),Object(i["createElementVNode"])("dd",null,Object(i["toDisplayString"])(e.plugin.latestVersion),1)])),e.pluginKeywords?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",Ut,[Object(i["createElementVNode"])("dt",null,Object(i["toDisplayString"])(e.translate("Marketplace_PluginKeywords")),1),Object(i["createElementVNode"])("dd",null,Object(i["toDisplayString"])(e.pluginKeywords.join(", ")),1)])):Object(i["createCommentVNode"])("",!0),e.plugin.isBundle?Object(i["createCommentVNode"])("",!0):(Object(i["openBlock"])(),Object(i["createElementBlock"])(i["Fragment"],{key:2},[Object(i["createElementVNode"])("div",xt,[Object(i["createElementVNode"])("dt",null,Object(i["toDisplayString"])(e.translate("Marketplace_Authors")),1),Object(i["createElementVNode"])("dd",null,[(Object(i["openBlock"])(!0),Object(i["createElementBlock"])(i["Fragment"],null,Object(i["renderList"])(e.pluginAuthors,(function(t,n){return Object(i["openBlock"])(),Object(i["createElementBlock"])(i["Fragment"],{key:"author-".concat(n)},[t.homepage?(Object(i["openBlock"])(),Object(i["createElementBlock"])("a",{key:0,target:"_blank",rel:"noreferrer noopener",href:t.homepage},Object(i["toDisplayString"])(t.name),9,qt)):t.email&&e.isValidEmail(t.email)?(Object(i["openBlock"])(),Object(i["createElementBlock"])("a",{key:1,href:"mailto:".concat(encodeURIComponent(t.email))},Object(i["toDisplayString"])(t.name),9,Ft)):(Object(i["openBlock"])(),Object(i["createElementBlock"])("span",Rt,Object(i["toDisplayString"])(t.name),1)),n<e.pluginAuthors.length-1?(Object(i["openBlock"])(),Object(i["createElementBlock"])("span",It,", ")):Object(i["createCommentVNode"])("",!0)],64)})),128))])]),Object(i["createElementVNode"])("div",Kt,[Object(i["createElementVNode"])("dt",null,Object(i["toDisplayString"])(e.translate("CorePluginsAdmin_Websites")),1),Object(i["createElementVNode"])("dd",null,[e.plugin.homepage?(Object(i["openBlock"])(),Object(i["createElementBlock"])("a",{key:0,target:"_blank",rel:"noreferrer noopener",href:e.plugin.homepage},Object(i["toDisplayString"])(e.translate("Marketplace_PluginWebsite")),9,Ht)):Object(i["createCommentVNode"])("",!0),e.pluginChangelogUrl?(Object(i["openBlock"])(),Object(i["createElementBlock"])(i["Fragment"],{key:1},[e.plugin.homepage?(Object(i["openBlock"])(),Object(i["createElementBlock"])(i["Fragment"],{key:0},[$t],64)):Object(i["createCommentVNode"])("",!0),Object(i["createElementVNode"])("a",{target:"_blank",rel:"noreferrer noopener",href:e.externalRawLink(e.pluginChangelogUrl)},Object(i["toDisplayString"])(e.translate("CorePluginsAdmin_Changelog")),9,zt)],64)):Object(i["createCommentVNode"])("",!0),e.plugin.repositoryUrl?(Object(i["openBlock"])(),Object(i["createElementBlock"])(i["Fragment"],{key:2},[e.plugin.homepage||e.pluginChangelogUrl?(Object(i["openBlock"])(),Object(i["createElementBlock"])(i["Fragment"],{key:0},[Gt],64)):Object(i["createCommentVNode"])("",!0),Object(i["createElementVNode"])("a",{target:"_blank",rel:"noreferrer noopener",href:e.externalRawLink(e.plugin.repositoryUrl)},"GitHub",8,Wt)],64)):Object(i["createCommentVNode"])("",!0)])]),e.pluginActivity&&e.pluginActivity.numCommits?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",Qt,[Object(i["createElementVNode"])("dt",null,Object(i["toDisplayString"])(e.translate("CorePluginsAdmin_Activity")),1),Object(i["createElementVNode"])("dd",null,[Object(i["createTextVNode"])(Object(i["toDisplayString"])(e.plugin.activity.numCommits)+" commits ",1),(null===(o=e.pluginActivity)||void 0===o?void 0:o.numContributors)>1?(Object(i["openBlock"])(),Object(i["createElementBlock"])(i["Fragment"],{key:0},[Object(i["createTextVNode"])(Object(i["toDisplayString"])(" "+e.translate("Marketplace_ByXDevelopers",e.pluginActivity.numContributors)),1)],64)):Object(i["createCommentVNode"])("",!0),null!==(c=e.pluginActivity)&&void 0!==c&&c.lastCommitDate?(Object(i["openBlock"])(),Object(i["createElementBlock"])(i["Fragment"],{key:1},[Object(i["createTextVNode"])(Object(i["toDisplayString"])(" "+e.translate("Marketplace_LastCommitTime",e.pluginActivity.lastCommitDate)),1)],64)):Object(i["createCommentVNode"])("",!0)])])):Object(i["createCommentVNode"])("",!0),e.showLicenseName?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",Yt,[Object(i["createElementVNode"])("dt",null,Object(i["toDisplayString"])(e.translate("Marketplace_License")),1),Object(i["createElementVNode"])("dd",null,[null!==(s=e.pluginLatestVersion.license)&&void 0!==s&&s.url?(Object(i["openBlock"])(),Object(i["createElementBlock"])("a",{key:0,rel:"noreferrer noopener",href:null===(u=e.pluginLatestVersion.license)||void 0===u?void 0:u.url,target:"_blank"},Object(i["toDisplayString"])(null===(d=e.pluginLatestVersion.license)||void 0===d?void 0:d.name),9,Jt)):(Object(i["openBlock"])(),Object(i["createElementBlock"])("span",Zt,Object(i["toDisplayString"])(null===(p=e.pluginLatestVersion.license)||void 0===p?void 0:p.name),1))])])):Object(i["createCommentVNode"])("",!0),e.pluginSupport.length?(Object(i["openBlock"])(!0),Object(i["createElementBlock"])(i["Fragment"],{key:2},Object(i["renderList"])(e.pluginSupport,(function(t,n){return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",{class:"pair",key:"support-".concat(n)},[t.name&&t.value?(Object(i["openBlock"])(),Object(i["createElementBlock"])(i["Fragment"],{key:0},[Object(i["createElementVNode"])("dt",{innerHTML:e.$sanitize(t.name)},null,8,Xt),m.isValidHttpUrl(t.value)?(Object(i["openBlock"])(),Object(i["createElementBlock"])("dd",en,[Object(i["createElementVNode"])("a",{target:"_blank",rel:"noreferrer noopener",href:e.externalRawLink(e.$sanitize(t.value))},Object(i["toDisplayString"])(e.$sanitize(t.value)),9,tn)])):m.isValidEmail(t.value)?(Object(i["openBlock"])(),Object(i["createElementBlock"])("dd",nn,[Object(i["createElementVNode"])("a",{href:"mailto:".concat(encodeURIComponent(t.value))},Object(i["toDisplayString"])(e.$sanitize(t.value)),9,an)])):(Object(i["openBlock"])(),Object(i["createElementBlock"])("dd",{key:2,innerHTML:e.$sanitize(t.value)},null,8,ln))],64)):Object(i["createCommentVNode"])("",!0)])})),128)):Object(i["createCommentVNode"])("",!0)],64))])]),e.pluginScreenshots.length?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",rn,[on,Object(i["createElementVNode"])("h3",null,Object(i["toDisplayString"])(e.translate("Marketplace_Screenshots")),1),Object(i["createElementVNode"])("div",cn,[(Object(i["openBlock"])(!0),Object(i["createElementBlock"])(i["Fragment"],null,Object(i["renderList"])(e.pluginScreenshots,(function(e){return Object(i["openBlock"])(),Object(i["createElementBlock"])("figure",{key:"screenshot-".concat(e)},[Object(i["createElementVNode"])("img",{src:"".concat(e,"?w=800"),width:"800",alt:""},null,8,sn),Object(i["createElementVNode"])("figcaption",null,Object(i["toDisplayString"])(m.getScreenshotBaseName(e)),1)])})),128))])])):Object(i["createCommentVNode"])("",!0),e.pluginDocumentation?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",un,[dn,Object(i["createElementVNode"])("h3",null,Object(i["toDisplayString"])(e.translate("General_Documentation")),1),Object(i["createElementVNode"])("div",{innerHTML:e.$sanitize(e.pluginDocumentation)},null,8,pn)])):Object(i["createCommentVNode"])("",!0),e.pluginFaq?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",mn,[bn,Object(i["createElementVNode"])("h3",null,Object(i["toDisplayString"])(e.translate("General_Faq")),1),Object(i["createElementVNode"])("div",{innerHTML:e.$sanitize(e.pluginFaq)},null,8,gn)])):Object(i["createCommentVNode"])("",!0),e.showReviews?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",On,[jn,Object(i["createElementVNode"])("h3",null,Object(i["toDisplayString"])(e.translate("Marketplace_Reviews")),1),Object(i["createElementVNode"])("iframe",{class:"reviewIframe",style:Object(i["normalizeStyle"])(e.pluginReviews.height?"height: ".concat(e.pluginReviews.height,"px;"):""),id:e.pluginReviews.embedUrl.replace(/[\W_]+/g," "),src:e.pluginReviews.embedUrl},null,12,hn)])):Object(i["createCommentVNode"])("",!0)]),Object(i["createElementVNode"])("div",kn,[Object(i["createElementVNode"])("div",vn,[Object(i["createVNode"])(g,{"is-super-user":e.isSuperUser,"is-plugins-admin-enabled":e.isPluginsAdminEnabled,"is-multi-server-environment":e.isMultiServerEnvironment,"is-valid-consumer":e.isValidConsumer,"is-auto-update-possible":e.isAutoUpdatePossible,"activate-nonce":e.activateNonce,"deactivate-nonce":e.deactivateNonce,"install-nonce":e.installNonce,"update-nonce":e.updateNonce,plugin:e.plugin,"in-modal":!0,onRequestTrial:t[1]||(t[1]=function(t){return e.emitTrialEvent("requestTrial")}),onStartFreeTrial:t[2]||(t[2]=function(t){return e.emitTrialEvent("startFreeTrial")})},null,8,["is-super-user","is-plugins-admin-enabled","is-multi-server-environment","is-valid-consumer","is-auto-update-possible","activate-nonce","deactivate-nonce","install-nonce","update-nonce","plugin"])]),"piwik"==e.plugin.owner||"matomo-org"==e.plugin.owner?(Object(i["openBlock"])(),Object(i["createElementBlock"])("img",yn)):Object(i["createCommentVNode"])("",!0)])],2))],512)}function Nn(e,t,n,a,l,r){return Object(i["openBlock"])(!0),Object(i["createElementBlock"])(i["Fragment"],null,Object(i["renderList"])(e.plugin.missingRequirements||[],(function(t,n){return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",{key:n,class:"alert alert-danger"},Object(i["toDisplayString"])(e.translate("CorePluginsAdmin_MissingRequirementsNotice",e.requirement(t.requirement),t.actualVersion,t.requiredVersion)),1)})),128)}var Vn=Object(i["defineComponent"])({props:{plugin:{type:Object,required:!0}},methods:{requirement:function(e){return"php"===e?"PHP":"".concat(e[0].toUpperCase()).concat(e.substr(1))}}});Vn.render=Nn;var En=Vn,Sn=window,Bn=Sn.$,Mn=Object(i["defineComponent"])({components:{MissingReqsNotice:En,CTAContainer:Ne},props:{modelValue:{type:Object,default:function(){return{}}},activateNonce:{type:String,required:!0},deactivateNonce:{type:String,required:!0},installNonce:{type:String,required:!0},updateNonce:{type:String,required:!0},isAutoUpdatePossible:{type:Boolean,required:!0},isValidConsumer:{type:Boolean,required:!0},isMultiServerEnvironment:{type:Boolean,required:!0},isPluginsAdminEnabled:{type:Boolean,required:!0},isSuperUser:{type:Boolean,required:!0},hasSomeAdminAccess:{type:Boolean,required:!0}},data:function(){return{isLoading:!0}},emits:["requestTrial","startFreeTrial","update:modelValue"],watch:{modelValue:function(e){e&&this.showPluginDetailsDialog()},isLoading:function(e){!1===e&&(this.applyExternalTarget(),this.applyIframeResize())}},computed:{plugin:function(){return this.modelValue},pluginLatestVersion:function(){var e=this.plugin.versions||[{}];return e[e.length-1]},pluginReadmeHtml:function(){var e;return(null===(e=this.pluginLatestVersion)||void 0===e?void 0:e.readmeHtml)||{}},pluginDescription:function(){var e;return(null===(e=this.pluginReadmeHtml)||void 0===e?void 0:e.description)||""},pluginDocumentation:function(){var e;return(null===(e=this.pluginReadmeHtml)||void 0===e?void 0:e.documentation)||""},pluginFaq:function(){var e;return(null===(e=this.pluginReadmeHtml)||void 0===e?void 0:e.faq)||""},pluginShop:function(){return this.plugin.shop},pluginReviews:function(){var e;return(null===(e=this.pluginShop)||void 0===e?void 0:e.reviews)||{}},pluginKeywords:function(){var e;return(null===(e=this.plugin)||void 0===e?void 0:e.keywords)||[]},pluginAuthors:function(){var e=this.plugin.authors||[];return e.filter((function(e){return e.name}))},pluginActivity:function(){return this.plugin.activity||{}},pluginChangelogUrl:function(){return this.plugin.changelog.url||""},pluginSupport:function(){return this.plugin.support||[]},isMatomoPlugin:function(){return["piwik","matomo-org"].includes(this.plugin.owner)},pluginOwner:function(){return this.isMatomoPlugin?"Matomo":this.plugin.owner},showReviews:function(){return this.pluginReviews&&this.pluginReviews.embedUrl&&this.pluginReviews.averageRating},showMissingLicenseDescription:function(){return this.hasSomeAdminAccess&&this.plugin.isMissingLicense},showExceededLicenseDescription:function(){return this.hasSomeAdminAccess&&this.plugin.hasExceededLicense},showMissingRequirementsNoticeIfApplicable:function(){return this.isSuperUser&&(this.plugin.isDownloadable||this.plugin.isInstalled)},showLicenseName:function(){var e,t=(null===(e=this.pluginLatestVersion)||void 0===e?void 0:e.license)||{};return!!t.name},pluginScreenshots:function(){return this.plugin.screenshots||[]},hasHeaderMetadata:function(){return this.showReviews||!this.plugin.isBundle||(this.plugin.numDownloads||0)>0||this.plugin.lastUpdated&&!this.plugin.isBundle}},methods:{applyExternalTarget:function(){var e=this;setTimeout((function(){var t=e.$refs.root;Bn(".modal-content__main a",t).each((function(e,t){var n=Bn(t).attr("href");n&&0===n.indexOf("http")&&Bn(t).attr("target","_blank")}))}))},scrollElementIntoView:function(e){var t=this;setTimeout((function(){var n=t.$refs.root,a=Bn(e,n);a.length&&a[0]&&a[0].scrollIntoView&&a[0].scrollIntoView({block:"nearest",behavior:"smooth"})}))},isValidEmail:function(e){return e.match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|.(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)},isValidHttpUrl:function(e){try{var t=new URL(e);return"http:"===t.protocol||"https:"===t.protocol}catch(n){return!1}},getProtocolAndDomain:function(e){var t=new URL(e);return"".concat(t.protocol,"//").concat(t.hostname)},applyIframeResize:function(){var e=this;setTimeout((function(){var t=window,n=t.iFrameResize;e.pluginReviews&&Bn((function(){for(var t=Bn("#pluginDetailsModal iframe.reviewIframe"),a=0;a<t.length;a+=1)n({checkOrigin:[e.getProtocolAndDomain(e.pluginReviews.embedUrl)]},t[a])}))}))},getScreenshotBaseName:function(e){var t=e.split("/").pop()||"";return t.substring(0,t.lastIndexOf(".")).split("_").join(" ")},emitTrialEvent:function(e){var t=this,n=this.plugin;Bn("#pluginDetailsModal").modal("close"),setTimeout((function(){t.$emit(e,n)}),250)},enablePageScroll:function(){Bn("html").css({overflow:"","margin-right":""})},disablePageScroll:function(){var e=Bn("html"),t=e.width()||0;e.css({overflow:"hidden"});var n=e.width()||0,a=Math.max(0,n-t);a&&e.css({"margin-right":"".concat(a,"px")})},showPluginDetailsDialog:function(){var e=this;Bn("#pluginDetailsModal").modal({dismissible:!0,onOpenStart:function(){e.disablePageScroll()},onCloseEnd:function(){b["MatomoUrl"].updateHash(Object.assign(Object.assign({},b["MatomoUrl"].hashParsed.value),{},{showPlugin:null})),e.$emit("update:modelValue",null),e.isLoading=!0,e.enablePageScroll()}}).modal("open"),setTimeout((function(){e.isLoading=!1}),10)}}});Mn.render=fn;var wn=Mn;function Tn(e,t){return Ln(e)||Dn(e,t)||Pn(e,t)||Cn()}function Cn(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Pn(e,t){if(e){if("string"===typeof e)return An(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?An(e,t):void 0}}function An(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function Dn(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,l,i=[],r=!0,o=!1;try{for(n=n.call(e);!(r=(a=n.next()).done);r=!0)if(i.push(a.value),t&&i.length===t)break}catch(c){o=!0,l=c}finally{try{r||null==n["return"]||n["return"]()}finally{if(o)throw l}}return i}}function Ln(e){if(Array.isArray(e))return e}var _n=window,Un=_n.$,xn=Object(i["defineComponent"])({props:{currentUserEmail:String,pluginsToShow:{type:Array,required:!0},isAutoUpdatePossible:{type:Boolean,required:!0},isSuperUser:{type:Boolean,required:!0},isValidConsumer:{type:Boolean,required:!0},isMultiServerEnvironment:{type:Boolean,required:!0},isPluginsAdminEnabled:{type:Boolean,required:!0},hasSomeAdminAccess:{type:Boolean,required:!0},activateNonce:{type:String,required:!0},deactivateNonce:{type:String,required:!0},installNonce:{type:String,required:!0},updateNonce:{type:String,required:!0}},data:function(){return{showRequestTrialForPlugin:null,showStartFreeTrialForPlugin:null,showPluginDetailsForPlugin:null}},components:{PluginDetailsModal:wn,CTAContainer:Ne,RequestTrial:We,StartFreeTrial:bt},emits:["triggerUpdate"],watch:{pluginsToShow:function(e,t){e&&e!==t&&(this.shrinkDescriptionIfMultilineTitle(),this.parseShowPluginParameter())}},mounted:function(){var e=this;Un(window).resize((function(){e.shrinkDescriptionIfMultilineTitle()})),Object(i["watch"])((function(){return b["MatomoUrl"].hashParsed.value.showPlugin}),(function(t,n){t&&t!==n&&e.parseShowPluginParameter()})),this.parseShowPluginParameter()},methods:{parseShowPluginParameter:function(){var e=b["MatomoUrl"].hashParsed.value,t=e.showPlugin,n=e.pluginType,a=e.query;if(t){var l=this.pluginsToShow.filter((function(e){return e.name===t}));if(1===l.length){var i=Tn(l,1),r=i[0];this.openDetailsModal(r),this.scrollPluginCardIntoView(r)}else""===n&&""===a||b["MatomoUrl"].updateHash(Object.assign(Object.assign({},b["MatomoUrl"].hashParsed.value),{},{pluginType:"plugins",query:null}))}},shrinkDescriptionIfMultilineTitle:function(){var e=Un(".marketplace .card-holder");e&&e.length&&e.each((function(e,t){var n=Un(t),a=n.find(".card-title"),l=n.find(".card-content-bottom .alert"),i=n.hasClass("card-with-downloads"),r=1;if(a.length){var o,c=+a.height(),s=+a.css("line-height").replace("px","");if(s)r=null!==(o=Math.ceil(c/s))&&void 0!==o?o:1}var u=0;if(l.length){var d,p=+l.height(),m=+l.css("line-height").replace("px","");if(m)u=null!==(d=Math.ceil(p/m))&&void 0!==d?d:1}var b=n.find(".card-description");if(b.length){var g=b[0],O=0;i?((r>=2||u>2||r+u>=4)&&(O=2),r+u>=5&&(O=1)):r+u>=5&&(O=2),O?g.setAttribute("data-clamp","".concat(O)):g.removeAttribute("data-clamp")}}))},clickCard:function(e,t){Un(e.target).closest("a:not(.card-title-link)").length||(e.stopPropagation(),this.openDetailsModal(t))},openDetailsModal:function(e){this.showPluginDetailsForPlugin=e},scrollPluginCardIntoView:function(e){var t=Un('.pluginListContainer .card-title:contains("'.concat(e.displayName,'")'));if(1===t.length){var n=t.parents(".card");1===n.length&&n[0].scrollIntoView&&n[0].scrollIntoView({block:"start",behavior:"smooth"})}}}});xn.render=D;var qn=xn,Fn=function(e){return"".concat(e[0].toLowerCase()).concat(e.substring(1))},Rn=Object(i["defineComponent"])({props:{pluginTypeOptions:{type:Object,required:!0},defaultSort:{type:String,required:!0},pluginSortOptions:{type:Object,required:!0},numAvailablePluginsByType:{type:Object,required:!0},currentUserEmail:String,isValidConsumer:Boolean,isSuperUser:Boolean,isAutoUpdatePossible:Boolean,isPluginsAdminEnabled:Boolean,isMultiServerEnvironment:Boolean,hasSomeAdminAccess:Boolean,installNonce:{type:String,required:!0},activateNonce:{type:String,required:!0},deactivateNonce:{type:String,required:!0},updateNonce:{type:String,required:!0}},components:{ContentBlock:b["ContentBlock"],PluginList:qn,Field:g["Field"]},data:function(){return{loading:!1,fetchRequest:null,fetchRequestAbortController:null,pluginSort:this.defaultSort,pluginTypeFilter:"plugins",searchQuery:"",pluginsToShow:[]}},mounted:function(){var e=this;b["Matomo"].postEvent("Marketplace.Marketplace.mounted",{element:this.$refs.root}),Object(i["watch"])((function(){return b["MatomoUrl"].hashParsed.value}),(function(){e.updateValuesFromHash(!1)})),this.updateValuesFromHash(!0)},unmounted:function(){b["Matomo"].postEvent("Marketplace.Marketplace.unmounted",{element:this.$refs.root})},methods:{updateValuesFromHash:function(e){var t=e,n=b["MatomoUrl"].hashParsed.value.query||"",a=b["MatomoUrl"].hashParsed.value.sort||"",l=b["MatomoUrl"].hashParsed.value.pluginType||"";(n||this.searchQuery)&&(t=t||n!==this.searchQuery,this.searchQuery=n),a&&(t=t||a!==this.pluginSort,this.pluginSort=a),l&&(t=t||l!==this.pluginTypeFilter,this.pluginTypeFilter=l),t&&this.fetchPlugins()},updateQuery:function(e){b["MatomoUrl"].updateHash(Object.assign(Object.assign({},b["MatomoUrl"].hashParsed.value),{},{query:e}))},updateType:function(e){b["MatomoUrl"].updateHash(Object.assign(Object.assign({},b["MatomoUrl"].hashParsed.value),{},{pluginType:e}))},updateSort:function(e){b["MatomoUrl"].updateHash(Object.assign(Object.assign({},b["MatomoUrl"].hashParsed.value),{},{sort:e}))},fetchPlugins:function(){var e=this;this.loading=!0,this.pluginsToShow=[],this.fetchRequestAbortController&&(this.fetchRequestAbortController.abort(),this.fetchRequestAbortController=null),this.fetchRequestAbortController=new AbortController,this.fetchRequest=b["AjaxHelper"].post({module:"Marketplace",action:"searchPlugins",format:"JSON"},{query:this.searchQuery,sort:this.pluginSort,themesOnly:this.showThemes,purchaseType:"premium"===this.pluginTypeFilter?"paid":""},{withTokenInUrl:!0,abortController:this.fetchRequestAbortController}).then((function(t){e.pluginsToShow=t})).finally((function(){e.loading=!1,e.fetchRequestAbortController=null}))}},computed:{queryInputTitle:function(){var e=Fn(Object(b["translate"])("General_Plugins")),t=this.numAvailablePluginsByType[this.pluginTypeFilter]||0;return"".concat(Object(b["translate"])("General_Search")," ").concat(t," ").concat(e,"...")},loadingMessage:function(){return Object(b["translate"])("Mobile_LoadingReport",Object(b["translate"])(this.showThemes?"CorePluginsAdmin_Themes":"General_Plugins"))},showThemes:function(){return"themes"===this.pluginTypeFilter}}});Rn.render=m;var In=Rn,Kn={class:"marketplace-max-width"},Hn={class:"marketplace-paid-intro"},$n={key:0},zn={key:0},Gn=Object(i["createElementVNode"])("br",null,null,-1),Wn={class:"licenseToolbar valign-wrapper"},Qn=["href"],Yn={key:0},Jn={class:"ui-confirm",id:"installAllPaidPluginsAtOnce",ref:"installAllPaidPluginsAtOnce"},Zn=Object(i["createElementVNode"])("br",null,null,-1),Xn=Object(i["createElementVNode"])("br",null,null,-1),ea=["data-href","value"],ta=["value"],na={key:1},aa={key:0},la=["innerHTML"],ia=Object(i["createElementVNode"])("br",null,null,-1),ra={class:"licenseToolbar valign-wrapper"},oa={key:1},ca=["innerHTML"],sa={class:"ui-confirm",id:"confirmRemoveLicense",ref:"confirmRemoveLicense"},ua=["value"],da=["value"];function pa(e,t,n,a,l,r){var o=Object(i["resolveComponent"])("DefaultLicenseKeyFields"),c=Object(i["resolveComponent"])("SaveButton"),s=Object(i["resolveComponent"])("ActivityIndicator");return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",Kn,[Object(i["createElementVNode"])("div",Hn,[e.isValidConsumer?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",$n,[e.isSuperUser?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",zn,[Object(i["createTextVNode"])(Object(i["toDisplayString"])(e.translate("Marketplace_PaidPluginsWithLicenseKeyIntro",""))+" ",1),Gn,Object(i["createElementVNode"])("div",Wn,[Object(i["createVNode"])(o,{"model-value":e.licenseKey,"onUpdate:modelValue":t[0]||(t[0]=function(t){e.licenseKey=t,e.updatedLicenseKey()}),onConfirm:t[1]||(t[1]=function(t){return e.updateLicense()}),"has-license-key":e.hasLicenseKey,"is-valid-consumer":e.isValidConsumer,"enable-update":e.enableUpdate},null,8,["model-value","has-license-key","is-valid-consumer","enable-update"]),Object(i["createVNode"])(c,{class:"valign",id:"remove_license_key",onConfirm:t[2]||(t[2]=function(t){return e.removeLicense()}),value:e.translate("Marketplace_RemoveLicenseKey")},null,8,["value"]),Object(i["createElementVNode"])("a",{class:"btn valign",href:e.subscriptionOverviewLink},Object(i["toDisplayString"])(e.translate("Marketplace_ViewSubscriptions")),9,Qn),e.showInstallAllPaidPlugins?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",Yn,[Object(i["createElementVNode"])("a",{href:"",class:"btn installAllPaidPlugins valign",onClick:t[3]||(t[3]=Object(i["withModifiers"])((function(t){return e.onInstallAllPaidPlugins()}),["prevent"]))},Object(i["toDisplayString"])(e.translate("Marketplace_InstallPurchasedPlugins")),1),Object(i["createElementVNode"])("div",Jn,[Object(i["createElementVNode"])("h2",null,Object(i["toDisplayString"])(e.translate("Marketplace_InstallAllPurchasedPlugins")),1),Object(i["createElementVNode"])("p",null,[Object(i["createTextVNode"])(Object(i["toDisplayString"])(e.translate("Marketplace_InstallThesePlugins"))+" ",1),Zn,Xn]),Object(i["createElementVNode"])("ul",null,[(Object(i["openBlock"])(!0),Object(i["createElementBlock"])(i["Fragment"],null,Object(i["renderList"])(e.paidPluginsToInstallAtOnce,(function(e){return Object(i["openBlock"])(),Object(i["createElementBlock"])("li",{key:e},Object(i["toDisplayString"])(e),1)})),128))]),Object(i["createElementVNode"])("p",null,[Object(i["createElementVNode"])("input",{role:"install",type:"button","data-href":e.installAllPaidPluginsLink,value:e.translate("Marketplace_InstallAllPurchasedPluginsAction",e.paidPluginsToInstallAtOnce.length)},null,8,ea),Object(i["createElementVNode"])("input",{role:"cancel",type:"button",value:e.translate("General_Cancel")},null,8,ta)])],512)])):Object(i["createCommentVNode"])("",!0)]),Object(i["createVNode"])(s,{loading:e.isUpdating},null,8,["loading"])])):Object(i["createCommentVNode"])("",!0)])):(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",na,[e.isSuperUser?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",aa,[Object(i["createElementVNode"])("span",{innerHTML:e.$sanitize(e.noLicenseKeyIntroText)},null,8,la),ia,Object(i["createElementVNode"])("div",ra,[Object(i["createVNode"])(o,{"model-value":e.licenseKey,"onUpdate:modelValue":t[4]||(t[4]=function(t){e.licenseKey=t,e.updatedLicenseKey()}),onConfirm:t[5]||(t[5]=function(t){return e.updateLicense()}),"has-license-key":e.hasLicenseKey,"is-valid-consumer":e.isValidConsumer,"enable-update":e.enableUpdate},null,8,["model-value","has-license-key","is-valid-consumer","enable-update"])]),Object(i["createVNode"])(s,{loading:e.isUpdating},null,8,["loading"])])):(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",oa,[Object(i["createElementVNode"])("span",{innerHTML:e.$sanitize(e.noLicenseKeyIntroNoSuperUserAccessText)},null,8,ca)]))]))]),Object(i["createElementVNode"])("div",sa,[Object(i["createElementVNode"])("h2",null,Object(i["toDisplayString"])(e.translate("Marketplace_ConfirmRemoveLicense")),1),Object(i["createElementVNode"])("input",{role:"yes",type:"button",value:e.translate("General_Yes")},null,8,ua),Object(i["createElementVNode"])("input",{role:"no",type:"button",value:e.translate("General_No")},null,8,da)],512)])}var ma={class:"valign licenseKeyText"};function ba(e,t,n,a,l,r){var o=Object(i["resolveComponent"])("Field"),c=Object(i["resolveComponent"])("SaveButton");return Object(i["openBlock"])(),Object(i["createElementBlock"])(i["Fragment"],null,[Object(i["createElementVNode"])("div",ma,[Object(i["createVNode"])(o,{uicontrol:"text",name:"license_key","full-width":!0,"model-value":e.modelValue,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.$emit("update:modelValue",t)}),placeholder:e.licenseKeyPlaceholder},null,8,["model-value","placeholder"])]),Object(i["createVNode"])(c,{class:"valign",onConfirm:t[1]||(t[1]=function(t){return e.$emit("confirm")}),disabled:!e.enableUpdate,value:e.saveButtonText,id:"submit_license_key"},null,8,["disabled","value"])],64)}var ga=Object(i["defineComponent"])({props:{modelValue:String,isValidConsumer:Boolean,hasLicenseKey:Boolean,enableUpdate:Boolean},emits:["update:modelValue","confirm"],components:{Field:g["Field"],SaveButton:g["SaveButton"]},computed:{licenseKeyPlaceholder:function(){return this.isValidConsumer?Object(b["translate"])("Marketplace_LicenseKeyIsValidShort"):Object(b["translate"])("Marketplace_LicenseKey")},saveButtonText:function(){return this.hasLicenseKey?Object(b["translate"])("CoreUpdater_UpdateTitle"):Object(b["translate"])("Marketplace_ActivateLicenseKey")}}});ga.render=ba;var Oa=ga,ja=Object(i["defineComponent"])({props:{isValidConsumer:Boolean,isSuperUser:Boolean,isAutoUpdatePossible:Boolean,isPluginsAdminEnabled:Boolean,hasLicenseKey:Boolean,paidPluginsToInstallAtOnce:{type:Array,required:!0},installNonce:{type:String,required:!0}},components:{SaveButton:g["SaveButton"],ActivityIndicator:b["ActivityIndicator"],DefaultLicenseKeyFields:Oa},data:function(){return{licenseKey:"",enableUpdate:!1,isUpdating:!1}},methods:{onInstallAllPaidPlugins:function(){b["Matomo"].helper.modalConfirm(this.$refs.installAllPaidPluginsAtOnce)},updateLicenseKey:function(e,t,n){var a=this;b["AjaxHelper"].post({module:"API",method:"Marketplace.".concat(e),format:"JSON"},{licenseKey:this.licenseKey},{withTokenInUrl:!0}).then((function(e){a.isUpdating=!1,e&&e.value&&(b["NotificationsStore"].show({message:n,context:"success",type:"transient"}),b["Matomo"].helper.redirect())}),(function(){a.isUpdating=!1}))},removeLicense:function(){var e=this;b["Matomo"].helper.modalConfirm(this.$refs.confirmRemoveLicense,{yes:function(){e.enableUpdate=!1,e.isUpdating=!0,e.updateLicenseKey("deleteLicenseKey","",Object(b["translate"])("Marketplace_LicenseKeyDeletedSuccess"))}})},updatedLicenseKey:function(){this.enableUpdate=!!this.licenseKey},updateLicense:function(){this.enableUpdate=!1,this.isUpdating=!0,this.updateLicenseKey("saveLicenseKey",this.licenseKey,Object(b["translate"])("Marketplace_LicenseKeyActivatedSuccess"))}},computed:{subscriptionOverviewLink:function(){return"?".concat(b["MatomoUrl"].stringify(Object.assign(Object.assign({},b["MatomoUrl"].urlParsed.value),{},{module:"Marketplace",action:"subscriptionOverview"})))},noLicenseKeyIntroText:function(){return Object(b["translate"])("Marketplace_PaidPluginsNoLicenseKeyIntro",Object(b["externalLink"])("https://matomo.org/recommends/premium-plugins/"),"</a>")},noLicenseKeyIntroNoSuperUserAccessText:function(){return Object(b["translate"])("Marketplace_PaidPluginsNoLicenseKeyIntroNoSuperUserAccess",Object(b["externalLink"])("https://matomo.org/recommends/premium-plugins/"),"</a>")},installAllPaidPluginsLink:function(){return"?".concat(b["MatomoUrl"].stringify(Object.assign(Object.assign({},b["MatomoUrl"].urlParsed.value),{},{module:"Marketplace",action:"installAllPaidPlugins",nonce:this.installNonce})))},showInstallAllPaidPlugins:function(){return this.isAutoUpdatePossible&&this.isPluginsAdminEnabled&&this.paidPluginsToInstallAtOnce.length}}});ja.render=pa;var ha=ja,ka=["innerHTML"],va={class:"manage-license-key-input"},ya={class:"ui-confirm",id:"confirmRemoveLicense",ref:"confirmRemoveLicense"},fa=["value"],Na=["value"];function Va(e,t,n,a,l,r){var o=Object(i["resolveComponent"])("Field"),c=Object(i["resolveComponent"])("SaveButton"),s=Object(i["resolveComponent"])("ActivityIndicator"),u=Object(i["resolveComponent"])("ContentBlock");return Object(i["openBlock"])(),Object(i["createElementBlock"])(i["Fragment"],null,[Object(i["createVNode"])(u,{"content-title":e.translate("Marketplace_LicenseKey"),class:"manage-license-key"},{default:Object(i["withCtx"])((function(){return[Object(i["createElementVNode"])("div",{class:"manage-license-key-intro",innerHTML:e.$sanitize(e.manageLicenseKeyIntro)},null,8,ka),Object(i["createElementVNode"])("div",va,[Object(i["createVNode"])(o,{uicontrol:"text",name:"license_key",modelValue:e.licenseKey,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.licenseKey=t}),placeholder:e.licenseKeyPlaceholder,"full-width":!0},null,8,["modelValue","placeholder"])]),Object(i["createVNode"])(c,{onConfirm:t[1]||(t[1]=function(t){return e.updateLicense()}),value:e.saveButtonText,disabled:!e.licenseKey||e.isUpdating,id:"submit_license_key"},null,8,["value","disabled"]),e.hasValidLicense?(Object(i["openBlock"])(),Object(i["createBlock"])(c,{key:0,id:"remove_license_key",onConfirm:t[2]||(t[2]=function(t){return e.removeLicense()}),disabled:e.isUpdating,value:e.translate("General_Remove")},null,8,["disabled","value"])):Object(i["createCommentVNode"])("",!0),Object(i["createVNode"])(s,{loading:e.isUpdating},null,8,["loading"])]})),_:1},8,["content-title"]),Object(i["createElementVNode"])("div",ya,[Object(i["createElementVNode"])("h2",null,Object(i["toDisplayString"])(e.translate("Marketplace_ConfirmRemoveLicense")),1),Object(i["createElementVNode"])("input",{role:"yes",type:"button",value:e.translate("General_Yes")},null,8,fa),Object(i["createElementVNode"])("input",{role:"no",type:"button",value:e.translate("General_No")},null,8,Na)],512)],64)}var Ea=Object(i["defineComponent"])({props:{hasValidLicenseKey:Boolean},components:{Field:g["Field"],ContentBlock:b["ContentBlock"],SaveButton:g["SaveButton"],ActivityIndicator:b["ActivityIndicator"]},data:function(){return{licenseKey:"",hasValidLicense:this.hasValidLicenseKey,isUpdating:!1}},methods:{updateLicenseKey:function(e,t,n){var a=this;b["NotificationsStore"].remove("ManageLicenseKeySuccess"),b["AjaxHelper"].post({module:"API",method:"Marketplace.".concat(e),format:"JSON"},{licenseKey:this.licenseKey},{withTokenInUrl:!0}).then((function(t){a.isUpdating=!1,t&&t.value&&(b["NotificationsStore"].show({id:"ManageLicenseKeySuccess",message:n,context:"success",type:"toast"}),a.hasValidLicense="deleteLicenseKey"!==e,a.licenseKey="")}),(function(){a.isUpdating=!1}))},removeLicense:function(){var e=this;b["Matomo"].helper.modalConfirm(this.$refs.confirmRemoveLicense,{yes:function(){e.isUpdating=!0,e.updateLicenseKey("deleteLicenseKey","",Object(b["translate"])("Marketplace_LicenseKeyDeletedSuccess"))}})},updateLicense:function(){this.isUpdating=!0,this.updateLicenseKey("saveLicenseKey",this.licenseKey,Object(b["translate"])("Marketplace_LicenseKeyActivatedSuccess"))}},computed:{manageLicenseKeyIntro:function(){var e="?".concat(b["MatomoUrl"].stringify(Object.assign(Object.assign({},b["MatomoUrl"].urlParsed.value),{},{module:"Marketplace",action:"overview"})));return Object(b["translate"])("Marketplace_ManageLicenseKeyIntro",'<a href="'.concat(e,'">'),"</a>",Object(b["externalLink"])("https://shop.matomo.org/my-account"),"</a>")},licenseKeyPlaceholder:function(){return this.hasValidLicense?Object(b["translate"])("Marketplace_LicenseKeyIsValidShort"):Object(b["translate"])("Marketplace_LicenseKey")},saveButtonText:function(){return this.hasValidLicense?Object(b["translate"])("CoreUpdater_UpdateTitle"):Object(b["translate"])("Marketplace_ActivateLicenseKey")}}});Ea.render=Va;var Sa=Ea,Ba={class:"getNewPlugins"},Ma={class:"row"},wa={class:"pluginName"},Ta=Object(i["createElementVNode"])("br",null,null,-1),Ca={key:0},Pa=Object(i["createElementVNode"])("br",null,null,-1),Aa=Object(i["createElementVNode"])("br",null,null,-1),Da=[Pa,Aa],La={class:"widgetBody"},_a=["href"];function Ua(e,t,n,a,l,r){var o=Object(i["resolveDirective"])("plugin-name");return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",Ba,[Object(i["createElementVNode"])("div",Ma,[(Object(i["openBlock"])(!0),Object(i["createElementBlock"])(i["Fragment"],null,Object(i["renderList"])(e.plugins,(function(t,n){return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",{class:"col s12",key:t.name},[Object(i["withDirectives"])(Object(i["createElementVNode"])("h3",wa,[Object(i["createTextVNode"])(Object(i["toDisplayString"])(t.displayName),1)],512),[[o,{pluginName:t.name}]]),Object(i["createElementVNode"])("span",null,[Object(i["createTextVNode"])(Object(i["toDisplayString"])(t.description)+" ",1),Ta,Object(i["withDirectives"])(Object(i["createElementVNode"])("a",null,[Object(i["createTextVNode"])(Object(i["toDisplayString"])(e.translate("General_MoreDetails")),1)],512),[[o,{pluginName:t.name}]])]),n<e.plugins.length-1?(Object(i["openBlock"])(),Object(i["createElementBlock"])("span",Ca,Da)):Object(i["createCommentVNode"])("",!0)])})),128))]),Object(i["createElementVNode"])("div",La,[Object(i["createElementVNode"])("a",{href:e.overviewLink},Object(i["toDisplayString"])(e.translate("CorePluginsAdmin_ViewAllMarketplacePlugins")),9,_a)])])}var xa=Object(i["defineComponent"])({props:{plugins:{type:Array,required:!0}},directives:{PluginName:g["PluginName"]},computed:{overviewLink:function(){return"?".concat(b["MatomoUrl"].stringify(Object.assign(Object.assign({},b["MatomoUrl"].urlParsed.value),{},{module:"Marketplace",action:"overview"})))}}});xa.render=Ua;var qa=xa,Fa={class:"getNewPlugins isAdminPage",ref:"root"},Ra={class:"row"},Ia=["title"],Ka=["title"],Ha={key:0},$a=Object(i["createElementVNode"])("br",null,null,-1),za=["src"],Ga={class:"widgetBody"},Wa=["href"];function Qa(e,t,n,a,l,r){var o=Object(i["resolveDirective"])("plugin-name");return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",Fa,[Object(i["createElementVNode"])("div",Ra,[(Object(i["openBlock"])(!0),Object(i["createElementBlock"])(i["Fragment"],null,Object(i["renderList"])(e.plugins,(function(e){var t;return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",{class:"col s12 m4",key:e.name},[Object(i["withDirectives"])(Object(i["createElementVNode"])("h3",{class:"pluginName",title:e.description},[Object(i["createTextVNode"])(Object(i["toDisplayString"])(e.displayName),1)],8,Ia),[[o,{pluginName:e.name}]]),Object(i["createElementVNode"])("p",{class:"description",title:e.description},Object(i["toDisplayString"])(e.description),9,Ka),null!==(t=e.screenshots)&&void 0!==t&&t.length?(Object(i["openBlock"])(),Object(i["createElementBlock"])("span",Ha,[$a,Object(i["withDirectives"])(Object(i["createElementVNode"])("img",{class:"screenshot",src:"".concat(e.screenshots[0],"?w=600"),style:{width:"100%"},alt:""},null,8,za),[[o,{pluginName:e.name}]])])):Object(i["createCommentVNode"])("",!0)])})),128))]),Object(i["createElementVNode"])("div",Ga,[Object(i["createElementVNode"])("a",{href:e.marketplaceOverviewLink},Object(i["toDisplayString"])(e.translate("CorePluginsAdmin_ViewAllMarketplacePlugins")),9,Wa)])],512)}var Ya=Object(i["defineComponent"])({props:{plugins:{type:Array,required:!0}},directives:{PluginName:g["PluginName"]},computed:{marketplaceOverviewLink:function(){return"?".concat(b["MatomoUrl"].stringify({module:"Marketplace",action:"overview"}))}}});Ya.render=Qa;var Ja=Ya,Za={class:"getNewPlugins getPremiumFeatures widgetBody"},Xa={key:0,class:"col s12 m12"},el=["innerHTML"],tl={style:{"margin-bottom":"28px",color:"#5bb75b"}},nl=Object(i["createElementVNode"])("i",{class:"icon-heart red-text"},null,-1),al={class:"pluginName"},ll={key:0,class:"pluginSubtitle"},il={class:"pluginBody"},rl=Object(i["createElementVNode"])("br",null,null,-1),ol={class:"pluginMoreDetails"},cl={class:"widgetBody"},sl=["href"];function ul(e,t,n,a,l,r){var o=Object(i["resolveDirective"])("plugin-name");return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",Za,[(Object(i["openBlock"])(!0),Object(i["createElementBlock"])(i["Fragment"],null,Object(i["renderList"])(e.pluginRows,(function(t,n){return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",{class:"row",key:n},[0===n?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",Xa,[Object(i["createElementVNode"])("h3",{style:{"font-weight":"bold",color:"#5bb75b"},innerHTML:e.$sanitize(e.trialHintsText)},null,8,el),Object(i["createElementVNode"])("h3",tl,[Object(i["createTextVNode"])(Object(i["toDisplayString"])(e.translate("Marketplace_SupportMatomoThankYou"))+" ",1),nl])])):Object(i["createCommentVNode"])("",!0),(Object(i["openBlock"])(!0),Object(i["createElementBlock"])(i["Fragment"],null,Object(i["renderList"])(t,(function(t){return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",{class:"col s12 m4",key:t.name},[Object(i["withDirectives"])(Object(i["createElementVNode"])("h3",al,[Object(i["createTextVNode"])(Object(i["toDisplayString"])(t.displayName),1)],512),[[o,{pluginName:t.name}]]),t.specialOffer?(Object(i["openBlock"])(),Object(i["createElementBlock"])("span",ll,[Object(i["createElementVNode"])("span",null,Object(i["toDisplayString"])(e.translate("Marketplace_SpecialOffer"))+":",1),Object(i["createTextVNode"])(" "+Object(i["toDisplayString"])(t.specialOffer),1)])):Object(i["createCommentVNode"])("",!0),Object(i["createElementVNode"])("span",il,[Object(i["createTextVNode"])(Object(i["toDisplayString"])(t.isBundle?"".concat(e.translate("Marketplace_SpecialOffer"),": "):"")+Object(i["toDisplayString"])(t.description)+" ",1),rl,Object(i["withDirectives"])(Object(i["createElementVNode"])("a",ol,[Object(i["createTextVNode"])(Object(i["toDisplayString"])(e.translate("General_MoreDetails")),1)],512),[[o,{pluginName:t.name}]])])])})),128))])})),128)),Object(i["createElementVNode"])("div",cl,[Object(i["createElementVNode"])("a",{href:e.overviewLink},Object(i["toDisplayString"])(e.translate("CorePluginsAdmin_ViewAllMarketplacePlugins")),9,sl)])])}var dl=Object(i["defineComponent"])({props:{plugins:{type:Array,required:!0}},directives:{PluginName:g["PluginName"]},computed:{trialHintsText:function(){var e=Object(b["externalRawLink"])("https://shop.matomo.org/free-trial/"),t="color:#5bb75b;text-decoration: underline;";return Object(b["translate"])("Marketplace_TrialHints",'<a style="'.concat(t,'" href="').concat(e,'" target="_blank" rel="noreferrer noopener">'),"</a>")},pluginRows:function(){var e=[];return this.plugins.forEach((function(t,n){var a=Math.floor(n/3);e[a]=e[a]||[],e[a].push(t)})),e},overviewLink:function(){var e=b["MatomoUrl"].stringify({module:"Marketplace",action:"overview"}),t=b["MatomoUrl"].stringify({pluginType:"premium"});return"?".concat(e,"#?").concat(t)}}});dl.render=ul;var pl=dl,ml={key:0},bl={key:1},gl=["innerHTML"],Ol={key:2},jl=["innerHTML"],hl=["innerHTML"];function kl(e,t,n,a,l,r){var o=Object(i["resolveComponent"])("EnrichedHeadline"),c=Object(i["resolveComponent"])("LicenseKey"),s=Object(i["resolveComponent"])("UploadPluginDialog"),u=Object(i["resolveComponent"])("Marketplace"),d=Object(i["resolveDirective"])("content-intro");return Object(i["withDirectives"])((Object(i["openBlock"])(),Object(i["createElementBlock"])("div",null,[Object(i["createElementVNode"])("h2",null,[Object(i["createVNode"])(o,{"feature-name":e.translate("CorePluginsAdmin_Marketplace")},{default:Object(i["withCtx"])((function(){return[Object(i["createTextVNode"])(Object(i["toDisplayString"])(e.translate("Marketplace_Marketplace")),1)]})),_:1},8,["feature-name"])]),Object(i["createElementVNode"])("p",null,[e.isSuperUser?e.showThemes?(Object(i["openBlock"])(),Object(i["createElementBlock"])("span",bl,[Object(i["createTextVNode"])(Object(i["toDisplayString"])(e.translate("CorePluginsAdmin_ThemesDescription"))+" ",1),Object(i["createElementVNode"])("span",{innerHTML:e.$sanitize(e.installingNewThemeText)},null,8,gl)])):(Object(i["openBlock"])(),Object(i["createElementBlock"])("span",Ol,[Object(i["createTextVNode"])(Object(i["toDisplayString"])(e.translate("CorePluginsAdmin_PluginsExtendPiwik"))+" ",1),Object(i["createElementVNode"])("span",{innerHTML:e.$sanitize(e.installingNewPluginText)},null,8,jl)])):(Object(i["openBlock"])(),Object(i["createElementBlock"])("span",ml,Object(i["toDisplayString"])(e.restrictedMessage),1)),e.isSuperUser&&e.inReportingMenu?(Object(i["openBlock"])(),Object(i["createElementBlock"])("span",{key:3,ref:"noticeRemoveMarketplaceFromMenu",innerHTML:e.$sanitize(e.noticeRemoveMarketplaceFromMenuText)},null,8,hl)):Object(i["createCommentVNode"])("",!0)]),Object(i["createVNode"])(c,{"is-valid-consumer":e.isValidConsumer,"is-super-user":e.isSuperUser,"is-auto-update-possible":e.isAutoUpdatePossible,"is-plugins-admin-enabled":e.isPluginsAdminEnabled,"has-license-key":e.hasLicenseKey,"paid-plugins-to-install-at-once":e.paidPluginsToInstallAtOnce,"install-nonce":e.installNonce},null,8,["is-valid-consumer","is-super-user","is-auto-update-possible","is-plugins-admin-enabled","has-license-key","paid-plugins-to-install-at-once","install-nonce"]),Object(i["createVNode"])(s,{"is-plugin-upload-enabled":e.isPluginUploadEnabled,"upload-limit":e.uploadLimit,"install-nonce":e.installNonce},null,8,["is-plugin-upload-enabled","upload-limit","install-nonce"]),Object(i["createVNode"])(u,{"plugin-type-options":e.pluginTypeOptions,"default-sort":e.defaultSort,"plugin-sort-options":e.pluginSortOptions,"num-available-plugins-by-type":e.numAvailablePluginsByType,"current-user-email":e.currentUserEmail,"is-auto-update-possible":e.isAutoUpdatePossible,"is-super-user":e.isSuperUser,"is-multi-server-environment":e.isMultiServerEnvironment,"is-plugins-admin-enabled":e.isPluginsAdminEnabled,"is-valid-consumer":e.isValidConsumer,"deactivate-nonce":e.deactivateNonce,"activate-nonce":e.activateNonce,"install-nonce":e.installNonce,"update-nonce":e.updateNonce,"has-some-admin-access":e.hasSomeAdminAccess},null,8,["plugin-type-options","default-sort","plugin-sort-options","num-available-plugins-by-type","current-user-email","is-auto-update-possible","is-super-user","is-multi-server-environment","is-plugins-admin-enabled","is-valid-consumer","deactivate-nonce","activate-nonce","install-nonce","update-nonce","has-some-admin-access"])],512)),[[d]])}var vl=Object(i["defineComponent"])({props:{currentUserEmail:String,inReportingMenu:Boolean,isValidConsumer:Boolean,isSuperUser:Boolean,isAutoUpdatePossible:Boolean,isPluginsAdminEnabled:Boolean,isMultiServerEnvironment:Boolean,hasSomeAdminAccess:Boolean,hasLicenseKey:Boolean,paidPluginsToInstallAtOnce:{type:Array,required:!0},installNonce:{type:String,required:!0},activateNonce:{type:String,required:!0},deactivateNonce:{type:String,required:!0},updateNonce:{type:String,required:!0},isPluginUploadEnabled:Boolean,uploadLimit:[String,Number],pluginTypeOptions:{type:Object,required:!0},defaultSort:{type:String,required:!0},pluginSortOptions:{type:Object,required:!0},numAvailablePluginsByType:{type:Object,required:!0}},components:{EnrichedHeadline:b["EnrichedHeadline"],UploadPluginDialog:g["UploadPluginDialog"],LicenseKey:ha,Marketplace:In},directives:{ContentIntro:b["ContentIntro"],PluginName:g["PluginName"]},mounted:function(){if(this.$refs.noticeRemoveMarketplaceFromMenu){var e=this.$refs.noticeRemoveMarketplaceFromMenu.querySelector("[matomo-plugin-name]");g["PluginName"].mounted(e,{dir:{},instance:null,modifiers:{},oldValue:null,value:{pluginName:"WhiteLabel"}})}},beforeUnmount:function(){if(this.$refs.noticeRemoveMarketplaceFromMenu){var e=this.$refs.noticeRemoveMarketplaceFromMenu.querySelector("[matomo-plugin-name]");g["PluginName"].unmounted(e,{dir:{},instance:null,modifiers:{},oldValue:null,value:{pluginName:"WhiteLabel"}})}},computed:{installingNewThemeText:function(){return Object(b["translate"])("Marketplace_InstallingNewThemesViaMarketplaceOrUpload",'<a href="#" class="uploadPlugin">',"</a>")},installingNewPluginText:function(){return Object(b["translate"])("Marketplace_InstallingNewPluginsViaMarketplaceOrUpload",'<a href="#" class="uploadPlugin">',"</a>")},noticeRemoveMarketplaceFromMenuText:function(){return Object(b["translate"])("Marketplace_NoticeRemoveMarketplaceFromReportingMenu",'<a href="#" matomo-plugin-name="WhiteLabel">',"</a>")},showThemes:function(){return"themes"===b["MatomoUrl"].hashParsed.value.pluginType},restrictedMessage:function(){return this.showThemes?Object(b["translate"])("Marketplace_NotAllowedToBrowseMarketplaceThemes"):Object(b["translate"])("Marketplace_NotAllowedToBrowseMarketplacePlugins")}}});vl.render=kl;var yl=vl,fl={key:0},Nl=["href"],Vl=Object(i["createElementVNode"])("br",null,null,-1),El=Object(i["createElementVNode"])("br",null,null,-1),Sl=["innerHTML"],Bl=Object(i["createElementVNode"])("br",null,null,-1),Ml={class:"subscriptionName"},wl=["href"],Tl={key:1},Cl={class:"subscriptionType"},Pl=["title"],Al={key:0,class:"icon-error"},Dl={key:1,class:"icon-warning"},Ll={key:2,class:"icon-ok"},_l=["title"],Ul=Object(i["createElementVNode"])("span",{class:"icon-error"},null,-1),xl={key:0},ql={colspan:"6"},Fl={class:"tableActionBar"},Rl=["href"],Il=Object(i["createElementVNode"])("span",{class:"icon-table"},null,-1),Kl={key:1},Hl=["innerHTML"];function $l(e,t,n,a,l,r){var o=Object(i["resolveComponent"])("ContentBlock"),c=Object(i["resolveDirective"])("content-table");return Object(i["openBlock"])(),Object(i["createBlock"])(o,{"content-title":e.translate("Marketplace_OverviewPluginSubscriptions"),class:"subscriptionOverview"},{default:Object(i["withCtx"])((function(){return[e.hasLicenseKey?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",fl,[Object(i["createElementVNode"])("p",null,[Object(i["createTextVNode"])(Object(i["toDisplayString"])(e.translate("Marketplace_PluginSubscriptionsList"))+" ",1),e.loginUrl?(Object(i["openBlock"])(),Object(i["createElementBlock"])("a",{key:0,target:"_blank",rel:"noreferrer noopener",href:e.loginUrl},Object(i["toDisplayString"])(e.translate("Marketplace_OverviewPluginSubscriptionsAllDetails")),9,Nl)):Object(i["createCommentVNode"])("",!0),Vl,Object(i["createTextVNode"])(" "+Object(i["toDisplayString"])(e.translate("Marketplace_OverviewPluginSubscriptionsMissingInfo"))+" ",1),El,Object(i["createTextVNode"])(" "+Object(i["toDisplayString"])(e.translate("Marketplace_NoValidSubscriptionNoUpdates"))+" ",1),Object(i["createElementVNode"])("span",{innerHTML:e.$sanitize(e.translate("Marketplace_CurrentNumPiwikUsers","<strong>".concat(e.numUsers,"</strong>")))},null,8,Sl)]),Bl,Object(i["withDirectives"])(Object(i["createElementVNode"])("table",null,[Object(i["createElementVNode"])("thead",null,[Object(i["createElementVNode"])("tr",null,[Object(i["createElementVNode"])("th",null,Object(i["toDisplayString"])(e.translate("General_Name")),1),Object(i["createElementVNode"])("th",null,Object(i["toDisplayString"])(e.translate("Marketplace_SubscriptionType")),1),Object(i["createElementVNode"])("th",null,Object(i["toDisplayString"])(e.translate("CorePluginsAdmin_Status")),1),Object(i["createElementVNode"])("th",null,Object(i["toDisplayString"])(e.translate("Marketplace_SubscriptionStartDate")),1),Object(i["createElementVNode"])("th",null,Object(i["toDisplayString"])(e.translate("Marketplace_SubscriptionEndDate")),1),Object(i["createElementVNode"])("th",null,Object(i["toDisplayString"])(e.translate("Marketplace_SubscriptionNextPaymentDate")),1)])]),Object(i["createElementVNode"])("tbody",null,[(Object(i["openBlock"])(!0),Object(i["createElementBlock"])(i["Fragment"],null,Object(i["renderList"])(e.subscriptions||[],(function(t,n){return Object(i["openBlock"])(),Object(i["createElementBlock"])("tr",{key:n},[Object(i["createElementVNode"])("td",Ml,[t.plugin.htmlUrl?(Object(i["openBlock"])(),Object(i["createElementBlock"])("a",{key:0,href:t.plugin.htmlUrl,rel:"noreferrer noopener",target:"_blank"},Object(i["toDisplayString"])(t.plugin.displayName),9,wl)):(Object(i["openBlock"])(),Object(i["createElementBlock"])("span",Tl,Object(i["toDisplayString"])(t.plugin.displayName),1))]),Object(i["createElementVNode"])("td",Cl,Object(i["toDisplayString"])(t.productType),1),Object(i["createElementVNode"])("td",{class:"subscriptionStatus",title:e.getSubscriptionStatusTitle(t)},[t.isValid?t.isExpiredSoon?(Object(i["openBlock"])(),Object(i["createElementBlock"])("span",Dl)):(Object(i["openBlock"])(),Object(i["createElementBlock"])("span",Ll)):(Object(i["openBlock"])(),Object(i["createElementBlock"])("span",Al)),Object(i["createTextVNode"])(" "+Object(i["toDisplayString"])(t.status)+" ",1),t.isExceeded?(Object(i["openBlock"])(),Object(i["createElementBlock"])("span",{key:3,class:"errorMessage",title:e.translate("Marketplace_LicenseExceededPossibleCause")},[Ul,Object(i["createTextVNode"])(" "+Object(i["toDisplayString"])(e.translate("Marketplace_Exceeded")),1)],8,_l)):Object(i["createCommentVNode"])("",!0)],8,Pl),Object(i["createElementVNode"])("td",null,Object(i["toDisplayString"])(t.start),1),Object(i["createElementVNode"])("td",null,Object(i["toDisplayString"])(t.isValid&&t.nextPayment?e.translate("Marketplace_LicenseRenewsNextPaymentDate"):t.end),1),Object(i["createElementVNode"])("td",null,Object(i["toDisplayString"])(t.nextPayment),1)])})),128)),e.subscriptions.length?Object(i["createCommentVNode"])("",!0):(Object(i["openBlock"])(),Object(i["createElementBlock"])("tr",xl,[Object(i["createElementVNode"])("td",ql,Object(i["toDisplayString"])(e.translate("Marketplace_NoSubscriptionsFound")),1)]))])],512),[[c]]),Object(i["createElementVNode"])("div",Fl,[Object(i["createElementVNode"])("a",{href:e.marketplaceOverviewLink,class:""},[Il,Object(i["createTextVNode"])(" "+Object(i["toDisplayString"])(e.translate("Marketplace_BrowseMarketplace")),1)],8,Rl)])])):(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",Kl,[Object(i["createElementVNode"])("p",{innerHTML:e.$sanitize(e.missingLicenseText)},null,8,Hl)]))]})),_:1},8,["content-title"])}var zl=Object(i["defineComponent"])({props:{loginUrl:{type:String,required:!0},numUsers:{type:Number,required:!0},hasLicenseKey:Boolean,subscriptions:{type:Array,required:!0}},components:{ContentBlock:b["ContentBlock"]},directives:{ContentTable:b["ContentTable"]},methods:{getSubscriptionStatusTitle:function(e){return e.isValid?e.isExpiredSoon?Object(b["translate"])("Marketplace_SubscriptionExpiresSoon"):void 0:Object(b["translate"])("Marketplace_SubscriptionInvalid")}},computed:{marketplaceOverviewLink:function(){return"?".concat(b["MatomoUrl"].stringify({module:"Marketplace",action:"overview"}))},missingLicenseText:function(){return Object(b["translate"])("Marketplace_OverviewPluginSubscriptionsMissingLicense",'<a href="'.concat(this.marketplaceOverviewLink,'">'),"</a>")}}});zl.render=$l;var Gl=zl,Wl={class:"richMarketplaceMenuButton"},Ql=Object(i["createElementVNode"])("hr",null,null,-1),Yl={class:"intro"},Jl={class:"cta"},Zl=Object(i["createElementVNode"])("span",{class:"icon-marketplace"}," ",-1);function Xl(e,t,n,a,l,r){return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",Wl,[Ql,Object(i["createElementVNode"])("p",Yl,Object(i["toDisplayString"])(e.translate("Marketplace_RichMenuIntro")),1),Object(i["createElementVNode"])("p",Jl,[Object(i["createElementVNode"])("a",{class:"btn btn-outline",tabindex:"5",href:"",onClick:t[0]||(t[0]=Object(i["withModifiers"])((function(t){return e.$emit("action")}),["prevent"])),onKeyup:t[1]||(t[1]=Object(i["withKeys"])((function(t){return e.$emit("action")}),["enter"]))},[Zl,Object(i["createTextVNode"])(" "+Object(i["toDisplayString"])(e.translate("Marketplace_Marketplace")),1)],32)])])}var ei=Object(i["defineComponent"])({});ei.render=Xl;var ti=ei;
/*!
 * Matomo - free/libre analytics platform
 *
 * @link    https://matomo.org
 * @license https://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */}})}));
//# sourceMappingURL=Marketplace.umd.min.js.map