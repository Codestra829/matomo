(function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t(require("CoreHome"),require("vue"),require("CorePluginsAdmin")):"function"===typeof define&&define.amd?define(["CoreHome",,"CorePluginsAdmin"],t):"object"===typeof exports?exports["JsTrackerInstallCheck"]=t(require("CoreHome"),require("vue"),require("CorePluginsAdmin")):e["JsTrackerInstallCheck"]=t(e["CoreHome"],e["Vue"],e["CorePluginsAdmin"])})("undefined"!==typeof self?self:this,(function(e,t,n){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="plugins/JsTrackerInstallCheck/vue/dist/",n(n.s="fae3")}({"19dc":function(t,n){t.exports=e},"8bbf":function(e,n){e.exports=t},a5a2:function(e,t){e.exports=n},fae3:function(e,t,n){"use strict";if(n.r(t),n.d(t,"TestJsTrackerInstall",(function(){return ue})),"undefined"!==typeof window){var r=window.document.currentScript,o=r&&r.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);o&&(n.p=o[1])}var l=n("8bbf"),a={class:"form-group row"},c={class:"col s12 m6"},i={class:"col s12 m6"},s={class:"form-help"};function u(e,t,n,r,o,u){var d=Object(l["resolveComponent"])("Field"),p=Object(l["resolveComponent"])("ContentBlock");return Object(l["openBlock"])(),Object(l["createBlock"])(p,null,{default:Object(l["withCtx"])((function(){return[Object(l["createElementVNode"])("div",a,[Object(l["createElementVNode"])("div",c,[Object(l["createElementVNode"])("p",null,Object(l["toDisplayString"])(e.translate("JsTrackerInstallCheck_EnterSiteUrl")),1),Object(l["createVNode"])(d,{uicontrol:"url",title:"Site URL",modelValue:e.inputUrl,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.inputUrl=t}),placeholder:"https://example.org"},null,8,["modelValue"]),Object(l["createElementVNode"])("button",{type:"button",id:"runTestBtn",class:"btn btn-small",onClick:t[1]||(t[1]=function(){return e.openTestWindow&&e.openTestWindow.apply(e,arguments)})},Object(l["toDisplayString"])(e.translate("JsTrackerInstallCheck_StartTestBtnText")),1)]),Object(l["createElementVNode"])("div",i,[Object(l["createElementVNode"])("div",s,[Object(l["createElementVNode"])("p",null,Object(l["toDisplayString"])(e.translate("JsTrackerInstallCheck_TestHelpText")),1)])])])]})),_:1})}var d=n("19dc"),p=n("a5a2"),f={class:"card",ref:"root"},m={class:"card-content"},h={key:0,class:"card-title"},b={key:1,class:"card-title"},v={ref:"content"};function j(e,t,n,r,o,a){var c=Object(l["resolveComponent"])("EnrichedHeadline");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",f,[Object(l["createElementVNode"])("div",m,[!e.contentTitle||e.actualFeature||e.helpUrl||e.actualHelpText?Object(l["createCommentVNode"])("",!0):(Object(l["openBlock"])(),Object(l["createElementBlock"])("h2",h,Object(l["toDisplayString"])(e.decode(e.contentTitle)),1)),e.contentTitle&&(e.actualFeature||e.helpUrl||e.actualHelpText)?(Object(l["openBlock"])(),Object(l["createElementBlock"])("h2",b,[Object(l["createVNode"])(c,{"feature-name":e.actualFeature,"help-url":e.helpUrl,"inline-help":e.actualHelpText},{default:Object(l["withCtx"])((function(){return[Object(l["createTextVNode"])(Object(l["toDisplayString"])(e.decode(e.contentTitle)),1)]})),_:1},8,["feature-name","help-url","inline-help"])])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",v,[Object(l["renderSlot"])(e.$slots,"default")],512)])],512)}var O={key:0,class:"title",tabindex:"6"},y=["href","title"],k={class:"iconsBar"},w=["href","title"],g=Object(l["createElementVNode"])("span",{class:"icon-help"},null,-1),T=[g],C=["title"],S=Object(l["createElementVNode"])("span",{class:"icon-info"},null,-1),E=[S],H={class:"ratingIcons"},N={class:"inlineHelp"},I=["innerHTML"],x=["innerHTML"],V=["href"];function B(e,t,n,r,o,a){var c=Object(l["resolveComponent"])("RateFeature");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{class:"enrichedHeadline",onMouseenter:t[1]||(t[1]=function(t){return e.showIcons=!0}),onMouseleave:t[2]||(t[2]=function(t){return e.showIcons=!1}),ref:"root"},[e.editUrl?Object(l["createCommentVNode"])("",!0):(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",O,[Object(l["renderSlot"])(e.$slots,"default")])),e.editUrl?(Object(l["openBlock"])(),Object(l["createElementBlock"])("a",{key:1,class:"title",href:e.editUrl,title:e.translate("CoreHome_ClickToEditX",e.htmlEntities(e.actualFeatureName))},[Object(l["renderSlot"])(e.$slots,"default")],8,y)):Object(l["createCommentVNode"])("",!0),Object(l["withDirectives"])(Object(l["createElementVNode"])("span",k,[e.helpUrl&&!e.actualInlineHelp?(Object(l["openBlock"])(),Object(l["createElementBlock"])("a",{key:0,rel:"noreferrer noopener",target:"_blank",class:"helpIcon",href:e.helpUrl,title:e.translate("CoreHome_ExternalHelp")},T,8,w)):Object(l["createCommentVNode"])("",!0),e.actualInlineHelp?(Object(l["openBlock"])(),Object(l["createElementBlock"])("a",{key:1,onClick:t[0]||(t[0]=function(t){return e.showInlineHelp=!e.showInlineHelp}),class:Object(l["normalizeClass"])(["helpIcon",{active:e.showInlineHelp}]),title:e.translate(e.reportGenerated?"General_HelpReport":"General_Help")},E,10,C)):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",H,[Object(l["createVNode"])(c,{title:e.actualFeatureName},null,8,["title"])])],512),[[l["vShow"],e.showIcons||e.showInlineHelp]]),Object(l["withDirectives"])(Object(l["createElementVNode"])("div",N,[Object(l["createElementVNode"])("div",{innerHTML:e.$sanitize(e.actualInlineHelp)},null,8,I),""!=e.reportGenerated?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",{key:0,class:"helpDate",innerHTML:e.$sanitize(e.reportGenerated)},null,8,x)):Object(l["createCommentVNode"])("",!0),e.helpUrl?(Object(l["openBlock"])(),Object(l["createElementBlock"])("a",{key:1,rel:"noreferrer noopener",target:"_blank",class:"readMore",href:e.helpUrl},Object(l["toDisplayString"])(e.translate("General_MoreDetails")),9,V)):Object(l["createCommentVNode"])("",!0)],512),[[l["vShow"],e.showInlineHelp]])],544)}function F(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function U(e,t,n){return t&&_(e.prototype,t),n&&_(e,n),e}function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}
/*!
 * Matomo - free/libre analytics platform
 *
 * @link https://matomo.org
 * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */var D,M=function(){function e(){F(this,e),A(this,"periods",{}),A(this,"periodOrder",[])}return U(e,[{key:"addCustomPeriod",value:function(e,t){if(this.periods[e])throw new Error('The "'.concat(e,'" period already exists! It cannot be overridden.'));this.periods[e]=t,this.periodOrder.push(e)}},{key:"getAllLabels",value:function(){return Array().concat(this.periodOrder)}},{key:"get",value:function(e){var t=this.periods[e];if(!t)throw new Error("Invalid period label: ".concat(e));return t}},{key:"parse",value:function(e,t){return this.get(e).parse(t)}},{key:"isRecognizedPeriod",value:function(e){return!!this.periods[e]}}]),e}(),P=new M;function q(e){return R(e)||L(e)||G(e)||J()}function J(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function G(e,t){if(e){if("string"===typeof e)return W(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?W(e,t):void 0}}function L(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function R(e){if(Array.isArray(e))return W(e)}function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}
/*!
 * Matomo - free/libre analytics platform
 *
 * @link https://matomo.org
 * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */var z=window,X=z.piwik,K=z.broadcast,Q=z.piwikHelper;X.helper=Q,X.broadcast=K,X.updateDateInTitle=function(e,t){if($(".top_controls #periodString").length&&(D=D||document.title,0===D.indexOf(X.siteName))){var n=" - ".concat(P.parse(t,e).getPrettyString()," ");document.title="".concat(X.siteName).concat(n).concat(D.slice(X.siteName.length))}},X.hasUserCapability=function(e){return window.angular.isArray(X.userCapabilities)&&-1!==X.userCapabilities.indexOf(e)},X.on=function(e,t){function n(e){t.apply(void 0,q(e.detail))}t.wrapper=n,window.addEventListener(e,n)},X.off=function(e,t){t.wrapper&&window.removeEventListener(e,t.wrapper)},X.postEventNoEmit=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o=new CustomEvent(e,{detail:n});window.dispatchEvent(o)},X.postEvent=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];X.postEventNoEmit.apply(X,[e].concat(n)),window.angular.element((function(){var t=X.helper.getAngularDependency("$rootScope");t.$oldEmit.apply(t,[e].concat(n))}))};var Y=X,Z=Y;
/*!
 * Matomo - free/libre analytics platform
 *
 * @link https://matomo.org
 * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */
function ee(e,t){return Object(l["defineAsyncComponent"])((function(){return new Promise((function(n){window.$(document).ready((function(){window[e]?n(window[e][t]):n(null)}))}))}))}var te=ee("Feedback","RateFeature"),ne=Object(l["defineComponent"])({props:{helpUrl:{type:String,default:""},editUrl:{type:String,default:""},reportGenerated:String,featureName:String,inlineHelp:String},components:{RateFeature:te},data:function(){return{showIcons:!1,showInlineHelp:!1,actualFeatureName:this.featureName,actualInlineHelp:this.inlineHelp}},watch:{inlineHelp:function(e){this.actualInlineHelp=e},featureName:function(e){this.actualFeatureName=e}},mounted:function(){var e=this,t=this.$refs.root;setTimeout((function(){if(!e.actualInlineHelp){var n,r=t.querySelector(".title .inlineHelp");if(!r&&null!==(n=t.parentElement)&&void 0!==n&&n.nextElementSibling&&(r=t.parentElement.nextElementSibling.querySelector(".reportDocumentation")),r){var o,l=null===(o=r.getAttribute("data-content"))||void 0===o?void 0:o.trim();l&&l.length&&(e.actualInlineHelp="<p>".concat(l,"</p>"),setTimeout((function(){return r.remove()}),0))}}var a;e.actualFeatureName||(e.actualFeatureName=null===(a=t.querySelector(".title"))||void 0===a?void 0:a.textContent);if(Z.period&&Z.currentDateString){var c=P.parse(Z.period,Z.currentDateString);e.reportGenerated&&c.containsToday()&&window.$(t.querySelector(".report-generated")).tooltip({track:!0,content:e.reportGenerated,items:"div",show:!1,hide:!1})}}))},methods:{htmlEntities:function(e){return Z.helper.htmlEntities(e)}}});ne.render=B;var re=ne,oe=null,le=window,ae=le.$,ce=Object(l["defineComponent"])({props:{contentTitle:String,feature:String,helpUrl:String,helpText:String,anchor:String},components:{EnrichedHeadline:re},data:function(){return{actualFeature:this.feature,actualHelpText:this.helpText}},watch:{feature:function(e){this.actualFeature=e},helpText:function(e){this.actualHelpText=e}},mounted:function(){var e=this,t=this.$refs.root,n=this.$refs.content;if(this.anchor&&t&&t.parentElement){var r=document.createElement("a");r.id=this.anchor,ae(t.parentElement).prepend(r)}setTimeout((function(){var t=n.querySelector(".contentHelp");t&&(e.actualHelpText=t.innerHTML,t.remove())}),0),this.actualFeature&&"true"===this.actualFeature&&(this.actualFeature=this.contentTitle),null===oe&&(oe=document.querySelector("#content.admin"));var o=null;if(oe&&(o=oe.offsetTop),o||0===o){var l=t.closest("[piwik-widget-loader]"),a=l?l.offsetTop:t.offsetTop;a-o<17&&(t.style.marginTop="0")}},methods:{decode:function(e){return Z.helper.htmlDecode(e)}}});ce.render=j;var ie=ce,se=Object(l["defineComponent"])({components:{ContentBlock:ie,Field:p["Field"]},data:function(){return{inputUrl:"",numberOfChecks:0}},props:{checkNonce:{type:String,required:!0}},methods:{openTestWindow:function(){var e="".concat(this.inputUrl,"?tracker_install_check=").concat(this.checkNonce);window.open(e),this.setCheckInTime()},setCheckInTime:function(){setTimeout(this.checkWhetherSuccessWasRecorded,5e3)},checkWhetherSuccessWasRecorded:function(){d["AjaxHelper"].post({module:"API",method:"JsTrackerInstallCheck.checkForJsTrackerInstallTestSuccess"},{nonce:this.checkNonce}).then((function(e){var t=Object(d["translate"])("JsTrackerInstallCheck_TestFailureMessage"),n=e&&e.isSuccess;n&&(t=Object(d["translate"])("JsTrackerInstallCheck_TestSuccessMessage")),d["NotificationsStore"].show({context:n?"success":"warning",id:"JsTrackerInstallCheckResult",type:"transient",message:t})}))}}});se.render=u;var ue=se;
/*!
 * Matomo - free/libre analytics platform
 *
 * @link https://matomo.org
 * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */}})}));
//# sourceMappingURL=JsTrackerInstallCheck.umd.min.js.map