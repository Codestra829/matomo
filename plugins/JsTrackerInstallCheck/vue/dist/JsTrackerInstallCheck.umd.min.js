(function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t(require("CoreHome"),require("vue")):"function"===typeof define&&define.amd?define(["CoreHome"],t):"object"===typeof exports?exports["JsTrackerInstallCheck"]=t(require("CoreHome"),require("vue")):e["JsTrackerInstallCheck"]=t(e["CoreHome"],e["Vue"])})("undefined"!==typeof self?self:this,(function(e,t){return function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="plugins/JsTrackerInstallCheck/vue/dist/",n(n.s="fae3")}({"19dc":function(t,n){t.exports=e},"8bbf":function(e,n){e.exports=t},fae3:function(e,t,n){"use strict";if(n.r(t),n.d(t,"JsTrackerInstallCheck",(function(){return dn})),"undefined"!==typeof window){var o=window.document.currentScript,i=o&&o.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);i&&(n.p=i[1])}var r=n("8bbf"),l={class:"jsTrackerInstallCheck"},a={class:"row testInstallFields"},c={class:"col s2"},u={class:"col s10"},s=["disabled","value"],d={class:"system-success success-message"},m=Object(r["createElementVNode"])("span",{class:"icon-ok"},null,-1),f={class:"system-errors test-error"},p=Object(r["createElementVNode"])("span",{class:"icon-warning"},null,-1),b=Object(r["createTextVNode"])("Â  "),h=["innerHTML"];function v(e,t,n,o,i,v){var O=Object(r["resolveComponent"])("Field"),j=Object(r["resolveComponent"])("ActivityIndicator");return Object(r["openBlock"])(),Object(r["createElementBlock"])(r["Fragment"],null,[Object(r["createElementVNode"])("li",null,Object(r["toDisplayString"])(e.translate("JsTrackerInstallCheck_TestInstallationDescription")),1),Object(r["createElementVNode"])("div",l,[Object(r["createElementVNode"])("div",a,[Object(r["createElementVNode"])("div",c,[Object(r["createVNode"])(O,{uicontrol:"url",name:"baseUrl",placeholder:"https://example.com",modelValue:e.baseUrl,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.baseUrl=t}),"full-width":!0,disabled:e.isTesting},null,8,["modelValue","disabled"])]),Object(r["createElementVNode"])("div",u,[Object(r["createElementVNode"])("input",{type:"button",class:"btn testInstallBtn",onClick:t[1]||(t[1]=function(){return e.initiateTrackerTest&&e.initiateTrackerTest.apply(e,arguments)}),disabled:!e.baseUrl||e.isTesting,value:e.translate("JsTrackerInstallCheck_TestInstallationBtnText")},null,8,s)])]),Object(r["createVNode"])(j,{loading:e.isTesting,loadingMessage:e.translate("General_Testing")},null,8,["loading","loadingMessage"]),Object(r["withDirectives"])(Object(r["createElementVNode"])("div",d,[m,Object(r["createTextVNode"])(" "+Object(r["toDisplayString"])(e.translate("JsTrackerInstallCheck_JsTrackingCodeInstallCheckSuccessMessage")),1)],512),[[r["vShow"],e.isTestSuccess]]),Object(r["withDirectives"])(Object(r["createElementVNode"])("div",f,[p,b,Object(r["createElementVNode"])("span",{innerHTML:e.$sanitize(e.getTestFailureMessage)},null,8,h)],512),[[r["vShow"],e.isTestComplete&&!e.isTestSuccess]])])],64)}var O=n("19dc");function j(e,t,n,o,i,l){var a=Object(r["resolveComponent"])("FormField");return Object(r["openBlock"])(),Object(r["createBlock"])(a,{"form-field":e.field,"model-value":e.modelValue,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.onChange(t)}),"model-modifiers":e.modelModifiers},{"inline-help":Object(r["withCtx"])((function(){return[Object(r["renderSlot"])(e.$slots,"inline-help")]})),_:3},8,["form-field","model-value","model-modifiers"])}var y={class:"form-group row matomo-form-field"},g={key:0,class:"col s12"},V={key:0,class:"form-help"},C={key:0,class:"inline-help",ref:"inlineHelp"},k=Object(r["createElementVNode"])("br",null,null,-1);function w(e,t,n,o,i,l){return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",y,[e.formField.introduction?(Object(r["openBlock"])(),Object(r["createElementBlock"])("h3",g,Object(r["toDisplayString"])(e.formField.introduction),1)):Object(r["createCommentVNode"])("",!0),Object(r["createElementVNode"])("div",{class:Object(r["normalizeClass"])(["col s12",{"input-field":"checkbox"!==e.formField.uiControl&&"radio"!==e.formField.uiControl,"file-field":"file"===e.formField.uiControl,m6:!e.formField.fullWidth}])},[(Object(r["openBlock"])(),Object(r["createBlock"])(Object(r["resolveDynamicComponent"])(e.childComponent),Object(r["mergeProps"])(Object.assign(Object.assign({formField:e.formField},e.formField),{},{modelValue:e.processedModelValue,modelModifiers:e.modelModifiers,availableOptions:e.availableOptions},e.extraChildComponentParams),{"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.onChange(t)})}),null,16))],2),Object(r["createElementVNode"])("div",{class:Object(r["normalizeClass"])(["col s12",{m6:!e.formField.fullWidth}])},[e.showFormHelp?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",V,[Object(r["withDirectives"])(Object(r["createElementVNode"])("div",{class:"form-description"},Object(r["toDisplayString"])(e.formField.description),513),[[r["vShow"],e.formField.description]]),e.formField.inlineHelp||e.hasInlineHelpSlot?(Object(r["openBlock"])(),Object(r["createElementBlock"])("span",C,[e.inlineHelpComponent?(Object(r["openBlock"])(),Object(r["createBlock"])(Object(r["resolveDynamicComponent"])(e.inlineHelpComponent),Object(r["normalizeProps"])(Object(r["mergeProps"])({key:0},e.inlineHelpBind)),null,16)):Object(r["createCommentVNode"])("",!0),Object(r["renderSlot"])(e.$slots,"inline-help")],512)):Object(r["createCommentVNode"])("",!0),Object(r["withDirectives"])(Object(r["createElementVNode"])("span",null,[k,Object(r["createTextVNode"])(" "+Object(r["toDisplayString"])(e.translate("General_Default"))+": ",1),Object(r["createElementVNode"])("span",null,Object(r["toDisplayString"])(e.defaultValuePrettyTruncated),1)],512),[[r["vShow"],e.showDefaultValue]])])):Object(r["createCommentVNode"])("",!0)],2)])}var S={class:"checkbox"},T=["checked","id","name"],A=["innerHTML"];function E(e,t,n,o,i,l){return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",S,[Object(r["createElementVNode"])("label",null,[Object(r["createElementVNode"])("input",Object(r["mergeProps"])({onChange:t[0]||(t[0]=function(t){return e.onChange(t)})},e.uiControlAttributes,{value:1,checked:e.isChecked,type:"checkbox",id:e.name,name:e.name}),null,16,T),Object(r["createElementVNode"])("span",{innerHTML:e.$sanitize(e.title)},null,8,A)])])}var x=Object(r["defineComponent"])({props:{modelValue:[Boolean,Number,String],modelModifiers:Object,uiControlAttributes:Object,name:String,title:String},inheritAttrs:!1,emits:["update:modelValue"],methods:{onChange:function(e){var t=e.target.checked;if(this.modelValue!==t){var n;if(null===(n=this.modelModifiers)||void 0===n||!n.abortable)return void this.$emit("update:modelValue",t);var o={value:t,abort:function(){e.target.checked=!t}};this.$emit("update:modelValue",o)}}},computed:{isChecked:function(){return!!this.modelValue&&"0"!==this.modelValue}}});x.render=E;var F=x,M={ref:"root"},N=["value","checked","onChange","id","name"];function B(e,t,n,o,i,l){return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",M,[Object(r["withDirectives"])(Object(r["createElementVNode"])("label",{class:"fieldRadioTitle"},Object(r["toDisplayString"])(e.title),513),[[r["vShow"],e.title]]),(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(e.availableOptions,(function(t,n){return Object(r["openBlock"])(),Object(r["createElementBlock"])("p",{key:n,class:"checkbox"},[Object(r["createElementVNode"])("label",null,[Object(r["createElementVNode"])("input",Object(r["mergeProps"])({value:t.key,checked:!!e.checkboxStates[n],onChange:function(t){return e.onChange(n)}},e.uiControlAttributes,{type:"checkbox",id:"".concat(e.name).concat(t.key),name:t.name}),null,16,N),Object(r["createElementVNode"])("span",null,Object(r["toDisplayString"])(t.value),1),Object(r["withDirectives"])(Object(r["createElementVNode"])("span",{class:"form-description"},Object(r["toDisplayString"])(t.description),513),[[r["vShow"],t.description]])])])})),128))],512)}function $(e){return z(e)||L(e)||I(e)||H()}function H(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function I(e,t){if(e){if("string"===typeof e)return D(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?D(e,t):void 0}}function L(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function z(e){if(Array.isArray(e))return D(e)}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function P(e,t){return(e||[]).map((function(e){return t&&-1!==t.indexOf(e.key)}))}var U=Object(r["defineComponent"])({props:{modelValue:Array,modelModifiers:Object,name:String,title:String,availableOptions:Array,uiControlAttributes:Object,type:String},inheritAttrs:!1,emits:["update:modelValue"],computed:{checkboxStates:function(){return P(this.availableOptions,this.modelValue)}},mounted:function(){setTimeout((function(){window.Materialize.updateTextFields()}))},methods:{onChange:function(e){var t,n=this,o=$(this.checkboxStates);o[e]=!o[e];var i=this.availableOptions||{},r=[];if(Object.values(i).forEach((function(e,t){o[t]&&r.push(e.key)})),null!==(t=this.modelModifiers)&&void 0!==t&&t.abortable){var l={value:r,abort:function(){var t=n.$refs.root.querySelectorAll("input").item(e);t.checked=!t.checked}};this.$emit("update:modelValue",l)}else this.$emit("update:modelValue",r)}}});U.render=B;var K=U,W={class:"expandableSelector"},_=Object(r["createElementVNode"])("svg",{class:"caret",height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg"},[Object(r["createElementVNode"])("path",{d:"M7 10l5 5 5-5z"}),Object(r["createElementVNode"])("path",{d:"M0 0h24v24H0z",fill:"none"})],-1),J=["value"],R={class:"expandableList z-depth-2"},q={class:"searchContainer"},G={class:"collection firstLevel"},Q=["onClick"],X={class:"collection secondLevel"},Y=["onClick"],Z={class:"primary-content"},ee=["title"];function te(e,t,n,o,i,l){var a=Object(r["resolveDirective"])("focus-if"),c=Object(r["resolveDirective"])("focus-anywhere-but-here");return Object(r["withDirectives"])((Object(r["openBlock"])(),Object(r["createElementBlock"])("div",W,[Object(r["createElementVNode"])("div",{onClick:t[0]||(t[0]=function(t){return e.showSelect=!e.showSelect}),class:"select-wrapper"},[_,Object(r["createElementVNode"])("input",{type:"text",class:"select-dropdown",readonly:"readonly",value:e.modelValueText},null,8,J)]),Object(r["withDirectives"])(Object(r["createElementVNode"])("div",R,[Object(r["createElementVNode"])("div",q,[Object(r["withDirectives"])(Object(r["createElementVNode"])("input",{type:"text",placeholder:"Search","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.searchTerm=t}),class:"expandableSearch browser-default"},null,512),[[r["vModelText"],e.searchTerm],[a,{focused:e.showSelect}]])]),Object(r["createElementVNode"])("ul",G,[(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(e.availableOptions,(function(t,n){return Object(r["withDirectives"])((Object(r["openBlock"])(),Object(r["createElementBlock"])("li",{class:"collection-item",key:n},[Object(r["createElementVNode"])("h4",{class:"expandableListCategory",onClick:function(n){return e.onCategoryClicked(t)}},[Object(r["createTextVNode"])(Object(r["toDisplayString"])(t.group)+" ",1),Object(r["createElementVNode"])("span",{class:Object(r["normalizeClass"])(["secondary-content",{"icon-chevron-right":e.showCategory!==t.group,"icon-chevron-down":e.showCategory===t.group}])},null,2)],8,Q),Object(r["withDirectives"])(Object(r["createElementVNode"])("ul",X,[(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(t.values.filter((function(t){return-1!==t.value.toLowerCase().indexOf(e.searchTerm.toLowerCase())})),(function(t){return Object(r["openBlock"])(),Object(r["createElementBlock"])("li",{class:"expandableListItem collection-item valign-wrapper",key:t.key,onClick:function(n){return e.onValueClicked(t)}},[Object(r["createElementVNode"])("span",Z,Object(r["toDisplayString"])(t.value),1),Object(r["withDirectives"])(Object(r["createElementVNode"])("span",{title:t.tooltip,class:"secondary-content icon-help"},null,8,ee),[[r["vShow"],t.tooltip]])],8,Y)})),128))],512),[[r["vShow"],e.showCategory===t.group||e.searchTerm]])],512)),[[r["vShow"],t.values.filter((function(t){return-1!==t.value.toLowerCase().indexOf(e.searchTerm.toLowerCase())})).length]])})),128))])],512),[[r["vShow"],e.showSelect]])],512)),[[c,{blur:e.onBlur}]])}function ne(e){var t=[];if(!e)return t;var n={};return Object.values(e).forEach((function(e){var t=e,o=t.group||"";o in n&&n[o]||(n[o]={values:[],group:o});var i={key:t.key,value:t.value};"tooltip"in t&&t.tooltip&&(i.tooltip=t.tooltip),n[o].values.push(i)})),Object.values(n).forEach((function(e){e.values.length&&t.push(e)})),t}var oe=Object(r["defineComponent"])({props:{modelValue:[Number,String],modelModifiers:Object,availableOptions:Array,title:String},directives:{FocusAnywhereButHere:O["FocusAnywhereButHere"],FocusIf:O["FocusIf"]},inheritAttrs:!1,emits:["update:modelValue"],data:function(){return{showSelect:!1,searchTerm:"",showCategory:""}},computed:{modelValueText:function(){if(this.title)return this.title;var e,t=this.modelValue,n=this.availableOptions||[];return n.some((function(n){return e=n.values.find((function(e){return e.key===t})),e})),e?e.value?"".concat(e.value):"":t?"".concat(t):""}},methods:{onBlur:function(){this.showSelect=!1},onCategoryClicked:function(e){this.showCategory===e.group?this.showCategory="":this.showCategory=e.group},onValueClicked:function(e){var t;if(this.showSelect=!1,null!==(t=this.modelModifiers)&&void 0!==t&&t.abortable){var n={value:e.key,abort:function(){}};this.$emit("update:modelValue",n)}else this.$emit("update:modelValue",e.key)}}});oe.render=te;var ie=oe,re=["for","innerHTML"];function le(e,t,n,o,i,l){var a=Object(r["resolveComponent"])("FieldArray");return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",null,[Object(r["createElementVNode"])("label",{for:e.name,innerHTML:e.$sanitize(e.title)},null,8,re),Object(r["createVNode"])(a,{name:e.name,"model-value":e.modelValue,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.onValueUpdate(t)}),"model-modifiers":e.modelModifiers,field:e.uiControlAttributes.field,rows:e.uiControlAttributes.rows},null,8,["name","model-value","model-modifiers","field","rows"])])}var ae=Object(r["defineComponent"])({components:{FieldArray:O["FieldArray"]},props:{name:String,title:String,modelValue:null,modelModifiers:Object,uiControlAttributes:Object},inheritAttrs:!1,emits:["update:modelValue"],methods:{onValueUpdate:function(e){this.$emit("update:modelValue",e)}}});ae.render=le;var ce=ae,ue={class:"btn"},se=["for","innerHTML"],de=["name","id"],me={class:"file-path-wrapper"},fe=["value"];function pe(e,t,n,o,i,l){return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",null,[Object(r["createElementVNode"])("div",ue,[Object(r["createElementVNode"])("span",{for:e.name,innerHTML:e.$sanitize(e.title)},null,8,se),Object(r["createElementVNode"])("input",{ref:"fileInput",name:e.name,type:"file",id:e.name,onChange:t[0]||(t[0]=function(t){return e.onChange(t)})},null,40,de)]),Object(r["createElementVNode"])("div",me,[Object(r["createElementVNode"])("input",{class:"file-path validate",value:e.filePath,type:"text"},null,8,fe)])])}var be=Object(r["defineComponent"])({props:{name:String,title:String,modelValue:[String,File],modelModifiers:Object},inheritAttrs:!1,emits:["update:modelValue"],watch:{modelValue:function(e){if(!e||""===e){var t=this.$refs.fileInput;t.value=""}}},methods:{onChange:function(e){var t,n=e.target.files;if(n){var o=n.item(0);if(null!==(t=this.modelModifiers)&&void 0!==t&&t.abortable){var i={value:o,abort:function(){}};this.$emit("update:modelValue",i)}else this.$emit("update:modelValue",o)}}},computed:{filePath:function(){if(this.modelValue instanceof File)return this.$refs.fileInput.value}}});be.render=pe;var he=be,ve=["type","name","value"];function Oe(e,t,n,o,i,l){return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",null,[Object(r["createElementVNode"])("input",{type:e.uiControl,name:e.name,value:e.modelValue,onChange:t[0]||(t[0]=function(t){return e.onChange(t)})},null,40,ve)])}var je=Object(r["defineComponent"])({props:{modelValue:null,modelModifiers:Object,uiControl:String,name:String},inheritAttrs:!1,emits:["update:modelValue"],methods:{onChange:function(e){this.$emit("update:modelValue",e.target.value)}}});je.render=Oe;var ye=je,ge={class:"fieldMultiTuple"},Ve=["for","innerHTML"];function Ce(e,t,n,o,i,l){var a=Object(r["resolveComponent"])("MultiPairField");return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",ge,[Object(r["createElementVNode"])("label",{for:e.name,innerHTML:e.$sanitize(e.title)},null,8,Ve),Object(r["createVNode"])(a,{name:e.name,"model-value":e.modelValue,"onUpdate:modelValue":e.onUpdateValue,"model-modifiers":e.modelModifiers,field1:e.uiControlAttributes.field1,field2:e.uiControlAttributes.field2,field3:e.uiControlAttributes.field3,field4:e.uiControlAttributes.field4,rows:e.uiControlAttributes.rows},null,8,["name","model-value","onUpdate:modelValue","model-modifiers","field1","field2","field3","field4","rows"])])}var ke=Object(r["defineComponent"])({props:{name:String,title:String,modelValue:null,modelModifiers:Object,uiControlAttributes:Object},inheritAttrs:!1,components:{MultiPairField:O["MultiPairField"]},emits:["update:modelValue"],methods:{onUpdateValue:function(e){this.$emit("update:modelValue",e)}}});ke.render=Ce;var we=ke,Se=["type","id","name","value"],Te=["for","innerHTML"];function Ae(e,t,n,o,i,l){return Object(r["openBlock"])(),Object(r["createElementBlock"])(r["Fragment"],null,[Object(r["createElementVNode"])("input",Object(r["mergeProps"])({class:"control_".concat(e.uiControl),type:e.uiControl,id:e.name,name:e.name,value:e.modelValueFormatted,onKeydown:t[0]||(t[0]=function(t){return e.onChange(t)}),onChange:t[1]||(t[1]=function(t){return e.onChange(t)})},e.uiControlAttributes),null,16,Se),Object(r["createElementVNode"])("label",{for:e.name,innerHTML:e.$sanitize(e.title)},null,8,Te)],64)}var Ee=Object(r["defineComponent"])({props:{uiControl:String,name:String,title:String,modelValue:[Number,String],modelModifiers:Object,uiControlAttributes:Object},inheritAttrs:!1,emits:["update:modelValue"],created:function(){this.onChange=Object(O["debounce"])(this.onChange.bind(this),50)},methods:{onChange:function(e){var t=this,n=parseFloat(e.target.value);if(n!==this.modelValue){var o;if(null===(o=this.modelModifiers)||void 0===o||!o.abortable)return void this.$emit("update:modelValue",n);var i={value:n,abort:function(){e.target.value!==t.modelValueFormatted&&(e.target.value=t.modelValueFormatted)}};this.$emit("update:modelValue",i)}}},mounted:function(){setTimeout((function(){window.Materialize.updateTextFields()}))},watch:{modelValue:function(){setTimeout((function(){window.Materialize.updateTextFields()}))}},computed:{modelValueFormatted:function(){return(this.modelValue||"").toString()}}});Ee.render=Ae;var xe=Ee,Fe={ref:"root"},Me=["value","id","name","disabled","checked"];function Ne(e,t,n,o,i,l){return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",Fe,[Object(r["withDirectives"])(Object(r["createElementVNode"])("label",{class:"fieldRadioTitle"},Object(r["toDisplayString"])(e.title),513),[[r["vShow"],e.title]]),(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(e.availableOptions||[],(function(n){return Object(r["openBlock"])(),Object(r["createElementBlock"])("p",{key:n.key,class:"radio"},[Object(r["createElementVNode"])("label",null,[Object(r["createElementVNode"])("input",Object(r["mergeProps"])({value:n.key,onChange:t[0]||(t[0]=function(t){return e.onChange(t)}),type:"radio",id:"".concat(e.name).concat(n.key),name:e.name,disabled:n.disabled||e.disabled},e.uiControlAttributes,{checked:e.modelValue===n.key||"".concat(e.modelValue)===n.key}),null,16,Me),Object(r["createElementVNode"])("span",null,[Object(r["createTextVNode"])(Object(r["toDisplayString"])(n.value)+" ",1),Object(r["withDirectives"])(Object(r["createElementVNode"])("span",{class:"form-description"},Object(r["toDisplayString"])(n.description),513),[[r["vShow"],n.description]])])])])})),128))],512)}var Be=Object(r["defineComponent"])({props:{title:String,availableOptions:Array,name:String,disabled:Boolean,uiControlAttributes:Object,modelValue:[String,Number],modelModifiers:Object},inheritAttrs:!1,emits:["update:modelValue"],methods:{onChange:function(e){var t,n=this;if(null!==(t=this.modelModifiers)&&void 0!==t&&t.abortable){var o=function(){n.$refs.root.querySelectorAll("input").forEach((function(e,t){var o;if(null!==(o=n.availableOptions)&&void 0!==o&&o[t]){var i=n.availableOptions[t].key;e.checked=n.modelValue===i||"".concat(n.modelValue)===i}}))},i={value:e.target.value,abort:function(){o()}};this.$emit("update:modelValue",i)}else this.$emit("update:modelValue",e.target.value)}}});Be.render=Ne;var $e=Be;function He(e,t){return Pe(e)||De(e,t)||Le(e,t)||Ie()}function Ie(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Le(e,t){if(e){if("string"===typeof e)return ze(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ze(e,t):void 0}}function ze(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function De(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,i,r=[],l=!0,a=!1;try{for(n=n.call(e);!(l=(o=n.next()).done);l=!0)if(r.push(o.value),t&&r.length===t)break}catch(c){a=!0,i=c}finally{try{l||null==n["return"]||n["return"]()}finally{if(a)throw i}}return r}}function Pe(e){if(Array.isArray(e))return e}var Ue={key:0,class:"matomo-field-select"},Ke=["multiple","name"],We=["label"],_e=["value","selected","disabled"],Je=["for","innerHTML"],Re={key:1,class:"matomo-field-select"},qe=["multiple","name"],Ge=["value","selected","disabled"],Qe=["for","innerHTML"];function Xe(e,t,n,o,i,l){return Object(r["openBlock"])(),Object(r["createElementBlock"])(r["Fragment"],null,[e.groupedOptions?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",Ue,[Object(r["createElementVNode"])("select",Object(r["mergeProps"])({ref:"select",class:"grouped",multiple:e.multiple,name:e.name,onChange:t[0]||(t[0]=function(t){return e.onChange(t)})},e.uiControlAttributes),[(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(e.groupedOptions,(function(t){var n=He(t,2),o=n[0],i=n[1];return Object(r["openBlock"])(),Object(r["createElementBlock"])("optgroup",{key:o,label:o},[(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(i,(function(t){return Object(r["openBlock"])(),Object(r["createElementBlock"])("option",{key:t.key,value:"string:".concat(t.key),selected:e.multiple?e.modelValue&&-1!==e.modelValue.indexOf(t.key):e.modelValue===t.key,disabled:t.disabled},Object(r["toDisplayString"])(t.value),9,_e)})),128))],8,We)})),128))],16,Ke),Object(r["createElementVNode"])("label",{for:e.name,innerHTML:e.$sanitize(e.title)},null,8,Je)])):Object(r["createCommentVNode"])("",!0),!e.groupedOptions&&e.options?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",Re,[Object(r["createElementVNode"])("select",Object(r["mergeProps"])({class:"ungrouped",ref:"select",multiple:e.multiple,name:e.name,onChange:t[1]||(t[1]=function(t){return e.onChange(t)})},e.uiControlAttributes),[(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(e.options,(function(t){return Object(r["openBlock"])(),Object(r["createElementBlock"])("option",{key:t.key,value:"string:".concat(t.key),selected:e.multiple?e.modelValue&&-1!==e.modelValue.indexOf(t.key):e.modelValue===t.key,disabled:t.disabled},Object(r["toDisplayString"])(t.value),9,Ge)})),128))],16,qe),Object(r["createElementVNode"])("label",{for:e.name,innerHTML:e.$sanitize(e.title)},null,8,Qe)])):Object(r["createCommentVNode"])("",!0)],64)}function Ye(e){return tt(e)||et(e)||it(e)||Ze()}function Ze(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function et(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function tt(e){if(Array.isArray(e))return rt(e)}function nt(e,t){return at(e)||lt(e,t)||it(e,t)||ot()}function ot(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function it(e,t){if(e){if("string"===typeof e)return rt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?rt(e,t):void 0}}function rt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function lt(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,i,r=[],l=!0,a=!1;try{for(n=n.call(e);!(l=(o=n.next()).done);l=!0)if(r.push(o.value),t&&r.length===t)break}catch(c){a=!0,i=c}finally{try{l||null==n["return"]||n["return"]()}finally{if(a)throw i}}return r}}function at(e){if(Array.isArray(e))return e}function ct(e){return ct="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ct(e)}function ut(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4?arguments[4]:void 0;if(e){var r=window.$(e);if(Array.from(e.options).forEach((function(e){e.selected=i?!!t&&-1!==t.indexOf(e.value.replace(/^string:/,"")):"string:".concat(t)===e.value})),r.formSelect(o),n){var l=r.closest(".select-wrapper").find("input");l.attr("placeholder",n)}}}function st(e){return!Array.isArray(e)&&"object"===ct(e)&&Object.values(e).some((function(e){return"object"===ct(e)}))}function dt(e,t){return e.some((function(e){return e.key===t}))}function mt(e,t,n){if(!e)return[];var o=!0,i=e;st(i)||(i={"":e},o=!1);var r=[];return Object.entries(i).forEach((function(e){var n=nt(e,2),i=n[0],l=n[1];Object.entries(l).forEach((function(e){var n=nt(e,2),l=n[0],a=n[1];if(a&&"object"===ct(a)&&"undefined"!==typeof a.key)r.push(a);else{var c=l;"integer"===t&&"string"===typeof l&&(c=parseInt(l,10)),r.push({group:o?i:void 0,key:c,value:a})}}))})),null!==n&&void 0!==n&&n.placeholder&&!dt(r,"")?[{key:"",value:""}].concat(r):r}function ft(e){return"string"===typeof e?e.replace(/^string:/,""):e}var pt=Object(r["defineComponent"])({props:{modelValue:null,modelModifiers:Object,multiple:Boolean,name:String,title:String,availableOptions:Array,uiControlAttributes:Object,uiControlOptions:Object},inheritAttrs:!1,emits:["update:modelValue"],computed:{options:function(){var e=this.availableOptions;return!e||dt(e,"")||"undefined"!==typeof this.modelValue&&null!==this.modelValue&&""!==this.modelValue?e:[{key:"",value:this.modelValue,group:this.hasGroups?"":void 0}].concat(Ye(e))},hasGroups:function(){var e=this.availableOptions;return e&&e[0]&&"undefined"!==typeof e[0].group},groupedOptions:function(){var e=this.options;if(!this.hasGroups||!e)return null;var t={};e.forEach((function(e){var n=e.group;t[n]=t[n]||[],t[n].push(e)}));var n=Object.entries(t);return n.sort((function(e,t){return e[0]<t[0]?-1:e[0]>t[0]?1:0})),n}},methods:{onChange:function(e){var t,n,o=this,i=e.target;if(this.multiple?(n=Array.from(i.options).filter((function(e){return e.selected})).map((function(e){return e.value})),n=n.map((function(e){return ft(e)}))):(n=i.value,n=ft(n)),null!==(t=this.modelModifiers)&&void 0!==t&&t.abortable){var r={value:n,abort:function(){o.onModelValueChange(o.modelValue)}};this.$emit("update:modelValue",r)}else this.$emit("update:modelValue",n)},onModelValueChange:function(e){var t=this;window.$(this.$refs.select).val(e),setTimeout((function(){var n;ut(t.$refs.select,e,null===(n=t.uiControlAttributes)||void 0===n?void 0:n.placeholder,t.uiControlOptions,t.multiple)}))}},watch:{modelValue:function(e){this.onModelValueChange(e)},"uiControlAttributes.disabled":{handler:function(e,t){var n=this;setTimeout((function(){var o;e!==t&&ut(n.$refs.select,n.modelValue,null===(o=n.uiControlAttributes)||void 0===o?void 0:o.placeholder,n.uiControlOptions,n.multiple)}))}},availableOptions:function(e,t){var n=this;e!==t&&setTimeout((function(){var e;ut(n.$refs.select,n.modelValue,null===(e=n.uiControlAttributes)||void 0===e?void 0:e.placeholder,n.uiControlOptions,n.multiple)}))}},mounted:function(){var e=this;setTimeout((function(){var t;ut(e.$refs.select,e.modelValue,null===(t=e.uiControlAttributes)||void 0===t?void 0:t.placeholder,e.uiControlOptions,e.multiple)}))}});pt.render=Xe;var bt=pt,ht=["for","innerHTML"],vt={class:"sites_autocomplete"};function Ot(e,t,n,o,i,l){var a=Object(r["resolveComponent"])("SiteSelector");return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",null,[Object(r["createElementVNode"])("label",{for:e.name,class:"siteSelectorLabel",innerHTML:e.$sanitize(e.title)},null,8,ht),Object(r["createElementVNode"])("div",vt,[Object(r["createVNode"])(a,Object(r["mergeProps"])({"model-value":e.modelValue,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.onChange(t)}),id:e.name,"show-all-sites-item":e.uiControlAttributes.showAllSitesItem||!1,"switch-site-on-select":!1,"show-selected-site":!0,"only-sites-with-admin-access":e.uiControlAttributes.onlySitesWithAdminAccess||!1},e.uiControlAttributes),null,16,["model-value","id","show-all-sites-item","only-sites-with-admin-access"])])])}var jt=Object(r["defineComponent"])({props:{name:String,title:String,modelValue:Object,modelModifiers:Object,uiControlAttributes:Object},inheritAttrs:!1,components:{SiteSelector:O["SiteSelector"]},emits:["update:modelValue"],methods:{onChange:function(e){var t;if(null!==(t=this.modelModifiers)&&void 0!==t&&t.abortable){var n={value:e,abort:function(){}};this.$emit("update:modelValue",n)}else this.$emit("update:modelValue",e)}}});jt.render=Ot;var yt=jt,gt=["type","id","name","value","spellcheck"],Vt=["for","innerHTML"];function Ct(e,t,n,o,i,l){return Object(r["openBlock"])(),Object(r["createElementBlock"])(r["Fragment"],null,[Object(r["createElementVNode"])("input",Object(r["mergeProps"])({class:"control_".concat(e.uiControl),type:e.uiControl,id:e.name,name:e.name,value:e.modelValueText,spellcheck:"password"!==e.uiControl&&null,onKeydown:t[0]||(t[0]=function(t){return e.onKeydown(t)}),onChange:t[1]||(t[1]=function(t){return e.onKeydown(t)})},e.uiControlAttributes),null,16,gt),Object(r["createElementVNode"])("label",{for:e.name,innerHTML:e.$sanitize(e.title)},null,8,Vt)],64)}var kt=Object(r["defineComponent"])({props:{title:String,name:String,uiControlAttributes:Object,modelValue:[String,Number],modelModifiers:Object,uiControl:String},inheritAttrs:!1,emits:["update:modelValue"],computed:{modelValueText:function(){return"undefined"===typeof this.modelValue||null===this.modelValue?"":this.modelValue.toString()}},created:function(){this.onKeydown=Object(O["debounce"])(this.onKeydown.bind(this),50)},mounted:function(){setTimeout((function(){window.Materialize.updateTextFields()}))},watch:{modelValue:function(){setTimeout((function(){window.Materialize.updateTextFields()}))}},methods:{onKeydown:function(e){var t=this,n=e.target.value;if(this.modelValue!==n){var o;if(null===(o=this.modelModifiers)||void 0===o||!o.abortable)return void this.$emit("update:modelValue",n);var i={value:n,abort:function(){e.target.value!==t.modelValueText&&(e.target.value=t.modelValueText)}};this.$emit("update:modelValue",i)}}}});kt.render=Ct;var wt=kt,St=["for","innerHTML"],Tt=["type","name","value"];function At(e,t,n,o,i,l){return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",null,[Object(r["createElementVNode"])("label",{for:e.name,innerHTML:e.$sanitize(e.title)},null,8,St),Object(r["createElementVNode"])("input",Object(r["mergeProps"])({class:"control_".concat(e.uiControl),type:e.uiControl,name:e.name,onKeydown:t[0]||(t[0]=function(t){return e.onKeydown(t)}),onChange:t[1]||(t[1]=function(t){return e.onKeydown(t)}),value:e.concattedValues},e.uiControlAttributes),null,16,Tt)])}var Et=Object(r["defineComponent"])({props:{name:String,title:String,uiControl:String,modelValue:Array,modelModifiers:Object,uiControlAttributes:Object},inheritAttrs:!1,computed:{concattedValues:function(){return"string"===typeof this.modelValue?this.modelValue:(this.modelValue||[]).join(", ")}},emits:["update:modelValue"],created:function(){this.onKeydown=Object(O["debounce"])(this.onKeydown.bind(this),50)},methods:{onKeydown:function(e){var t=this,n=e.target.value.split(",").map((function(e){return e.trim()}));if(n.join(", ")!==this.concattedValues){var o;if(null===(o=this.modelModifiers)||void 0===o||!o.abortable)return void this.$emit("update:modelValue",n);var i={value:n,abort:function(){e.target.value!==t.concattedValues&&(e.target.value=t.concattedValues)}};this.$emit("update:modelValue",i)}}}});Et.render=At;var xt=Et,Ft=["name","id","value"],Mt=["for","innerHTML"];function Nt(e,t,n,o,i,l){return Object(r["openBlock"])(),Object(r["createElementBlock"])(r["Fragment"],null,[Object(r["createElementVNode"])("textarea",Object(r["mergeProps"])({name:e.name},e.uiControlAttributes,{id:e.name,value:e.modelValueText,onKeydown:t[0]||(t[0]=function(t){return e.onKeydown(t)}),onChange:t[1]||(t[1]=function(t){return e.onKeydown(t)}),class:"materialize-textarea",ref:"textarea"}),null,16,Ft),Object(r["createElementVNode"])("label",{for:e.name,innerHTML:e.$sanitize(e.title)},null,8,Mt)],64)}var Bt=Object(r["defineComponent"])({props:{name:String,uiControlAttributes:Object,modelValue:String,modelModifiers:Object,title:String},inheritAttrs:!1,emits:["update:modelValue"],created:function(){this.onKeydown=Object(O["debounce"])(this.onKeydown.bind(this),50)},methods:{onKeydown:function(e){var t=this,n=e.target.value;if(n!==this.modelValue){var o;if(null===(o=this.modelModifiers)||void 0===o||!o.abortable)return void this.$emit("update:modelValue",n);var i={value:n,abort:function(){e.target.value!==t.modelValue&&(e.target.value=t.modelValueText)}};this.$emit("update:modelValue",i)}}},computed:{modelValueText:function(){return this.modelValue||""}},watch:{modelValue:function(){var e=this;setTimeout((function(){window.Materialize.textareaAutoResize(e.$refs.textarea),window.Materialize.updateTextFields()}))}},mounted:function(){var e=this;setTimeout((function(){window.Materialize.textareaAutoResize(e.$refs.textarea),window.Materialize.updateTextFields()}))}});Bt.render=Nt;var $t=Bt,Ht=["for","innerHTML"],It=["name","value"];function Lt(e,t,n,o,i,l){return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",null,[Object(r["createElementVNode"])("label",{for:e.name,innerHTML:e.$sanitize(e.title)},null,8,Ht),Object(r["createElementVNode"])("textarea",Object(r["mergeProps"])({ref:"textarea",name:e.name},e.uiControlAttributes,{value:e.concattedValue,onKeydown:t[0]||(t[0]=function(t){return e.onKeydown(t)}),onChange:t[1]||(t[1]=function(t){return e.onKeydown(t)}),class:"materialize-textarea"}),null,16,It)])}function zt(e){return zt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zt(e)}var Dt="\n",Pt=Object(r["defineComponent"])({props:{name:String,title:String,uiControlAttributes:Object,modelValue:[Array,String],modelModifiers:Object},inheritAttrs:!1,emits:["update:modelValue"],computed:{concattedValue:function(){if("string"===typeof this.modelValue)return this.modelValue;if("object"===zt(this.modelValue))return Object.values(this.modelValue).join(Dt);try{return(this.modelValue||[]).join(Dt)}catch(e){return console.error(e),""}}},created:function(){this.onKeydown=Object(O["debounce"])(this.onKeydown.bind(this),50)},methods:{onKeydown:function(e){var t=this,n=e.target.value.split(Dt);if(n.join(Dt)!==this.concattedValue){var o;if(null===(o=this.modelModifiers)||void 0===o||!o.abortable)return void this.$emit("update:modelValue",n);var i={value:n,abort:function(){e.target.value!==t.concattedValue&&(e.target.value=t.concattedValue)}};this.$emit("update:modelValue",i)}}},watch:{modelValue:function(e,t){var n=this;e!==t&&setTimeout((function(){n.$refs.textarea&&window.Materialize.textareaAutoResize(n.$refs.textarea),window.Materialize.updateTextFields()}))}},mounted:function(){var e=this;setTimeout((function(){e.$refs.textarea&&window.Materialize.textareaAutoResize(e.$refs.textarea),window.Materialize.updateTextFields()}))}});Pt.render=Lt;var Ut=Pt;function Kt(e){return Kt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kt(e)}function Wt(e,t){return Gt(e)||qt(e,t)||Jt(e,t)||_t()}function _t(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Jt(e,t){if(e){if("string"===typeof e)return Rt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Rt(e,t):void 0}}function Rt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function qt(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,i,r=[],l=!0,a=!1;try{for(n=n.call(e);!(l=(o=n.next()).done);l=!0)if(r.push(o.value),t&&r.length===t)break}catch(c){a=!0,i=c}finally{try{l||null==n["return"]||n["return"]()}finally{if(a)throw i}}return r}}function Gt(e){if(Array.isArray(e))return e}
/*!
 * Matomo - free/libre analytics platform
 *
 * @link https://matomo.org
 * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */function Qt(e,t){if(!e)return[];var n=[];return Object.entries(e).forEach((function(e){var o=Wt(e,2),i=o[0],r=o[1];if(r&&"object"===Kt(r)&&"undefined"!==typeof r.key)n.push(r);else{var l=i;"integer"===t&&"string"===typeof i&&(l=parseInt(l,10)),n.push({key:l,value:r})}})),n}function Xt(e){return Xt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xt(e)}var Yt=["password","url","search","email"],Zt=["textarea","checkbox","text"],en={checkbox:"FieldCheckbox","expandable-select":"FieldExpandableSelect","field-array":"FieldFieldArray",file:"FieldFile",hidden:"FieldHidden",multiselect:"FieldSelect",multituple:"FieldMultituple",number:"FieldNumber",radio:"FieldRadio",select:"FieldSelect",site:"FieldSite",text:"FieldText",textarea:"FieldTextarea"},tn={FieldSelect:mt,FieldCheckboxArray:Qt,FieldRadio:Qt,FieldExpandableSelect:ne},nn=Object(r["defineComponent"])({props:{modelValue:null,modelModifiers:Object,formField:{type:Object,required:!0}},emits:["update:modelValue"],components:{FieldCheckbox:F,FieldCheckboxArray:K,FieldExpandableSelect:ie,FieldFieldArray:ce,FieldFile:he,FieldHidden:ye,FieldMultituple:we,FieldNumber:xe,FieldRadio:$e,FieldSelect:bt,FieldSite:yt,FieldText:wt,FieldTextArray:xt,FieldTextarea:$t,FieldTextareaArray:Ut},setup:function(e){var t=Object(r["ref"])(null),n=function(e){var n;e&&t.value&&"function"!==typeof e.render&&(n="string"===typeof e?0===e.indexOf("#")?window.$(e):window.vueSanitize(e):e,window.$(t.value).html("").append(n))};return Object(r["watch"])((function(){return e.formField.inlineHelp}),n),Object(r["onMounted"])((function(){n(e.formField.inlineHelp)})),{inlineHelp:t}},computed:{inlineHelpComponent:function(){var e=this.formField,t=e.inlineHelp;if(t&&"function"===typeof t.render)return e.inlineHelp},inlineHelpBind:function(){return this.inlineHelpComponent?this.formField.inlineHelpBind:void 0},childComponent:function(){var e=this.formField;if(e.component){var t=e.component;if(e.component.plugin){var n=e.component,o=n.plugin,i=n.name;if(!o||!i)throw new Error("Invalid component property given to FormField directive, must be {plugin: '...',name: '...'}");t=Object(O["useExternalPluginComponent"])(o,i)}return Object(r["markRaw"])(t)}var l=e.uiControl,a=en[l];return-1!==Yt.indexOf(l)&&(a="FieldText"),"array"===this.formField.type&&-1!==Zt.indexOf(l)&&(a="".concat(a,"Array")),a},extraChildComponentParams:function(){return"multiselect"===this.formField.uiControl?{multiple:!0}:{}},showFormHelp:function(){return this.formField.description||this.formField.inlineHelp||this.showDefaultValue||this.hasInlineHelpSlot},showDefaultValue:function(){return this.defaultValuePretty&&"checkbox"!==this.formField.uiControl&&"radio"!==this.formField.uiControl},processedModelValue:function(){var e=this.formField;if("boolean"===e.type){var t=this.modelValue&&this.modelValue>0&&"0"!==this.modelValue;if("checkbox"===e.uiControl)return t;if("radio"===e.uiControl)return t?"1":"0"}return this.modelValue},defaultValue:function(){var e=this.formField.defaultValue;return Array.isArray(e)?e.join(","):e},availableOptions:function(){var e=this.childComponent;if("string"!==typeof e)return null;var t=this.formField;return t.availableValues&&tn[e]?tn[e](t.availableValues,t.type,t.uiControlAttributes):null},defaultValuePretty:function(){var e=this.formField,t=e.defaultValue,n=this.availableOptions;if("string"===typeof t&&t){var o=null;try{o=JSON.parse(t)}catch(r){}if(null!==o&&"object"===Xt(o))return""}if(!Array.isArray(n))return Array.isArray(t)?"":t?"".concat(t):"";var i=[];return Array.isArray(t)||(t=[t]),(n||[]).forEach((function(e){"undefined"!==typeof e.value&&-1!==t.indexOf(e.key)&&i.push(e.value)})),i.join(", ")},defaultValuePrettyTruncated:function(){return this.defaultValuePretty.substring(0,50)},hasInlineHelpSlot:function(){var e,t;if(!this.$slots["inline-help"])return!1;var n=this.$slots["inline-help"]();return!(null===n||void 0===n||null===(e=n[0])||void 0===e||null===(t=e.children)||void 0===t||!t.length)}},methods:{onChange:function(e){this.$emit("update:modelValue",e)}}});nn.render=w;var on=nn,rn={multiselect:"array",checkbox:"boolean",site:"object",number:"integer"},ln=Object(r["defineComponent"])({props:{modelValue:null,modelModifiers:Object,uicontrol:String,name:String,defaultValue:null,options:[Object,Array],description:String,introduction:String,title:String,inlineHelp:[String,Object],inlineHelpBind:Object,disabled:Boolean,uiControlAttributes:{type:Object,default:function(){return{}}},uiControlOptions:{type:Object,default:function(){return{}}},autocomplete:String,varType:String,autofocus:Boolean,tabindex:Number,fullWidth:Boolean,maxlength:Number,required:Boolean,placeholder:String,rows:Number,min:Number,max:Number,component:null},emits:["update:modelValue"],components:{FormField:on},computed:{type:function(){if(this.varType)return this.varType;var e=this.uicontrol;return e&&rn[e]?rn[e]:"string"},field:function(){return{uiControl:this.uicontrol,type:this.type,name:this.name,defaultValue:this.defaultValue,availableValues:this.options,description:this.description,introduction:this.introduction,inlineHelp:this.inlineHelp,inlineHelpBind:this.inlineHelpBind,title:this.title,component:this.component,uiControlAttributes:Object.assign(Object.assign({},this.uiControlAttributes),{},{disabled:this.disabled,autocomplete:this.autocomplete,tabindex:this.tabindex,autofocus:this.autofocus,rows:this.rows,required:this.required,maxlength:this.maxlength,placeholder:this.placeholder,min:this.min,max:this.max}),fullWidth:this.fullWidth,uiControlOptions:this.uiControlOptions}}},methods:{onChange:function(e){this.$emit("update:modelValue",e)}}});ln.render=j;var an=ln,cn=10,un=1e3,sn=Object(r["defineComponent"])({components:{Field:an,ActivityIndicator:O["ActivityIndicator"]},data:function(){return{checkNonce:"",isTesting:!1,isTestComplete:!1,isTestSuccess:!1,testTimeoutCount:0,baseUrl:""}},props:{site:{type:Object,required:!0},isWordpress:{type:Boolean,required:!1,default:!1}},created:function(){this.checkWhetherSuccessWasRecorded()},watch:{site:function(){this.onSiteChange()}},methods:{onSiteChange:function(){this.checkNonce="",this.isTesting=!1,this.isTestComplete=!1,this.isTestSuccess=!1,this.testTimeoutCount=0,this.checkWhetherSuccessWasRecorded()},initiateTrackerTest:function(){var e=this;this.isTesting=!0,this.isTestComplete=!1,this.isTestSuccess=!1,this.testTimeoutCount=0;var t=this.site,n={idSite:t.id,url:""};this.baseUrl&&(n.url=this.baseUrl),O["AjaxHelper"].post({module:"API",method:"JsTrackerInstallCheck.initiateJsTrackerInstallTest"},n).then((function(t){var n=t&&t.url&&t.nonce;if(n){e.checkNonce=t.nonce;var o=window.open(t.url);e.setCheckInTime(),setTimeout((function(){o&&!o.closed&&(o.close(),e.testTimeoutCount=cn)}),cn*un)}}))},setCheckInTime:function(){setTimeout(this.checkWhetherSuccessWasRecorded,un)},checkWhetherSuccessWasRecorded:function(){var e=this,t=this.site,n={idSite:t.id,nonce:""};this.checkNonce&&(n.nonce=this.checkNonce),O["AjaxHelper"].post({module:"API",method:"JsTrackerInstallCheck.wasJsTrackerInstallTestSuccessful"},n).then((function(t){if(t&&t.mainUrl&&!e.baseUrl&&(e.baseUrl=t.mainUrl),e.isTestSuccess=t&&t.isSuccess,e.checkNonce&&!e.isTestSuccess&&e.testTimeoutCount<cn)return e.testTimeoutCount+=1,void e.setCheckInTime();e.isTestComplete=!!e.checkNonce,e.isTesting=!1}))}},computed:{getTestFailureMessage:function(){return this.isWordpress?Object(O["translate"])("JsTrackerInstallCheck_JsTrackingCodeInstallCheckFailureMessageWordpress",'<a target="_blank" rel="noreferrer noopener" href="https://wordpress.org/plugins/wp-piwik/">WP-Matomo Integration (WP-Piwik)</a>'):Object(O["translate"])("JsTrackerInstallCheck_JsTrackingCodeInstallCheckFailureMessage")}}});sn.render=v;var dn=sn;
/*!
 * Matomo - free/libre analytics platform
 *
 * @link https://matomo.org
 * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */}})}));
//# sourceMappingURL=JsTrackerInstallCheck.umd.min.js.map